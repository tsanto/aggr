(function(t){function e(e){for(var r,a,s=e[0],c=e[1],l=e[2],u=0,h=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&h.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);d&&d(e);while(h.length)h.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(r=!1)}r&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},i={app:0},o=[];function a(t){return s.p+"js/"+({}[t]||t)+"."+{"chunk-2d0cc844":"534b1991","chunk-85145916":"f360904b"}[t]+".js"}function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise((function(e,r){n=i[t]=[e,r]}));e.push(n[2]=r);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=a(t);var l=new Error;o=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=i[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",l.name="ChunkLoadError",l.type=r,l.request=o,n[1](l)}i[t]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(e)},s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/aggr/",s.oe=function(t){throw t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"018d":function(t,e,n){},"0832":function(t,e,n){},"09b7":function(t,e,n){},"0d96":function(t,e,n){},"0df9":function(t,e,n){"use strict";n("11c4")},"11c4":function(t,e,n){},1296:function(t,e,n){"use strict";n("871b")},1433:function(t,e,n){"use strict";n("d734")},"15a7":function(t,e,n){"use strict";n("3596")},"183a":function(t,e,n){"use strict";n("38d3")},"1e89":function(t,e,n){"use strict";n("423d")},"1feb":function(t,e,n){"use strict";n("5bcf")},2231:function(t,e,n){"use strict";n("6adc")},"248d":function(t,e,n){"use strict";n("0832")},"29d8":function(t,e,n){},"2da9":function(t,e,n){},3252:function(t,e,n){"use strict";n("2da9")},3596:function(t,e,n){},"38d3":function(t,e,n){},"38da":function(t,e,n){"use strict";n("e294")},"392d":function(t){t.exports=JSON.parse('{"price":{"enabled":true,"name":"Price","script":"plotcandlestick(avg_ohlc(bar))","options":{"priceScaleId":"right","priceFormat":{"auto":true,"precision":1},"priceLineVisible":true,"lastValueVisible":true,"borderVisible":true,"upColor":"rgba(100, 157, 102, 0)","downColor":"rgb(156,52,62)","borderUpColor":"rgb(59, 202, 109)","borderDownColor":"rgb(239,67,82)","wickUpColor":"rgb(59, 202, 109)","wickDownColor":"rgb(239,67,82)"}},"smas":{"name":"SMA {fastLength} {mediumLength} {slowLength}","displayName":"SMA 50 100 200","script":"plotline(sma($price.close, options.fastLength), color=options.fastColor)\\nplotline(sma($price.close, options.mediumLength), color=options.mediumColor)\\nplotline(sma($price.close, options.slowLength), color=options.slowColor)","options":{"priceScaleId":"right","fastLength":50,"mediumLength":100,"slowLength":200,"fastColor":"#42a5f5","mediumColor":"#64b5f6","slowColor":"#90caf9"}},"emas":{"name":"EMA {fastLength} {mediumLength} {slowLength}","displayName":"EMA 50 100 200","script":"plotline(ema($price.close, options.fastLength), color=options.fastColor)\\nplotline(ema($price.close, options.mediumLength), color=options.mediumColor)\\nplotline(ema($price.close, options.slowLength), color=options.slowColor)","options":{"priceScaleId":"right","fastLength":50,"mediumLength":100,"slowLength":200,"fastColor":"#42a5f5","mediumColor":"#64b5f6","slowColor":"#90caf9"}},"volume":{"enabled":true,"name":"Volume","description":"Volume + delta","script":"if (upColor === 0) {\\n  if (options.showDelta) {\\n    upColor = options.upBgColor\\n    downColor = options.downBgColor\\n  } else {\\n    upColor = options.upColor\\n    downColor = options.downColor\\n  }\\n}\\n\\nif (options.showDelta) {\\n  plothistogram({ time: time, value: Math.abs(vbuy-vsell), color: vbuy - vsell > 0 ? options.upColor : options.downColor})\\n}\\n\\nplothistogram({ time: time, value: vbuy + vsell, color: vbuy > vsell ? upColor : downColor })","options":{"priceFormat":{"type":"volume"},"upColor":"rgb(59,202,109)","downColor":"rgb(235,30,47)","priceScaleId":"volume","scaleMargins":{"top":0.84,"bottom":0},"showDelta":true,"upBgColor":"rgba(59,202,109,0.5)","downBgColor":"rgba(235,30,47,0.5)"}},"liquidations":{"enabled":true,"name":"Liquidations","description":"Liquidations by side","script":"plothistogram(lbuy, color=options.upColor)\\nplothistogram(-lsell, color=options.downColor)","options":{"priceFormat":{"type":"volume"},"priceScaleId":"volume_liquidations","upColor":"rgb(255,76,243)","downColor":"rgb(255,183,77)","scaleMargins":{"top":0.75,"bottom":0.17}}},"cvd":{"enabled":true,"name":"CVD","description":"Cumulative Volume Delta","script":"plotline(cum(vbuy - vsell))","options":{"priceScaleId":"cvd","priceFormat":{"type":"volume"},"color":"#3BCA6D","scaleMargins":{"top":0.84,"bottom":0}}},"btccvdperp":{"name":"CVD (BTC PERP)","description":"CVD specific markets","script":"line(cum((BINANCE_FUTURES:btcusdt.vbuy+BINANCE_FUTURES:btcusd_perp.vbuy+BITFINEX:BTCF0:USTF0.vbuy+BITMEX:XBTUSD.vbuy+BYBIT:BTCUSD.vbuy+BYBIT:BTCUSDT.vbuy+DERIBIT:BTC-PERPETUAL.vbuy+FTX:BTC-PERP.vbuy+HUOBI:BTC-USD.vbuy+KRAKEN:PI_XBTUSD.vbuy+OKEX:BTC-USDT-SWAP.vbuy+OKEX:BTC-USD-SWAP.vbuy)- (BINANCE_FUTURES:btcusdt.vsell+BINANCE_FUTURES:btcusd_perp.vsell+BITFINEX:BTCF0:USTF0.vsell+BITMEX:XBTUSD.vsell+BYBIT:BTCUSD.vsell+BYBIT:BTCUSDT.vsell+DERIBIT:BTC-PERPETUAL.vsell+FTX:BTC-PERP.vsell+HUOBI:BTC-USD.vsell+KRAKEN:PI_XBTUSD.vsell+OKEX:BTC-USDT-SWAP.vsell+OKEX:BTC-USD-SWAP.vsell)), title=CVD:BTC:PERP)","options":{"priceFormat":{"type":"volume"},"priceScaleId":"cvdperp","color":"#42a5f5"}},"btccvdspot":{"name":"CVD (BTC SPOT)","description":"CVD specific markets","script":"line(cum((BINANCE:btcusdt.vbuy+BINANCE:btcusdc.vbuy+BITFINEX:BTCUSD.vbuy+BITSTAMP:btcusd.vbuy+BITSTAMP:btcusdt.vbuy+BITSTAMP:btcusdc.vbuy+COINBASE:BTC-USDC.vbuy+COINBASE:BTC-USD.vbuy+COINBASE:BTC-USDT.vbuy+FTX:BTC/USD.vbuy+FTX:BTC/USDT.vbuy+HUOBI:btcusdt.vbuy+HUOBI:btcusdc.vbuy+KRAKEN:XBT/USDC.vbuy+KRAKEN:XBT/USDT.vbuy+KRAKEN:XBT/USD.vbuy+OKEX:BTC-USDT.vbuy+OKEX:BTC-USDC.vbuy+POLONIEX:USDT_BTC.vbuy+POLONIEX:USDC_BTC.vbuy)-(BINANCE:btcusdt.vsell+BINANCE:btcusdc.vsell+BITFINEX:BTCUSD.vsell+BITSTAMP:btcusd.vsell+BITSTAMP:btcusdt.vsell+BITSTAMP:btcusdc.vsell+COINBASE:BTC-USDC.vsell+COINBASE:BTC-USD.vsell+COINBASE:BTC-USDT.vsell+FTX:BTC/USD.vsell+FTX:BTC/USDT.vsell+HUOBI:btcusdt.vsell+HUOBI:btcusdc.vsell+KRAKEN:XBT/USDC.vsell+KRAKEN:XBT/USDT.vsell+KRAKEN:XBT/USD.vsell+OKEX:BTC-USDT.vsell+OKEX:BTC-USDC.vsell+POLONIEX:USDT_BTC.vsell+POLONIEX:USDC_BTC.vsell)), title=CVD:BTC:SPOT)","options":{"priceFormat":{"type":"volume"},"priceScaleId":"cvdspot","color":"#4caf50"}},"ctd":{"script":"plotline(cum(cbuy-csell))","name":"CTD","description":"Cumulative Trades Delta","options":{"priceScaleId":"ctd","lineStyle":4,"lineWidth":1}},"cld":{"script":"plotline(cum(lbuy-lsell))","name":"CLD","description":"Cumulative Liquidations Delta","options":{"priceFormat":{"type":"volume"},"color":"rgb(156,39,176)","priceScaleId":"ctd","lineWidth":1,"scaleMargins":{"top":0.75,"bottom":0.17}}},"allmarkets":{"script":"plotline(BITFINEX:BTCUSD.close, color=#97c554, title=Bitfinex.spot)\\nplotline(BINANCE:btcusdt.close, color=#f3ba2f, title=Binance.spot)\\nplotline(OKEX:BTC-USDT.close, color=#5894f2, title=Okex.spot)\\nplotline(KRAKEN:XBT/USD.close, color=#5841d8, title=Kraken.spot)\\nplotline(COINBASE:BTC-USD.close, color=#0e70e2, title=Coinbase.spot)\\nplotline(POLONIEX:USDT_BTC.close, color=#858b8f, title=Poloniex.spot)\\nplotline(HUOBI:btcusdt.close, color=#2ca6e0, title=Huobi.spot)\\nplotline(BITSTAMP:btcusd.close, color=#169f4a, title=Bitstamp.spot)\\nplotline(BITMEX:XBTUSD.close, color=#595fb5, title=Bitmex.perp)\\nplotline(BITFINEX:BTCF0:USTF0.close, color=#97c554, title=Bitfinex.perp)\\nplotline(OKEX:BTC-USD-SWAP.close, color=#5894f2, title=Okex.perp)\\nplotline(BINANCE_FUTURES:btcusdt.close, color=#f3ba2f, title=Binance.perp)\\nplotline(BINANCE_FUTURES:btcusd_perp.close, color=#f3ba2f, title=Binance.perp)\\nplotline(HUOBI:BTC-USD.close, color=#2ca6e0, title=Huobi.perp)\\nplotline(KRAKEN:PI_XBTUSD.close, color=#5841d8, title=Kraken.perp)\\nplotline(DERIBIT:BTC-PERPETUAL.close, color=#2dae9a, title=Deribit.perp)\\nplotline(FTX:BTC-PERP.close, color=#02a6c2, title=Ftx.perp)\\nplotline(BYBIT:BTCUSD.close, color=#f9b600, title=Bybit.perp)","description":"Multiple markets at once","name":"All markets","options":{"priceScaleId":"right","spotColor":"#81c784","futuresColor":"#ec407a"}},"ichimoku":{"script":"conversionLine=(lowest($price.low, options.conversionLineLength) + highest($price.high, options.conversionLineLength)) / 2\\nbaseLine=(lowest($price.low, options.baseLineLength) + highest($price.high, options.baseLineLength)) / 2\\nleadLineOne=(conversionLine + baseLine) / 2\\nleadLineTwo=(lowest($price.low, options.laggingSpanTwoLength) + highest($price.high, options.laggingSpanTwoLength)) / 2\\nplotcloudarea(leadLineTwo, leadLineOne, offset=options.displacement)","name":"Ichimoku","options":{"baseLineLength":26,"conversionLineLength":9,"displacement":24,"laggingSpanTwoLength":52,"priceScaleId":"right"}},"bollinger_bands":{"script":"a = sma(Math.pow($price.close,2),options.length)\\nb = Math.pow(sum($price.close,options.length),2)/Math.pow(options.length,2)\\nstdev = Math.sqrt(a - b)\\nsrc = $price.close\\n\\nbasis = sma($price.close, options.length)\\ndev = options.mult * stdev\\nupper = basis + dev\\nlower = basis - dev\\n\\nplotline(basis, color=options.basisColor)\\nplotcloudarea(lower, upper)","name":"Bollinger Bands","options":{"priceScaleId":"right","mult":2,"length":20,"lineStyle":2,"basisColor":"rgba(129,199,132,0.5)","positiveColor":"rgba(0,0,0,0.1)","negativeColor":"rgba(0,0,0,0.1)","lowerLineColor":"rgb(129,199,132)","higherLineColor":"rgb(129,199,132)"}},"bb-ema-ribbon":{"script":"src = sma($price.close, options.maLength)\\na = sma(Math.pow(src,2),options.bbLength)\\nb = Math.pow(sum(src,options.bbLength),2)/Math.pow(options.bbLength,2)\\nstdev = Math.sqrt(a - b)\\ndev = options.mult * stdev\\nbasis = sma(src, options.bbLength)\\nupper = basis + dev\\nlower = basis - dev\\nsrcTwo=($price.close + $price.low + $price.high) / 3\\nemaSlow = ema(srcTwo, options.emaSlowLength)\\nemaFast = ema(srcTwo, options.emaFastLength)\\nplotcloudarea(lower, upper, positiveColor=options.slowRibbonColor, negativeColor=options.slowRibbonColor)\\nplotcloudarea(emaSlow, emaFast)","name":"Ribbon","options":{"priceScaleId":"right","maLength":200,"bbLength":50,"mult":3,"emaSlowLength":50,"emaFastLength":20,"slowRibbonColor":"rgba(255,204,128,0.1)","higherLineColor":"rgba(0,0,0,0)","lowerLineColor":"rgba(0,0,0,0)","negativeColor":"rgba(255,167,38,0.25)","positiveColor":"rgba(255,167,38,0.25)"}},"vwap":{"script":"var src = ($price.high + $price.low + $price.close)/3\\nvar vol=vbuy+vsell\\nvar sumVol = cum(vol)\\nvar sumSrcVol = cum(src * vol)\\nvar sumSrcSrcVol = cum(vol*Math.pow(src, 2))\\nvar VWAP = sumSrcVol / sumVol \\nvar variance = sumSrcSrcVol / sumVol - Math.pow(VWAP, 2)\\nvar stDev = Math.sqrt(variance < 0 ? 0 : variance)\\n\\t\\nline(VWAP)\\ncloudarea(VWAP - stDev * options.stdevMultiplier, VWAP + stDev * options.stdevMultiplier)\\n\\nvar unixDays = time / 60 / 60 / 24 + 3\\nif (unixDays % (options.sessionLengthInDays) === 0) {\\n  fns[0].state = {}\\n  fns[1].state = {}\\n  fns[2].state = {}\\n}","name":"VWAP","options":{"priceScaleId":"right","stdevMultiplier":1,"color":"rgb(41,98,255)","sessionLengthInDays":7}},"rsi":{"script":"// rsi\\nsrc(50) = $price.close\\nvar change = src - src[1]\\nvar up = ema(Math.max(change, 0), options.length)\\nvar down = ema(-Math.min(change, 0), options.length)\\nrsi = down == 0 ? 100 : up == 0 ? 0 : 100 - (100 / (1 + up / down))\\nline(rsi)\\nbrokenarea(options.thresholdUp, options.thresholdLow, color=options.thresholdColor)\\n\\nif (options.showDivs) {\\n  // <markers utils>\\n  if (markers === 0) {\\n    markers = []\\n  }\\n  \\n  if (pendingMarker && pendingMarker.time < time) {\\n    markers.push(pendingMarker)\\n    pendingMarker = null\\n  }\\n  \\n  var newMarker = null\\n  // </markers utils>\\n  \\n  // find long signals\\n  pl = pivot_low(rsi, options.pivotLeftLength, options.pivotRightLength)\\n  if (pl && pl !== _pl) {\\n    var plsrc = src[options.pivotRightLength]\\n    if (pl > _pl && plsrc < _plsrc && (pl < options.thresholdLow || _pl < options.thresholdLow)) {\\n      newMarker = {\\n        time: time - options.pivotRightLength * bar.timeframe,\\n        position: \'belowBar\',\\n        text: \'🔺\',\\n        size: 1\\n      }\\n    }\\n    \\n    _plsrc = plsrc\\n    _pl = pl\\n  }\\n  \\n  // find sell signals\\n  ph = pivot_high(rsi, options.pivotLeftLength, options.pivotRightLength)\\n  \\n  if (ph && ph !== _ph) {\\n    var phsrc = src[options.pivotRightLength]\\n    if (ph < _ph && phsrc > _phsrc && (ph > options.thresholdUp || _ph > options.thresholdUp)) {\\n      newMarker = {\\n        time: time - options.pivotRightLength * bar.timeframe,\\n        position: \'aboveBar\',\\n        text: \'🔻\',\\n        size: 1\\n      }\\n    }\\n    \\n    _phsrc = phsrc\\n    _ph = ph\\n  }\\n  \\n  // <markers utils>\\n  if (newMarker || (pendingMarker && !newMarker)) {\\n    pendingMarker = newMarker\\n    \\n    if (markers.length > 200) {\\n      markers.splice(0, 1)\\n    }\\n    \\n    if (series[0].setMarkers) {\\n      series[0].setMarkers(markers.concat(pendingMarker))\\n    }\\n  }\\n  // </markers utils>\\n}","name":"RSI","options":{"priceScaleId":"rsi","scaleMargins":{"top":0.01,"bottom":0.83},"thresholdColor":"rgba(102,187,106,0.1)","color":"rgb(165,214,167)","length":14,"pivotLeftLength":3,"pivotRightLength":3,"thresholdLow":20,"thresholdUp":70,"showDivs":false}},"pivot-vwap":{"script":"ph = pivot_high($price.high, options.pivotLeftLength, options.pivotRightLength)\\npl = pivot_low($price.low, options.pivotLeftLength, options.pivotRightLength)\\n\\nsrcClose(100) = $price.close\\nsrcLow(100) = $price.low\\nsrcHigh(100) = $price.high\\nvol(100) = vbuy + vsell\\n\\nif (ph && _ph !== ph) {  \\n  if (ph > _ph && ((!options.showBands && ph > vwapHighHigh) || (options.showBands && ph > highestBand))) {\\n    var _vol = 0\\n    var _srcVolClose  = 0\\n    var _srcSrcVolClose  = 0\\n    var _srcVolHigh  = 0\\n    var _srcSrcVolHigh  = 0\\n    var _srcVolLow  = 0\\n    var _srcSrcVolLow  = 0\\n    \\n    for (var i = options.pivotRightLength; i > 0; i--) {\\n      var srcAtIndex = srcClose[i]\\n      var volAtIndex = vol[i]\\n      _vol = _vol + volAtIndex \\n      _srcVolClose = _srcVolClose + srcAtIndex * volAtIndex\\n      _srcSrcVolClose = _srcSrcVolClose + volAtIndex * Math.pow(srcAtIndex, 2)\\n  \\n      srcAtIndex = srcHigh[i]\\n      _srcVolHigh = _srcVolHigh + srcAtIndex * volAtIndex\\n      _srcSrcVolHigh = _srcSrcVolHigh + volAtIndex * Math.pow(srcAtIndex, 2)\\n  \\n      srcAtIndex = srcLow[i]\\n      _srcVolLow = _srcVolLow + srcAtIndex * volAtIndex\\n      _srcSrcVolLow = _srcSrcVolLow + volAtIndex * Math.pow(srcAtIndex, 2)\\n    }\\n    \\n    fns[2].state.open = _vol \\n    fns[3].state.open = _srcVolClose\\n    fns[4].state.open = _srcVolHigh\\n    fns[5].state.open = _srcVolLow\\n    fns[6].state.open = _srcSrcVolClose\\n    fns[7].state.open = _srcSrcVolHigh\\n    fns[8].state.open = _srcSrcVolLow\\n  }\\n  \\n  _ph = ph\\n}\\n\\nvar volHigh = cum(vol)\\nvar srcVolHighClose = cum(srcClose * vol)\\nvar srcVolHighHigh = cum(srcHigh * vol)\\nvar srcVolHighLow = cum(srcLow * vol)\\nvwapHighClose = srcVolHighClose / volHigh \\nvwapHighHigh = srcVolHighHigh / volHigh \\nvwapHighLow = srcVolHighLow / volHigh \\n\\nif (options.showBands) {\\n  var srcSrcVolHighClose = cum(vol * Math.pow(srcClose, 2))\\n  var srcSrcVolHighHigh = cum(vol * Math.pow(srcHigh, 2))\\n  var srcSrcVolHighLow = cum(vol * Math.pow(srcLow, 2))\\n  var stDevHighClose = Math.sqrt(srcSrcVolHighClose / volHigh - Math.pow(vwapHighClose, 2))\\n  var stDevHighHigh = Math.sqrt(srcSrcVolHighHigh / volHigh - Math.pow(vwapHighHigh, 2))\\n  var stDevHighLow = Math.sqrt(srcSrcVolHighLow / volHigh - Math.pow(vwapHighLow, 2))\\n  highestBand = vwapHighClose + stDevHighClose * options.bandMultiplier\\n\\n  cloudarea(vwapHighLow + stDevHighLow * options.bandMultiplier, vwapHighHigh + stDevHighHigh * options.bandMultiplier)\\n}\\n\\nif (pl && _pl !== pl) {\\n  if (pl < _pl && ((!options.showBands && pl < vwapLowLow) || (options.showBands && pl < lowestBand))) {\\n    var _vol = 0\\n    var _srcVolClose  = 0\\n    var _srcSrcVolClose  = 0\\n    var _srcVolHigh  = 0\\n    var _srcSrcVolHigh  = 0\\n    var _srcVolLow  = 0\\n    var _srcSrcVolLow  = 0\\n    \\n    for (var i = options.pivotRightLength; i > 0; i--) {\\n      var srcAtIndex = srcClose[i]\\n      var volAtIndex = vol[i]\\n      _vol = _vol + volAtIndex \\n      _srcVolClose = _srcVolClose + srcAtIndex * volAtIndex\\n      _srcSrcVolClose = _srcSrcVolClose + volAtIndex * Math.pow(srcAtIndex, 2)\\n\\n      srcAtIndex = srcHigh[i]\\n      _srcVolHigh = _srcVolHigh + srcAtIndex * volAtIndex\\n      _srcSrcVolHigh = _srcSrcVolHigh + volAtIndex * Math.pow(srcAtIndex, 2)\\n\\n      srcAtIndex = srcLow[i]\\n      _srcVolLow = _srcVolLow + srcAtIndex * volAtIndex\\n      _srcSrcVolLow = _srcSrcVolLow + volAtIndex * Math.pow(srcAtIndex, 2)\\n    }\\n    \\n    fns[9].state.open = _vol \\n    fns[10].state.open = _srcVolClose\\n    fns[11].state.open = _srcVolHigh\\n    fns[12].state.open = _srcVolLow\\n    fns[13].state.open = _srcSrcVolClose\\n    fns[14].state.open = _srcSrcVolHigh\\n    fns[15].state.open = _srcSrcVolLow\\n  }\\n\\n  _pl = pl\\n}\\n\\nvar volLow = cum(vol)\\nvar srcVolLowClose = cum(srcClose * vol)\\nvar srcVolLowHigh = cum(srcHigh * vol)\\nvar srcVolLowLow = cum(srcLow * vol)\\nvwapLowClose = srcVolLowClose / volLow \\nvwapLowHigh = srcVolLowHigh / volLow \\nvwapLowLow = srcVolLowLow / volLow \\n\\nif (options.showBands) {\\n  var srcSrcVolLowClose = cum(vol * Math.pow(srcClose, 2))\\n  var srcSrcVolLowHigh = cum(vol * Math.pow(srcHigh, 2))\\n  var srcSrcVolLowLow = cum(vol * Math.pow(srcLow, 2))\\n  var stDevLowClose = Math.sqrt(srcSrcVolLowClose / volLow - Math.pow(vwapLowClose, 2))\\n  var stDevLowHigh = Math.sqrt(srcSrcVolLowHigh / volLow - Math.pow(vwapLowHigh, 2))\\n  var stDevLowLow = Math.sqrt(srcSrcVolLowLow / volLow - Math.pow(vwapLowLow, 2))\\n  lowestBand = vwapLowClose - stDevLowClose * options.bandMultiplier\\n  \\n  cloudarea(vwapLowLow - stDevLowLow * options.bandMultiplier, vwapLowHigh - stDevLowHigh * options.bandMultiplier)\\n}\\n\\nif (options.showMedianVwap) {\\n  line((vwapLowClose + vwapLowHigh + vwapLowLow + vwapHighClose + vwapHighHigh + vwapHighLow) / 6)\\n}\\n\\nif (options.showPivot) {\\n  if (_ph) line(_ph, offset=(-options.pivotRightLength-options.pivotRightLength)/2)\\n  if (_pl) line(_pl, offset=(-options.pivotRightLength-options.pivotRightLength)/2)\\n}","name":"Pivot VWAP {pivotLeftLength} {pivotRightLength}","version":"3.1.0","options":{"priceScaleId":"right","pivotLeftLength":14,"pivotRightLength":14,"showPivot":false,"showMedianVwap":false,"bandMultiplier":1.5,"showBands":true,"color":"rgb(255,255,255)","lowerLineColor":"rgba(255,255,255,0.55)","higherLineColor":"rgba(255,255,255,0.55)","negativeColor":"rgba(255,255,255,0.2)","positiveColor":"rgba(255,255,255,0.2)"}},"sma-bands":{"name":"SMA VWAP Bands {length}","version":"3.1.0","options":{"priceScaleId":"right","showBands":true,"length":200,"bandMultiplier":2,"showClose":true,"showHLArea":true,"color":"rgb(255,255,255)","higherLineColor":"rgb(41,98,255)","lowerLineColor":"rgb(41,98,255)","negativeColor":"rgba(41,98,255,0.2)","positiveColor":"rgba(41,98,255,0.2)"},"script":"var vol = vbuy + vsell\\nvar length = options.length || 200\\n\\nvar volSma = sma(vol, options.length)\\nvar srcVolSmaClose = sma($price.close * vol, options.length)\\nvar srcVolSmaHigh = sma($price.high * vol, options.length)\\nvar srcVolSmaLow = sma($price.low * vol, options.length)\\nvwapHighClose = srcVolSmaClose / volSma \\nvwapHighHigh = srcVolSmaHigh / volSma \\nvwapHighLow = srcVolSmaLow / volSma \\n\\nif (options.showHLArea) {\\n  cloudarea(vwapHighHigh, vwapHighLow)\\n}\\n\\nif (options.showClose) {\\n  line(vwapHighClose)\\n}\\n\\nif (options.showBands) {\\n  var srcSrcVolSmaClose = sma(vol * Math.pow($price.close, 2), options.length)\\n  var srcSrcVolSmaHigh = sma(vol * Math.pow($price.high, 2), options.length)\\n  var srcSrcVolSmaLow = sma(vol * Math.pow($price.low, 2), options.length)\\n  var stDevHighClose = Math.sqrt(srcSrcVolSmaClose / volSma - Math.pow(vwapHighClose, 2))\\n  var stDevHighHigh = Math.sqrt(srcSrcVolSmaHigh / volSma - Math.pow(vwapHighHigh, 2))\\n  var stDevHighLow = Math.sqrt(srcSrcVolSmaLow / volSma - Math.pow(vwapHighLow, 2))\\n\\n  if (options.showHLArea) {\\n    cloudarea(vwapHighLow - stDevHighLow * options.bandMultiplier, vwapHighHigh - stDevHighHigh * options.bandMultiplier)\\n    cloudarea(vwapHighLow + stDevHighLow * options.bandMultiplier, vwapHighHigh + stDevHighHigh * options.bandMultiplier)\\n  }\\n\\n  if (options.showClose) {\\n    line(vwapHighClose - stDevHighClose * options.bandMultiplier)\\n    line(vwapHighClose + stDevHighClose * options.bandMultiplier)\\n  }\\n}"},"vwap-bands":{"name":"VWAP Bands {length}","version":"3.1.0","options":{"priceScaleId":"right","stdevMultiplier":1.5,"stdevSecondaryMultiplier":2,"buyBgColor":"rgba(255,255,255,0.15)","buyColor":"rgba(255,255,255,0.47)","sellBgColor":"rgba(255,255,255,0.15)","sellColor":"rgba(255,255,255,0.55)","dblBuyBgColor":"rgba(255,255,255,0.15)","dblBuyColor":"rgba(255,255,255,0.5)","dblSellBgColor":"rgba(255,255,255,0.15)","dblSellColor":"rgba(255,255,255,0.53)","length":100,"showDouble":true},"script":"var price = $price\\nvar src = (price.high + price.low + price.close)/3\\n\\nvar sumSell = sum(vsell, options.length)\\nvar sumSrcSell = sum(src * vsell, options.length)\\nvar sumSrcSrcSell = sum(vsell*Math.pow(src, 2), options.length)\\nvar VWAPSell = sumSrcSell / sumSell \\nvar varianceSell = sumSrcSrcSell / sumSell - Math.pow(VWAPSell, 2)\\nvar stDevSell = Math.sqrt(varianceSell < 0 ? 0 : varianceSell)\\nvar sumBuy = sum(vbuy, options.length)\\nvar sumSrcBuy = sum(src * vbuy, options.length)\\nvar sumSrcSrcBuy = sum(vbuy*Math.pow(src, 2), options.length)\\nvar VWAPBuy = sumSrcBuy / sumBuy \\nvar varianceBuy = sumSrcSrcBuy / sumBuy - Math.pow(VWAPBuy, 2)\\nvar stDevBuy = Math.sqrt(varianceBuy < 0 ? 0 : varianceBuy)\\n\\nvar thresholdDown = VWAPBuy - stDevBuy * options.stdevMultiplier\\nvar thresholdUp = VWAPSell + stDevSell * options.stdevMultiplier\\n\\ncloudarea(\\n  VWAPSell - stDevSell * options.stdevMultiplier,\\n  thresholdDown,\\n  positiveColor=options.buyBgColor,\\n  negativeColor=options.buyBgColor,\\n  higherLineColor=options.buyColor,\\n  lowerLineColor=options.buyColor)\\n\\ncloudarea(thresholdUp,\\n  VWAPBuy + stDevBuy * options.stdevMultiplier,\\n  positiveColor=options.sellBgColor,\\n  negativeColor=options.sellBgColor,\\n  higherLineColor=options.sellColor,\\n  lowerLineColor=options.sellColor)\\n\\nvar na = { time: time }\\n\\nif (options.showDouble) {\\n  cloudarea(\\n    VWAPSell - stDevSell * options.stdevSecondaryMultiplier,\\n    thresholdDown,\\n    positiveColor=options.dblBuyBgColor,\\n    negativeColor=options.dblBuyBgColor,\\n    higherLineColor=options.dblBuyColor,\\n    lowerLineColor=options.dblBuyColor\\n  )\\n  \\n  cloudarea(\\n   thresholdUp,\\n   VWAPBuy + stDevBuy * options.stdevSecondaryMultiplier,\\n    positiveColor=options.dblSellBgColor,\\n    negativeColor=options.dblSellBgColor,\\n    higherLineColor=options.dblSellColor,\\n    lowerLineColor=options.dblSellColor\\n  )\\n}"}}')},"3e57":function(t){t.exports=JSON.parse('{"preferQuoteCurrencySize":true,"aggregationLength":1,"disableAnimations":false,"calculateSlippage":null,"autoHideHeaders":true,"theme":"dark","backgroundColor":"rgb(23,27,41)","textColor":"","timezoneOffset":0,"useAudio":false,"audioVolume":1,"audioFilters":{"PingPongDelay":true,"Compressor":false,"Delay":false,"HighPassFilter":true,"LowPassFilter":false},"settings":["other","workspaces","chart","stats","counters","audio"],"searchTypes":{"historical":true,"spots":true,"perpetuals":true,"futures":false,"normalize":true,"mergeUsdt":true},"searchQuotes":{"USD":true,"USDT":true,"UST":true},"previousSearchSelections":[],"searchExchanges":{},"favoriteTimeframes":{},"normalizeWatermarks":true,"alerts":true,"alertsColor":"red","alertsLineStyle":2,"alertsLineWidth":2,"alertsClick":false,"alertSound":null}')},"3f50":function(t,e,n){"use strict";n("e0ff")},"3fcd":function(t,e,n){"use strict";n("4a81")},"423d":function(t,e,n){},"42ec":function(t,e,n){},"44fb":function(t,e,n){"use strict";n("0d96")},"473d":function(t,e,n){"use strict";n("dbe0")},"4a81":function(t,e,n){},"4aaa":function(t,e,n){"use strict";n("42ec")},"4ee8":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQ5JREFUeNrslz0KwjAUgJNCF3EoiIuniIu7eJF6BE9kLyLuLvYULiJ0EJdC8QWe4NA0eT91sQ9CWkj7ffnhJTHm38MKvs2hLPD5AaX9pcAHnuF7x5WwCnAjkbBKcLYERSBDeB5p16JEpymQCidL2BHgJAk7EjxZIiZQQJkJc80LSsMR0IBHJYYEVspZ90YVWArmvm8t3M0UU1AW4XO3uULllDj1/HRZhzJdKJxiR91Qqg1FpShQsVIxTMMRqlIKh+Hfc0bAx8HPn2Tu8R/87RhGwe8JZ8aa8PAt9L4RH0gYEklw0pGMIJEMJx9KQcKhRBFo0iC8FicihgQZzr6Y9Eiw4KKr2ZeE4cKn8PEWYACxq1U+/EnHbQAAAABJRU5ErkJggg=="},"5a81":function(t,e,n){"use strict";n("f552")},"5bcf":function(t,e,n){},"5e2e":function(t,e,n){},6904:function(t,e,n){},"6adc":function(t,e,n){},"6fa3":function(t,e,n){},7596:function(t){t.exports=JSON.parse('[{"name":"threshold:bongo 🥁","type":"threshold","data":{"0":{"buyAudio":"playurl(https://d7d3471nr939s.cloudfront.net/DeepHouseSessions_Noiz_SP/MP3/One+Shots/Bongo_08_73_SP.mp3?cb=6cfb91bb-f15f-432a-bfae-17ef22b22005, gain * .75)","sellAudio":"playurl(https://d7d3471nr939s.cloudfront.net/DeepHouseSessions_Noiz_SP/MP3/One+Shots/Bongo_13_73_SP.mp3?cb=6ff3b374-9c98-4d3e-9f8e-4f02eef40c8e, gain * .75)"},"1":{"buyAudio":"playurl(https://d7d3471nr939s.cloudfront.net/SaharanRhythms_Noiz_SP/MP3/One+Shots/BongoHighFlam_SP_223_01.mp3?cb=4d88d832-850d-4ad1-9e89-a23b3cbdfb89, gain)","sellAudio":"playurl(https://d7d3471nr939s.cloudfront.net/SaharanRhythms_Noiz_SP/MP3/One+Shots/BongoLowFlamQuiet_SP_223_01.mp3?cb=ae87962f-a948-484e-a2dc-392c41f14105, gain)"},"2":{"buyAudio":"playurl(https://d7d3471nr939s.cloudfront.net/SaharanRhythms_Noiz_SP/MP3/One+Shots/BongoHighRoll_SP_223_01.mp3?cb=6d81f0bb-9e13-4404-aae5-02bce10d2a0a, gain)","sellAudio":"playurl(https://d7d3471nr939s.cloudfront.net/SaharanRhythms_Noiz_SP/MP3/One+Shots/BongoLowRoll_SP_223_01.mp3?cb=39110d56-d2cd-4be7-8e1f-d2f1c9f677cf, gain)"},"3":{"buyAudio":"playurl(https://d7d3471nr939s.cloudfront.net/CinematicPercussion_Noiiz_SP/MP3/One+Shots/Chimes+&+Bells/TubularBell_5_Mallet_395_SP.mp3?cb=2baef87d-892e-4704-8068-26d15072850c, gain / 2, 30)","sellAudio":"playurl(https://d7d3471nr939s.cloudfront.net/CinematicPercussion_Noiiz_SP/MP3/One+Shots/Chimes+&+Bells/TubularBell_7_Mallet_395_SP.mp3?cb=dfd72abd-0bdc-4d0e-8085-dea85017a49c, gain / 2, 20)"},"liquidations":{"buyAudio":"playurl(https://d7d3471nr939s.cloudfront.net/PlasticDrums_Noiiz/MP3/One+Shots/Kitchen+Kit/D_WaterBottleTom_01_631.mp3?cb=d1d46d16-81be-4674-875c-6c55cb54c797, gain)","sellAudio":"playurl(https://d7d3471nr939s.cloudfront.net/PlasticDrums_Noiiz/MP3/One+Shots/Kitchen+Kit/C%23_PlasticBottleKick_01_631.mp3?cb=eb673166-02a6-43b9-8187-daf05ea65a16, gain)"}}},{"name":"indicator:price:default","type":"indicator","version":"3.0.8","data":{"options":{"upColor":"rgba(100, 157, 102, 0)","downColor":"rgb(156,52,62)","borderUpColor":"rgb(59, 202, 109)","borderDownColor":"rgb(239,67,82)","wickUpColor":"rgb(59, 202, 109)","wickDownColor":"rgb(239,67,82)","borderVisible":true,"lastValueVisible":true,"priceLineColor":"rgba(255, 255, 255, .5)","priceLineVisible":true}}},{"name":"indicator:price:blue","type":"indicator","version":"3.0.8","data":{"options":{"upColor":"rgba(33, 150, 243, 0)","borderUpColor":"rgb(255, 255, 255)","wickUpColor":"rgba(255, 255, 255, .45)","downColor":"rgba(66, 165, 245, .47)","borderDownColor":"rgb(255, 255, 255, .33)","wickDownColor":"rgb(100, 181, 246, .53)","borderVisible":true,"lastValueVisible":true,"priceLineColor":"rgba(255, 255, 255, .5)","priceLineVisible":true}}},{"name":"indicator:price:light","type":"indicator","version":"3.0.8","data":{"options":{"upColor":"rgb(165,214,167)","downColor":"rgb(239,154,154)","borderUpColor":"rgb(102,187,106)","borderDownColor":"rgb(229,115,115)","wickUpColor":"rgb(102,187,106)","wickDownColor":"rgb(239,154,154)","priceLineColor":"rgba(0,0,0,0.5)"}}},{"name":"threshold:100k+","type":"threshold","data":{"0":{"amount":100000},"1":{"amount":250000},"2":{"amount":1000000},"3":{"amount":10000000}}},{"name":"threshold:250k+","type":"threshold","data":{"0":{"amount":250000},"1":{"amount":500000},"2":{"amount":2000000},"3":{"amount":10000000}}},{"name":"threshold:default colors","type":"threshold","version":"3.0.8","data":{"liquidations":[{"buyColor":"rgba(236,64,122,0.5)","sellColor":"rgba(255,152,0,0.5)"},{"buyColor":"rgba(236,64,122,0.6)","sellColor":"rgba(255,152,0,0.7)"},{"buyColor":"rgba(236,64,122,0.7)","sellColor":"rgba(255,152,0,0.8)"},{"buyColor":"rgb(156,39,176)","sellColor":"rgb(255,235,59)"}],"thresholds":[{"buyColor":"rgba(119, 148, 92, 0.25)","sellColor":"rgba(239, 67, 82, 0.25)"},{"buyColor":"rgb(100, 157, 102)","sellColor":"rgb(239, 67, 82)"},{"buyColor":"rgb(59, 202, 109)","sellColor":"rgb(235, 30, 47)"},{"buyColor":"rgb(0, 255, 127)","sellColor":"rgb(217, 31, 28)"}]}},{"name":"threshold:legacy colors","type":"threshold","version":"3.0.8","data":{"thresholds":[{"buyColor":"rgba(76,175,80,0.33)","sellColor":"rgba(229,115,115,.33)"},{"buyColor":"rgb(91,130,48)","sellColor":"rgb(224,91,82)"},{"buyColor":"rgb(156,204,101)","sellColor":"rgb(244,67,54)"},{"buyColor":"rgb(255,160,0)","sellColor":"rgb(233,30,99)"}]}},{"name":"threshold:saturated colors","type":"threshold","version":"3.0.8","data":{"thresholds":[{"buyColor":"rgba(119,148,92,0.5)","sellColor":"rgba(217,31,28,0.5)"},{"buyColor":"rgb(100, 157, 102)","sellColor":"rgb(157,20,20)"},{"buyColor":"rgb(59, 202, 109)","sellColor":"rgb(180,23,23)"},{"buyColor":"rgb(0, 255, 127)","sellColor":"rgb(217, 31, 28)"}],"liquidations":[{"buyColor":"rgba(255,76,243,0.25)","sellColor":"rgba(255,152,0,0.5)"},{"buyColor":"rgb(57,32,120)","sellColor":"rgba(255,152,0,0.7)"},{"buyColor":"rgb(78,44,169)","sellColor":"rgba(255,152,0,0.8)"},{"buyColor":"rgb(117,66,244)","sellColor":"rgb(255,235,59)"}]}}]')},"7e2d":function(t,e,n){"use strict";n("6904")},8219:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAS5JREFUeNrsljEOgjAUQIuEGJ1c3D0C3kDdTTyCB3F09wgewl2OIEdwN5o6SFQM+Jt8TAeV/t8fF2zyQ4D+/15bKCjV9BZwExebSQyHBE/Hy+k2/ZmABe/hJc2VCATgykciEIKzJQIC3EB3EIOarnuIIUhol7otAjxxgCvsk2CO/wxY8Jj4uKS4HJot4AF3lqhbgpUHXGHumvUMwOhN4lxgs5thLfIMSMBftUBiRBVIBQW0cL1/a8j/QB8iEuLkEAfqWxAJDjTi7AOZoMDl043wS9IV7/vOhBnImSMgIZHhJqS4ApVE27Gv3e4Qp7pOrkWpEjnCSymBkiBh4EeIwqUwZVpdJEhwxVhXI3GD6L7ZxAoqnCNgS3QsiQr+oBYLma9XYUmUCM//XzZOewowABKyYnH/TytxAAAAAElFTkSuQmCC"},8530:function(t,e,n){"use strict";n("5e2e")},"871b":function(t,e,n){},"8b12":function(t,e,n){"use strict";n("09b7")},a97b:function(t,e,n){},b096:function(t,e,n){"use strict";n("ff70")},bb78:function(t,e,n){"use strict";n("6fa3")},cb7c:function(t){t.exports=JSON.parse('{"_id":"panes","locked":false,"panes":{"chart":{"id":"chart","name":"","type":"chart","markets":["BINANCE_FUTURES:btcusd_perp","BITFINEX:BTCUSD","BITMEX:XBTUSD","BYBIT:BTCUSD","COINBASE:BTC-USD","DERIBIT:BTC-PERPETUAL","FTX:BTC-PERP","FTX:BTC/USD","BINANCE:btcusdt","BINANCE_FUTURES:btcusdt","BITFINEX:BTCUST","BITFINEX:BTCF0:USTF0","BITMEX:XBTUSDT","BYBIT:BTCUSDT","COINBASE:BTC-USDT","FTX:BTC/USDT"]},"trades":{"id":"trades","name":"","type":"trades","markets":["BINANCE_FUTURES:btcusd_perp","BITFINEX:BTCUSD","BITMEX:XBTUSD","BYBIT:BTCUSD","COINBASE:BTC-USD","DERIBIT:BTC-PERPETUAL","FTX:BTC-PERP","FTX:BTC/USD","BINANCE:btcusdt","BINANCE_FUTURES:btcusdt","BITFINEX:BTCUST","BITFINEX:BTCF0:USTF0","BITMEX:XBTUSDT","BYBIT:BTCUSDT","COINBASE:BTC-USDT","FTX:BTC/USDT"],"settings":{"tradeType":"trades","thresholds":[{"amount":100000}],"liquidations":{"amount":50000}}},"liquidations":{"id":"liquidations","name":"REKTS","type":"trades","markets":["BITFINEX:BTCUSD","BITMEX:XBTUSD","BITMEX:XBTUSDT","BITFINEX:BTCF0:USTF0","BINANCE_FUTURES:btcusdt","BINANCE_FUTURES:btcusd_perp","DERIBIT:BTC-PERPETUAL","FTX:BTC-PERP","FTX:BTC/USD","FTX:BTC/USDT","BYBIT:BTCUSD","BYBIT:BTCUSDT"],"settings":{"tradeType":"liquidations"}}},"marketsListeners":{}}')},cce1:function(t,e,n){"use strict";n("018d")},cd49:function(t,e,n){"use strict";n.r(e);var r=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isBooted?n("div",{class:{"-loading":t.isLoading,"-no-animations":t.disableAnimations,"-auto-hide-headers":t.autoHideHeaders,"-light":"light"===t.theme},attrs:{id:"app","data-prefered-sizing-currency":t.preferedSizingCurrency,"data-base":t.baseCurrency,"data-base-symbol":t.baseCurrencySymbol,"data-quote":t.quoteCurrency,"data-quote-symbol":t.quoteCurrencySymbol}},[n("Notices"),n("div",{staticClass:"app__wrapper"},[n("Menu"),n("div",{staticClass:"app__layout"},[n("Panes")],1)],1)],1):n("div",{attrs:{id:"app"}},[n("div",{staticClass:"app-loader d-flex -column"},[t.showStuck?n("div",{staticClass:"px8 py8"},[t._v("💡 Stuck here ? "),n("button",{staticClass:"btn -text",on:{click:t.resetAndReload}},[t._v("reset everything")])]):t._e(),t._m(0)])])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lds-spinner -center"},[n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div")])}],a=n("9ab4"),s=n("60a3"),c=n("2f62"),l=n("da81"),u=n.n(l),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{staticClass:"-picker",attrs:{mask:!1,"header-background":t.currentColor},on:{clickOutside:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",[n("div",{staticClass:"title"},[t._v(t._s(t.title))])])]},proxy:!0}])},[n("Picker",{attrs:{mode:t.picker,alpha:t.alpha},model:{value:t.currentColor,callback:function(e){t.currentColor=e},expression:"currentColor"}}),n("div",{staticClass:"verte__controller"},[t.enableAlpha?n("Slider",{staticClass:"-alpha",attrs:{gradient:["rgba("+t.rgb.red+", "+t.rgb.green+", "+t.rgb.blue+", 0)","rgba("+t.rgb.red+", "+t.rgb.green+", "+t.rgb.blue+", 1)"],min:0,max:1,step:.01,editable:!1,value:t.alpha,showCompletion:!1},model:{value:t.alpha,callback:function(e){t.alpha=e},expression:"alpha"}}):t._e(),t.rgbSliders?[n("Slider",{attrs:{gradient:["rgb(0,"+t.rgb.green+","+t.rgb.blue+")","rgb(255,"+t.rgb.green+","+t.rgb.blue+")"]},model:{value:t.rgb.red,callback:function(e){t.$set(t.rgb,"red",e)},expression:"rgb.red"}}),n("Slider",{attrs:{gradient:["rgb("+t.rgb.red+",0,"+t.rgb.blue+")","rgb("+t.rgb.red+",255,"+t.rgb.blue+")"]},model:{value:t.rgb.green,callback:function(e){t.$set(t.rgb,"green",e)},expression:"rgb.green"}}),n("Slider",{attrs:{gradient:["rgb("+t.rgb.red+","+t.rgb.green+",0)","rgb("+t.rgb.red+","+t.rgb.green+",255)"]},model:{value:t.rgb.blue,callback:function(e){t.$set(t.rgb,"blue",e)},expression:"rgb.blue"}})]:t._e(),n("div",{staticClass:"verte__inputs mt8"},[n("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn -text -accent",attrs:{type:"button",title:"Rotate"},on:{click:t.switchModel}},[n("i",{staticClass:"icon-refresh"})]),n("editable",{attrs:{content:t.typedColor},on:{output:function(e){return t.inputChanged(e)}}}),n("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn -text -accent",attrs:{type:"button",title:"Save color"},on:{click:t.submit}},[n("i",{staticClass:"icon-check"})])],1),t.showPalette?n("div",{ref:"recent",staticClass:"verte__recent"},t._l(t.colors,(function(e){return n("a",{key:e,staticClass:"verte__recent-color",style:"color: "+e,attrs:{role:"button",href:"#"},on:{click:function(n){return n.preventDefault(),t.selectColor(e)}}})})),0):t._e(),t.showHistory?n("div",{ref:"recent",staticClass:"verte__recent"},t._l(t.internalColorHistory,(function(e){return n("a",{key:e,staticClass:"verte__recent-color",style:"color: "+e,attrs:{role:"button",href:"#"},on:{click:function(n){return n.preventDefault(),t.selectColor(e)}}})})),0):t._e()],2)],1)},h=[],p=n("bea1"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"picker",staticClass:"verte-picker",class:"verte-picker--"+t.mode},[n("div",{ref:"origin",staticClass:"verte-picker__origin"},[n("canvas",{ref:"canvas",staticClass:"verte-picker__canvas",on:{mousedown:t.handleSelect,touchstart:t.handleSelect}}),n("div",{ref:"cursor",staticClass:"verte-picker__cursor",style:"transform: translate3d("+t.cursor.x+"px, "+t.cursor.y+"px, 0)"})]),"square"===t.mode?n("slider",{staticClass:"verte-picker__slider",attrs:{showCompletion:!1,gradient:["#f00","#ff0","#0f0","#0ff","#00f","#f0f","#f00"],editable:!1,max:360},model:{value:t.currentHue,callback:function(e){t.currentHue=e},expression:"currentHue"}}):t._e(),"wheel"===t.mode?n("slider",{staticClass:"verte-picker__slider",attrs:{showCompletion:!1,gradient:["hsl("+t.currentColor.hue+",0%,"+t.currentColor.lum+"%)","hsl("+t.currentColor.hue+",100%,"+t.currentColor.lum+"%)"],editable:!1,max:100},model:{value:t.currentSat,callback:function(e){t.currentSat=e},expression:"currentSat"}}):t._e()],1)},m=[],v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"wrapper",staticClass:"slider",class:{"-disabled":t.disabled}},[n("div",{ref:"track",staticClass:"slider__track"},[n("div",{ref:"fill",staticClass:"slider__fill",on:{mousedown:t.select,touchstart:t.select}}),t.showCompletion&&t.handles[0]?n("div",{staticClass:"slider__completion",style:"width: "+t.handles[0].positionX+"px"}):t._e(),t._l(t.handles,(function(e,r){return n("div",{key:r,staticClass:"slider__handle",style:"transform: translate("+e.positionX+"px, "+e.positionY+"px); background-color: "+e.color+";",on:{mousedown:t.select,touchstart:t.select}},[t.label?n("div",{staticClass:"slider__label"},[t._t("tooltip",(function(){return[t._v(" "+t._s(e.value)+" ")]}),{value:e.value})],2):t._e()])}))],2)])},y=[];function b(t){var e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var r=function(){e=null,n||t.apply(void 0,arguments)},i=n&&!e;window.cancelAnimationFrame(e),e=window.requestAnimationFrame(r),i&&t.apply(void 0,arguments)}}function g(t,e){return t.reduce((function(t,n){return Math.abs(n-e)<Math.abs(t-e)?n:t}))}function S(t,e){return{r:Math.sqrt(t*t+e*e),theta:180*Math.atan2(e,t)/Math.PI}}function _(t,e){return{x:t*Math.cos(e*Math.PI*2),y:t*Math.sin(e*Math.PI*2)}}function C(t,e){return function(t){var n=-1!==e.indexOf(t);return n}}function w(t){if(t.type.match(/^touch/i)){var e=t.touches[0];return{x:e.clientX,y:e.clientY}}return t.type.match(/^mouse/i)?{x:t.clientX,y:t.clientY}:{x:0,y:0}}function T(t){return O(t)||I(t)||E(t)||k()}function k(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(t,e){if(t){if("string"===typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(t,e):void 0}}function I(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function O(t){if(Array.isArray(t))return A(t)}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var P={name:"VerteSlider",props:{gradient:Array,colorCode:{type:Boolean,default:!1},label:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},min:{type:Number,default:0},max:{type:Number,default:255},step:{type:Number,default:1},value:{type:Number,default:0},handlesValue:{type:Array,default:function(){return[0]}},showCompletion:{type:Boolean,default:!0}},data:function(){return{fill:{translate:0,scale:0},multiple:!1,currentValue:0,handles:[],values:[]}},watch:{gradient:function(t){this.initGradient(t),this.reloadHandlesColor()},values:function(){this.multiple=this.values.length>1,this.fill=!this.multiple&&(this.fill||{})},value:function(t,e){t!==e&&t!==this.currentValue&&this.updateValue(this.value,!0)}},methods:{init:function(){var t=this;this.$emitInputEvent=b((function(){t.$emit("input",t.currentValue)})),this.multiple=this.values.length>1,this.values=this.handlesValue,this.handles=this.handlesValue.map((function(t){return{value:t,positionX:0,positionY:0,color:"#fff"}})),1===this.values.length&&(this.values[0]=Number(this.value)),this.values.sort(),this.initElements(),this.gradient&&this.initGradient(this.gradient),this.initEvents(),this.values.forEach((function(e,n){t.activeHandle=n,t.updateValue(e,!0)}))},initElements:function(){var t;(this.wrapper=this.$refs.wrapper,this.track=this.$refs.track,this.fill=this.$refs.fill,this.classes)&&(t=this.wrapper.classList).add.apply(t,T(this.classes))},initGradient:function(t){t.length>1?this.fill.style.backgroundImage="linear-gradient(90deg, ".concat(t,")"):(this.fill.style.backgroundImage="",this.fill.style.backgroundColor=t[0],this.handles.forEach((function(e){e.style.color=t[0]})))},handleResize:function(){this.updateSize(),this.updateValue(this.currentValue,!0)},initEvents:function(){window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){this.removeEventListener("resize",this.handleResize)},select:function(t){if(t.preventDefault(),2!==t.buttons){if(this._dblClickTimeout&&clearTimeout(this._dblClickTimeout),this.pendingDblClick)return this.pendingDblClick=!1,void this.$emit("reset");this.pendingDblClick=!0,this.updateSize(),this.track.classList.add("slider--dragging"),this.ticking=!1;var e=this.getStepValue(t);if(this.multiple){var n=g(this.values,e);this.activeHandle=this.values.indexOf(n)}this.updateValue(e),this.tempDrag=this.dragging.bind(this),this.tempRelease=this.release.bind(this),document.addEventListener("mousemove",this.tempDrag),document.addEventListener("touchmove",this.tempDrag),document.addEventListener("touchend",this.tempRelease),document.addEventListener("mouseup",this.tempRelease)}},dragging:function(t){var e=this,n=this.getStepValue(t);this.ticking||(window.requestAnimationFrame((function(){e.updateValue(n),e.ticking=!1})),this.ticking=!0)},release:function(){var t=this;this.track.classList.remove("slider--dragging"),document.removeEventListener("mousemove",this.tempDrag),document.removeEventListener("touchmove",this.tempDrag),document.removeEventListener("mouseup",this.tempRelease),document.removeEventListener("touchend",this.tempRelease),this.pendingDblClick&&(this._dblClickTimeout=window.setTimeout((function(){t.pendingDblClick=!1,t._dblClickTimeout=null}),150))},getStepValue:function(t){var e=w(t),n=e.x,r=n-this.currentX,i=parseInt(r/this.stepWidth+.5,10),o=i*this.step+this.min;return this.decimalsCount?Number(o.toFixed(this.decimalsCount)):o},updateSize:function(){var t=this.track.getBoundingClientRect();this.currentX=t.left,this.width=this.$el.clientWidth,this.width||(this.width=parseInt(this.track.parentElement.style.width)),!this.width&&t.width&&(this.width=t.width),this.stepWidth=this.width/(this.max-this.min)*this.step},getPositionPercentage:function(t){return((t-this.min)/(this.max-this.min)).toFixed(2)},normalizeValue:function(t){if(isNaN(Number(t)))return this.value;if(this.multiple){var e=this.values[this.activeHandle-1]||this.min,n=this.values[this.activeHandle+1]||this.max;t=Math.min(Math.max(Number(t),e),n)}return Math.min(Math.max(Number(t),this.min),this.max)},addHandle:function(t){var e=g(this.values,t),n=this.values.indexOf(e),r=this.values[n],i=r<=t?n+1:n;this.handles.splice(i,0,{value:t,positionX:0,positionY:0,color:"#fff"}),this.values.splice(i,0,t),this.activeHandle=i,this.currentValue=null,this.updateValue(t)},removeHandle:function(t){this.handles.splice(t,1),this.values.splice(t,1),this.activeHandle=0===t?t+1:t-1},getHandleColor:function(t){for(var e=this.gradient.length-1,n=t,r=1;r<=e;r++)if(n>=(r-1)/e&&n<=r/e){var i=(n-(r-1)/e)/(1/e);return Object(p["g"])(this.gradient[r-1],this.gradient[r],i)}return"rgb(0, 0, 0)"},reloadHandlesColor:function(){var t=this;this.handles.forEach((function(e,n){var r=t.getPositionPercentage(e.value),i=t.getHandleColor(r);t.handles[n].color=i.toString()}))},updateValue:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];window.requestAnimationFrame((function(){var r=e.normalizeValue(t),i=e.getPositionPercentage(r);if(e.fill&&(e.fill.translate=i*e.width,e.fill.scale=1-i),e.values[e.activeHandle]=r,e.handles[e.activeHandle].value=r,e.handles[e.activeHandle].positionX=i*e.width,e.currentValue=r,e.gradient){var o=e.getHandleColor(i);e.handles[e.activeHandle].color=o.toString(),e.colorCode&&(e.currentValue=o)}n||e.$emitInputEvent()}))}},created:function(){var t=this.step.toString().split(".")[1];this.currentValue=this.value,this.decimalsCount=t?t.length:0},mounted:function(){var t=this;this.init(),this.$nextTick((function(){t.updateSize(),t.updateValue(void 0,!0)}))},destroyed:function(){window.removeEventListener("resize",this.handleResize),this._updateSizeTimeout&&clearTimeout(this._updateSizeTimeout)}},x=P,R=(n("3252"),n("2877")),D=Object(R["a"])(x,v,y,!1,null,null,null),U=D.exports;function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var j={name:"VertePicker",components:{Slider:U},props:{edge:{type:Number,default:250},diameter:{type:Number,default:250},satSlider:{type:Boolean,default:!0},alpha:{type:Number,default:1},value:{type:String,default:"#fff"}},data:function(){return{mode:"square",currentHue:0,currentSat:0,currentColor:"",cursor:{},preventUpdating:!1,preventEcho:!1}},watch:{value:function(t){this.preventUpdating?this.preventUpdating=!1:this.handleValue(t,!0)},currentSat:function(){this.updateWheelColors(),this.updateColor()},currentHue:function(){this.updateSquareColors(),this.updateColor()}},methods:{initSquare:function(){var t=this.edge;this.$refs.canvas.width=t,this.$refs.canvas.height=t-100,this.ctx=this.$refs.canvas.getContext("2d"),this.updateSquareColors()},initWheel:function(){this.$refs.canvas.width=this.diameter,this.$refs.canvas.height=this.diameter,this.ctx=this.$refs.canvas.getContext("2d"),this.circle={path:new Path2D,xCords:this.diameter/2,yCords:this.diameter/2,radius:this.diameter/2},this.circle.path.moveTo(this.circle.xCords,this.circle.yCords),this.circle.path.arc(this.circle.xCords,this.circle.yCords,this.circle.radius,0,360),this.circle.path.closePath(),this.updateWheelColors()},handleValue:function(t){var e=this.pickerRect,n=e.width,r=e.height;if(this.currentColor=Object(p["j"])(t),this.preventEcho=!0,"wheel"===this.mode){var i=(100-this.currentColor.lum)*(this.diameter/200),o=this.diameter/2,a=_(i,this.currentColor.hue/360);this.cursor={x:a.x+o,y:a.y+o},this.currentSat=this.currentColor.sat}if("square"===this.mode){var s=this.currentColor.sat/100*n,c=(100-this.currentColor.lum)/100*r;this.cursor={x:s,y:c},this.currentHue=this.currentColor.hue}},updateCursorPosition:function(t){var e=t.x,n=t.y,r=this.pickerRect,i=r.left,o=r.top,a=r.width,s=r.height,c={x:Math.min(Math.max(e-i,0),a),y:Math.min(Math.max(n-o,0),s)};("wheel"!==this.mode||this.ctx.isPointInPath(this.circle.path,c.x,c.y))&&(this.cursor=c,this.updateColor())},updateColor:function(){this.preventEcho?this.preventEcho=!1:(this.currentColor=this.getCanvasColor(),this.preventUpdating=!0,this.$emit("change",this.currentColor),this.$emit("input",this.currentColor))},updateWheelColors:function(){if(this.circle){var t=this.pickerRect,e=t.width,n=t.height,r=this.circle.xCords,i=this.circle.yCords,o=this.circle.radius,a=this.satSlider?this.currentSat:100;this.ctx.clearRect(0,0,e,n);for(var s=0;s<360;s+=1){var c=this.ctx.createRadialGradient(r,i,0,r,i,o),l=(s-2)*Math.PI/180,u=(s+2)*Math.PI/180;this.ctx.beginPath(),this.ctx.moveTo(r,i),this.ctx.arc(r,i,o,l,u),this.ctx.closePath(),c.addColorStop(0,"hsl(".concat(s,", ").concat(a,"%, 100%)")),c.addColorStop(.5,"hsl(".concat(s,", ").concat(a,"%, 50%)")),c.addColorStop(1,"hsl(".concat(s,", ").concat(a,"%, 0%)")),this.ctx.fillStyle=c,this.ctx.fill()}}},updateSquareColors:function(){var t=this.pickerRect,e=t.width,n=t.height;this.ctx.clearRect(0,0,e,n),this.ctx.fillStyle="hsl(".concat(this.currentHue,", 100%, 50%)"),this.ctx.fillRect(0,0,e,n);var r=this.ctx.createLinearGradient(0,0,e,0);r.addColorStop(0,"hsl(0, 0%, 50%)"),r.addColorStop(1,"hsla(0, 0%, 0%, 0)"),this.ctx.fillStyle=r,this.ctx.fillRect(0,0,e,n);var i=this.ctx.createLinearGradient(0,0,0,n);i.addColorStop(0,"hsl(0, 0%, 100%)"),i.addColorStop(.5,"hsla(0, 0%, 100%, 0)"),i.addColorStop(.5,"hsla(0, 0%, 0%, 0)"),i.addColorStop(1,"hsl(0, 0%, 0%) "),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,e,n)},getCanvasColor:function(){var t=this.cursor,e=t.x,n=t.y,r=0,i=0,o=0;if("wheel"===this.mode){var a=this.diameter/2,s=e-a,c=-1*(n-a),l=S(s,c),u=l.r,d=l.theta;i=100*(a-u)/a,o=~Math.sign(d)?360-d:-d,r=this.currentSat}if("square"===this.mode){var h=this.pickerRect,f=h.width,m=h.height;r=100*e/f,i=100-100*n/m,o=this.currentHue}return Object(p["h"])(Object(p["b"])({alpha:this.alpha,hue:Math.round(o),sat:Math.round(r),lum:Math.round(i)}))},handleSelect:function(t){var e=this;t.preventDefault(),this.pickerRect=this.$refs.canvas.getBoundingClientRect(),this.updateCursorPosition(w(t));var n=function(t){window.requestAnimationFrame((function(){e.updateCursorPosition(w(t))}))},r=function t(){document.removeEventListener("mousemove",n),document.removeEventListener("touchmove",n),document.removeEventListener("mouseup",t),document.removeEventListener("touchend",t)};document.addEventListener("mousemove",n),document.addEventListener("touchmove",n),document.addEventListener("mouseup",r),document.addEventListener("touchend",r)}},mounted:function(){var t=this;this.$nextTick((function(){t.pickerRect=B(B({},t.$refs.canvas.getBoundingClientRect()),{},{width:t.$refs.canvas.clientWidth,height:t.$refs.canvas.clientHeight}),"wheel"===t.mode&&t.initWheel(),"square"===t.mode&&t.initSquare(),t.$nextTick((function(){t.handleValue(t.value)}))}))}},M=j,$=(n("e0d0"),Object(R["a"])(M,f,m,!1,null,null,null)),F=$.exports;function H(t,e){return K(t)||q(t,e)||X(t,e)||G()}function G(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function X(t,e){if(t){if("string"===typeof t)return V(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(t,e):void 0}}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function q(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function K(t){if(Array.isArray(t))return t}var z=["#F44336","#FF9800","#ffeb3b","#4caf50","#009688","#00bcd4","#2196F3","#673ab7","#9c27b0","#e91e63","#FFCDD2","#FFE0B2","#FFF9C4","#C8E6C9","#B2DFDB","#B2EBF2","#BBDEFB","#D1C4E9","#E1BEE7","#F8BBD0","#ef9a9a","#FFCC80","#FFF59D","#A5D6A7","#80cbc4","#80DEEA","#90CAF9","#B39DDB","#CE93D8","#f48fb1","#E57373","#ffb74d","#FFF176","#81c784","#4db6ac","#4dd0e1","#64B5F6","#9575cd","#ba68c8","#f06292","#EF5350","#FFA726","#ffee58","#66BB6A","#26a69a","#26c6da","#42A5F5","#7e57c2","#ab47bc","#ec407a","#D32F2F","#F57C00","#fbc02d","#388e3c","#00796b","#0097A7","#1976D2","#512da8","#7b1fa2","#C2185B","#B71C1C","#e65100","#F57F17","#1B5E20","#004D40","#006064","#0d47a1","#311B92","#4A148C","#880e4f"];function W(t,e,n){if(n>1)return e;var r=n,i=2*r-1,o=(i/1+1)/2,a=1-o,s=[Math.round(e[0]*o+t[0]*a),Math.round(e[1]*o+t[1]*a),Math.round(e[2]*o+t[2]*a)];return s}function Y(t,e){var n=1-t[3];return t[0]=Math.round(255*(t[3]*(t[0]/255)+n*(e[0]/255))),t[1]=Math.round(255*(t[3]*(t[1]/255)+n*(e[1]/255))),t[2]=Math.round(255*(t[3]*(t[2]/255)+n*(e[2]/255))),t.splice(3,1),t}function J(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,(function(t,e,n,r){return e+e+n+n+r+r}));var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function Q(t,e){"undefined"!==typeof t[3]&&e&&(t=Y(t,e));var n=Math.sqrt(t[0]*t[0]*.241+t[1]*t[1]*.691+t[2]*t[2]*.068);return n}var Z={};function tt(t){if(Z[t])return Z[t].slice();var e=document.createElement("canvas");e.width=e.height=1;var n=e.getContext("2d");n.clearRect(0,0,1,1),n.fillStyle="#000",n.fillStyle=t,n.fillRect(0,0,1,1);var r=n.getImageData(0,0,1,1).data;return Z[t]=[r[0],r[1],r[2],r[3]/255],Z[t]}function et(t,e){if("#"===t[0])return J(t);if(!/^rgb/.test(t)&&/^[a-z]+$/i.test(t))return tt(t);var n,r;try{if(n=t.match(/rgba?\((\d+)[\s,]*(\d+)[\s,]*(\d+)(?:[\s,]*([\d.]+))?\)/),!n)throw new Error;r=[+n[1],+n[2],+n[3]]}catch(i){r=[0,0,0]}return n&&"undefined"!==typeof n[4]&&(r.push(+n[4]),e&&(r=Y(r,e))),r}function nt(t){var e=H(t,4),n=e[0],r=e[1],i=e[2],o=e[3];return"rgb"+(o?"a(":"(")+n+","+r+","+i+(o?","+o+")":")")}function rt(){var t,e=getComputedStyle(document.getElementById("app")).backgroundColor;return t=-1!==e.indexOf("#")?J(e):et(e),t}function it(t,e){e=Math.max(-1,Math.min(1,e));var n=e<0,r=n?0:e*Math.pow(255,2),i=n?1+e:1-e;return"rgb("+Math.round(Math.pow(i*Math.pow(t[0],2)+r,.5))+","+Math.round(Math.pow(i*Math.pow(t[1],2)+r,.5))+","+Math.round(Math.pow(i*Math.pow(t[2],2)+r,.5))+")"}function ot(t){var e=H(t,3),n=e[0],r=e[1],i=e[2];n/=255,r/=255,i/=255;var o,a,s=Math.max(n,r,i),c=Math.min(n,r,i),l=(s+c)/2;if(s==c)o=a=0;else{var u=s-c;switch(a=l>.5?u/(2-s-c):u/(s+c),s){case n:o=(r-i)/u+(r<i?6:0);break;case r:o=(i-n)/u+2;break;case i:o=(n-r)/u+4;break}o/=6}return[o,a,l]}function at(t){var e,n,r,i=H(t,3),o=i[0],a=i[1],s=i[2];if(0==a)e=n=r=s;else{function c(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var l=s<.5?s*(1+a):s+a-s*a,u=2*s-l;e=c(u,l,o+1/3),n=c(u,l,o),r=c(u,l,o-1/3)}return[255*e,255*n,255*r]}function st(t,e){var n=ot(t),r=at([n[0],n[1],n[2]+n[2]*(e/100)]),i=H(r,3),o=i[0],a=i[1],s=i[2];return[o,a,s]}var ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dialog",class:{"-mask":t.mask},on:{click:t.clickOutside}},[n("div",{ref:"dialogContent",staticClass:"dialog-content",class:t.contentClass,style:{transform:"translate("+t.delta.x+"px, "+t.delta.y+"px)"},on:{click:function(t){t.stopPropagation()},mousedown:t.onMouseDown}},[t.header?n("header",{style:{color:t.headerColor,background:t.headerBackground},on:{mousedown:t.handleDrag,touchstart:t.handleDrag,dblclick:t.toggleFullscreen}},[t._t("header"),n("div",{staticClass:"dialog-controls"},[t._t("controls"),n("a",{staticClass:"dialog-controls__close -link -text -no-grab",attrs:{href:"javascript:void(0);"},on:{click:t.close,touchend:t.close}},[n("i",{staticClass:"icon-cross"})])],2)],2):t._e(),n("div",{staticClass:"dialog-body hide-scrollbar",class:t.bodyClass},[t._t("default")],2)])])},lt=[];function ut(t){return ut="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut(t)}function dt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pt(t,e,n){return e&&ht(t.prototype,e),n&&ht(t,n),t}function ft(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mt(t,e)}function mt(t,e){return mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},mt(t,e)}function vt(t){var e=gt();return function(){var n,r=St(t);if(e){var i=St(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return yt(this,n)}}function yt(t,e){if(e&&("object"===ut(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bt(t)}function bt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function St(t){return St=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},St(t)}var _t=function(t){ft(n,t);var e=vt(n);function n(){var t;return dt(this,n),t=e.apply(this,arguments),t.delta={x:0,y:0},t.target={x:0,y:0},t.animating=!1,t}return pt(n,[{key:"headerColor",get:function(){if(this.headerBackground){var t=Q(et(this.headerBackground));return t>150?"black":"white"}return null}},{key:"created",value:function(){this.startPosition&&(this.startPosition.x&&(this.delta.x=window.innerWidth*this.startPosition.x),this.startPosition.y&&(this.delta.y=window.innerHeight*this.startPosition.y))}},{key:"beforeDestroy",value:function(){this._handleRelease&&this._handleRelease()}},{key:"handleDrag",value:function(t){var e=this;if(2!==t.button&&!t.target.classList.contains("-no-grab")&&!t.target.parentElement.classList.contains("-no-grab")){t.preventDefault();var n=Object.assign({},this.delta),r=w(t),i=this.$refs.dialogContent.offsetTop,o=-1*i;this._handleDragging=function(t){var i=w(t),a=n.x+i.x-r.x,s=Math.max(o,n.y+i.y-r.y);e.target.x=a,e.target.y=s,e.animate()},this._handleRelease=function(){document.removeEventListener("mousemove",e._handleDragging),document.removeEventListener("mouseup",e._handleRelease),document.removeEventListener("touchmove",e._handleDragging),document.removeEventListener("touchend",e._handleRelease),delete e._handleRelease},document.addEventListener("mousemove",this._handleDragging),document.addEventListener("mouseup",this._handleRelease),document.addEventListener("touchmove",this._handleDragging),document.addEventListener("touchend",this._handleRelease)}}},{key:"onMouseDown",value:function(){var t=this;this._deinteractionTimeout&&clearTimeout(this._deinteractionTimeout),Un.isInteracting=!0;var e=function e(){document.removeEventListener("mouseup",e),t._deinteractionTimeout=setTimeout((function(){Un.isInteracting=!1,t._deinteractionTimeout=null}),100)};document.addEventListener("mouseup",e)}},{key:"animate",value:function(){this.delta.x=this.target.x,this.delta.y=this.target.y;var t=Math.abs(this.delta.x-this.target.x)+Math.abs(this.delta.y-this.target.y);if(t>10&&!this.animating)return this.animating=!0,requestAnimationFrame(this.animate);this.animating=!1}},{key:"clickOutside",value:function(){if(Un.isInteracting)return!1;this.$emit("clickOutside")}},{key:"close",value:function(){this.$emit("clickOutside")}},{key:"toggleFullscreen",value:function(){}}]),n}(s["c"]);_t=Object(a["a"])([Object(s["a"])({name:"Dialog",props:{open:{type:Boolean},mask:{type:Boolean,default:!0},header:{type:Boolean,default:!0},headerBackground:{required:!1},bodyClass:{required:!1},contentClass:{required:!1},startPosition:{required:!1}}})],_t);var Ct=_t,wt=Ct,Tt=Object(R["a"])(wt,ct,lt,!1,null,null,null),kt=Tt.exports,Et={components:{Dialog:kt},data:function(){return{preventClickOutside:!1,output:null}},created:function(){},methods:{close:function(t){if(this._isDestroyed,!this.preventClose){"undefined"!==typeof t&&null!==t&&(this.output=t),this.$destroy();try{this.$el.parentNode.removeChild(this.$el)}catch(e){}return Promise.resolve()}}}},It=n("392d"),Ot=n("7596"),At=n("cb7c");function Pt(t){return Pt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pt(t)}var xt=86400;function Rt(t){var e,n,r=Math.floor((Date.now()-t)/1e3);return n=(e=Math.floor(r/31536e3))>1?e+"yr":(e=Math.floor(r/2592e3))>=1?e+"mo":(e=Math.floor(r/86400))>=1?e+"d":(e=Math.floor(r/3600))>=1?e+"h":(e=Math.floor(r/60))>=1?e+"m":Math.ceil(r)+"s",n}function Dt(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(isNaN(t)||null===t)return null;var n=t<0?"-":"";t=Math.abs(t);var r=Math.floor(t/1e3/86400),i=Math.floor(t/1e3%86400/3600),o=Math.floor(t/1e3%3600/60),a=Math.floor(t/1e3%3600%60),s="";return s+=e&&s.length||!(r>0)?"":(s.length?", ":"")+n+r+"d",s+=e&&s.length||!(i>0)?"":(s.length?", ":"")+n+i+"h",s+=e&&s.length||!(o>0)?"":(s.length?", ":"")+n+o+"m",s+=e&&s.length||!(a>0)?"":(s.length?", ":"")+n+a+"s",(!s.length||!e&&t<6e4&&t>1e3*a)&&(s+=(s.length?", ":"")+n+(t-1e3*a)+"ms"),s.trim()}function Ut(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Dt(t,e);return n=n.replace(/\b1s\b/,"1 second"),n=n.replace(/(\d)s\b/,"$1 seconds"),n=n.replace(/\b1m\b/,"1 minute"),n=n.replace(/(\d)m\b/,"$1 minutes"),n=n.replace(/\b1h\b/,"1 hour"),n=n.replace(/(\d)h\b/,"$1 hours"),n=n.replace(/\b1d\b/,"1 day"),n=n.replace(/(\d)d\b/,"$1 days"),n}function Nt(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"abcdefghijklmnopqrstuvwxyz0123456789",n="",r=e.length,i=0;i<t;i++)n+=e.charAt(Math.floor(Math.random()*r));return n}function Bt(t,e){var n=t.substr(),r=1;while(-1!==e.indexOf(t))t=n+ ++r;return t}var Lt=function(t){var e="àáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìłḿñńǹňôöòóœøōõőṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·/_,:;",n="aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------",r=new RegExp(e.split("").join("|"),"g");return t.toString().toLowerCase().replace(/\s+/g,"-").replace(r,(function(t){return n.charAt(e.indexOf(t))})).replace(/&/g,"-and-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},jt=function(t,e){var n,r=document.createElement("a");t&&(t instanceof Blob?n=URL.createObjectURL(t):"object"===Pt(t)?n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,2)):"string"===typeof t&&(n="data:text/json;charset=utf-8,"+encodeURIComponent(t)),r.setAttribute("href",n),r.setAttribute("download",e+".txt"),document.body.appendChild(r),r.click(),r.remove())};function Mt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return new Promise((function(e){setTimeout((function(){return e()}),t)}))}function $t(t){return t.map((function(t){return t.replace(/[^a-zA-Z]+/gi,"")})).sort((function(t,e){return t.localeCompare(e)})).join("")}function Ft(t,e){for(var n=atob(t),r=new Array(n.length),i=0;i<n.length;i++)r[i]=n.charCodeAt(i);var o=new Uint8Array(r),a=new Blob([o],{type:e+";base64"}),s=URL.createObjectURL(a);window.open(s)}function Ht(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/\(/,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:/\)/;if(!n.test(t[e]))throw new Error("No "+n.toString()+" at index "+e);for(var i=1,o=e+1;o<t.length;o++)if(r.test(t[o])){if(0==--i)return o}else n.test(t[o])&&i++;return-1}function Gt(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=/\(|{|\[/g,o=0;do{if(e=i.exec(t)){o++;var a=Ht(t,e.index,/\(|{|\[/,/\)|}|\]/),s=t.slice(e.index+1,a).replace(/,/g,"#COMMA#");t=t.slice(0,e.index+1)+s+t.slice(a,t.length)}}while(e&&o<r);if(o>=r)throw new Error("Maxiumum parseFunctionArguments iteration reached");return t.split(",").map((function(t){return n&&(t=t.trim()),t.replace(/#COMMA#/g,",")}))}function Xt(t){return t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))}function Vt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===t)return"0 Bytes";var n=1024,r=e<0?0:e,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(t)/Math.log(n));return parseFloat((t/Math.pow(n,o)).toFixed(r))+" "+i[o]}function qt(t){var e=document.createElement("textarea");e.value=t,e.style.top="0",e.style.left="0",e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy")}catch(n){}}function Kt(){var t=document.createElement("input");return t.type="file",new Promise((function(e){t.onchange=function(t){t.target.files.length||e(null),e(t.target.files[0])},t.click()}))}function zt(t){return navigator.clipboard?navigator.clipboard.writeText(t):(qt(t),Promise.resolve())}function Wt(t,e){var n=t.toString().trim();return"t"===n[n.length-1]?parseInt(n)+" ticks":!isNaN(n)&&n>0?e?Ut(1e3*n):Dt(1e3*n):null}function Yt(t){if(null==t)return null;if("app"===t.id)return t;var e=window.getComputedStyle(t).overflowY,n="visible"!==e&&"hidden"!==e;return n&&t.scrollHeight>t.clientHeight?t:Yt(t.parentNode)}function Jt(t){return Array.prototype.filter.call(t.parentNode.children,(function(e){return e!==t}))}function Qt(t){return xt%t!==0&&t<xt}function Zt(t,e,n){if("undefined"===typeof n&&(n=Qt(e)),n){var r=Math.floor(t/xt)*xt;return r+Math.floor((t-r)/e)*e}return Math.floor(t/e)*e}function te(t){return t?+t.split(".").map((function(t){return t.padStart(2,"0")})).join(""):0}function ee(t){if(t instanceof Error){var e=t.message&&"Failed to fetch"!==t.message;e?ta.dispatch("app/showNotice",{title:t.message,type:"error",timeout:1e4}):/aggr\.trade$/.test(location.hostname)?ta.dispatch("app/showNotice",{title:"Aggr server seems down 💀",type:"error",timeout:1e4}):ta.dispatch("app/showNotice",{id:"fetch-error",html:!0,title:'Failed to reach api<br><a href="https://github.com/Tucsky/aggr-server">Configure aggr-server</a> <strong>to use your own data</strong>',type:"error",timeout:1e4})}}var ne=n("3f4f"),re=Date.now(),ie=(/aggr.trade$/.test(window.location.hostname),1e4),oe=24,ae=6048e5;function se(t,e){return ue(t)||le(t,e)||he(t,e)||ce()}function ce(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function le(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function ue(t){if(Array.isArray(t))return t}function de(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=he(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function he(t,e){if(t){if("string"===typeof t)return pe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(t,e):void 0}}function pe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var fe=new RegExp("^([A-Z0-9]{3,})[-/:]?(USDT|USDC|TUSD|BUSD)$|^([A-Z0-9]{2,})[-/:]?(UST|EUR|USD)$"),me=new RegExp("^([A-Z0-9]{2,})[-/]?([A-Z0-9]{3,})$"),ve=new RegExp("^(.*)_(.*)$"),ye={},be={},ge={};async function Se(t){var e=await pn.getProducts(t);return e&&Date.now()-e.timestamp<ae?e.data:null}function _e(t){return t.timestamp=Date.now(),pn.saveProducts(t)}async function Ce(t,e,n){var r;e||(e=await Se(t)),e&&(r=Array.isArray(e)?e:e.products),r||(r=[]),n&&ta.dispatch("app/showNotice",{title:"Fetched ".concat(r.length," products on ").concat(t),type:"success"}),ta.dispatch("exchanges/indexExchangeProducts",{exchangeId:t,symbols:r})}async function we(t,e){Array.isArray(e)||(e=[e]);var n,r=[],i=de(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=o.split("|"),s=se(a,2),c=s[0],l=s[1];l||(l="GET"),/^https:\/\/raw.githubusercontent.com\//.test(c)||(c="https://cors.aggr.trade/"+c);try{var u=await fetch(c,{method:l}).then((function(t){return t.json()}));r[e.indexOf(o)]=u}catch(h){r[e.indexOf(o)]=null}}}catch(p){i.e(p)}finally{i.f()}if(-1!==r.indexOf(null)?r=null:1===r.length&&(r=r[0]),r){var d=await Ca.dispatchAsync({op:"formatExchangeProducts",data:{exchangeId:t,response:r}});return d?(_e({exchange:t,data:d}),d):null}return null}async function Te(t,e,n){var r=await Se(t);return r&&!n||(Ce[t]&&delete Ce[t],r=await we(t,e)),r&&(ta.state.exchanges[t].fetched||ta.commit("exchanges/SET_FETCHED",t)),r}function ke(t){return t.replace(/(\w{3})?b?(usd|ust|eur|jpy|gbp|aud|cad|chf|cnh)[a-z]?(PERP)?$/i,"$1$2$3")}function Ee(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ye[t]||(ye[t]=Ca.dispatchAsync({op:"fetchExchangeProducts",data:{exchangeId:t,forceFetch:e}}).then((function(e){return delete ye[t],e}))),ye[t]}function Ie(t){return t.match(/([^:]*):(.*)/).slice(1,3)}function Oe(t,e,n){var r=t+":"+e,i="spot";/[UZ_-]\d{2}/.test(e)?i="future":"BINANCE_FUTURES"===t||"DYDX"===t||"BITFINEX"===t&&/F0$/.test(e)?i="perp":"HUOBI"===t&&/_(CW|CQ|NW|NQ)$/.test(e)?i="future":"HUOBI"===t&&/-/.test(e)?i="perp":"BYBIT"!==t||/-SPOT$/.test(e)?"BITMEX"===t||/(-|_)swap$|(-|_|:)perp/i.test(e)?i=/\d{2}/.test(e)?"future":"perp":("PHEMEX"===t&&"s"!==e[0]||"KRAKEN"===t&&/_/.test(e)&&"spot"===i)&&(i="perp"):i="perp";var o=e;"BYBIT"===t?o=o.replace(/-SPOT$/,""):"KRAKEN"===t?o=o.replace(/PI_/,"").replace(/FI_/,""):"FTX"===t&&"future"===i?o=o.replace(/(\w+)-\d+$/,"$1-USD"):"BITFINEX"===t?o=o.replace(/(.*)F0:(\w+)F0/,"$1-$2").replace(/UST($|F0)/,"USDT$1"):"HUOBI"===t?o=o.replace(/_CW|_CQ|_NW|_NQ/i,"USD"):"DERIBIT"===t&&(o=o.replace(/_(\w+)-PERPETUAL/i,"$1")),o=o.replace(/xbt$|^xbt/i,"BTC").replace(/-PERP(ETUAL)?/i,"-USD").replace(/[^a-z0-9](perp|swap|perpetual)$/i,"").replace(/[^a-z0-9]\d+$/i,"").toUpperCase();var a,s,c,l=o.replace(/[-_/:]/,"");return"POLONIEX"===t?(a=e.match(ve),a&&(a[0]=a[2],a[2]=a[1],a[1]=a[0],l=a[1]+a[2])):(a=o.match(fe),a||(a=l.match(me))),a||"DERIBIT"!==t&&"FTX"!==t&&"HUOBI"!==t||(a=l.match(/(\w+)[^a-z0-9]/i),a&&(a[2]=a[1])),a&&(void 0===a[1]&&void 0===a[2]?(s=a[3],c=a[4]):(s=a[1],c=a[2]),l=n?ke(s+c):s+c),"perp"===i&&(l+="PERP"),{id:r,base:s,quote:c,pair:e,local:l,exchange:t,type:i}}function Ae(t,e){var n=t<0;return t=Math.abs(t),t=t>=1e9?+(t/1e9).toFixed(isNaN(e)?1:e)+"B":t>=1e6?+(t/1e6).toFixed(isNaN(e)?1:e)+"M":t>=1e5?+(t/1e3).toFixed(isNaN(e)?0:e)+"K":t>=1e3?+(t/1e3).toFixed(isNaN(e)?1:e)+"K":+t.toFixed(2),n?"-"+t:t}function Pe(t){var e=t.toString().split(".");return 2===e.length?e[1].length:0}function xe(t,e){return"undefined"===typeof ge[e]?t:(t||(t=0),t.toFixed(ge[e]))}function Re(t,e){return e?(t||(t=0),t.toFixed(e)):parseInt(t)}function De(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ue(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?De(Object(n),!0).forEach((function(e){Ne(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ne(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Be(t,e){return Me(t)||je(t,e)||Fe(t,e)||Le()}function Le(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function je(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function Me(t){if(Array.isArray(t))return t}function $e(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Fe(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Fe(t,e){if(t){if("string"===typeof t)return He(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?He(t,e):void 0}}function He(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ge={0:function(t){var e=t.createObjectStore("workspaces",{keyPath:"id"});e.createIndex("name","name");var n=t.createObjectStore("series",{keyPath:"id"});n.createIndex("name","name"),t.createObjectStore("products",{keyPath:"exchange"}),t.createObjectStore("gifs",{keyPath:"slug"})},1:function(t){t.deleteObjectStore("series");var e=t.createObjectStore("indicators",{keyPath:"id"});e.createIndex("name","name")},2:function(t){t.createObjectStore("presets",{keyPath:"name"})},3:function(t){t.createObjectStore("sounds",{keyPath:"name"}),t.createObjectStore("colors",{autoIncrement:!0})},5:async function(t){t.createObjectStore("alerts",{keyPath:"market"})},7:async function(t,e){var n,r=e.objectStore("alerts"),i=await r.getAllKeys(),o=$e(i);try{var a=async function(){var t=n.value,e=Ie(t),i=Be(e,2),o=i[0],a=i[1],s=Oe(o,a,!0),c=s.local,l=await r.get(t),u=void 0;u=l.prices?l.prices.map((function(t){return{price:t,market:c,active:!0}})):l.alerts.map((function(t){return Ue(Ue({},t),{},{market:c})})),u=u.filter((function(t){return t.price>=0})),await r.delete(t),u.length&&await r.put({market:c,alerts:u})};for(o.s();!(n=o.n()).done;)await a()}catch(s){o.e(s)}finally{o.f()}}},Xe={1:function(t){var e=t.states.panes.layout;t.states.panes.layouts={lg:JSON.parse(JSON.stringify(e))},delete t.states.panes.layout;var n=JSON.parse(JSON.stringify(Pr.trades.state)),r=JSON.parse(JSON.stringify(At.panes.liquidations.settings)),i=function(t,e){var i,o=null,a=null;if(i="liquidations"===e?r:n,"liquidations"===t.id)o=n.liquidations.buyAudio,a=n.liquidations.sellAudio;else{var s=i.thresholds.find((function(e){return e.id===t.id}));s&&(o=s.buyAudio,a=s.sellAudio)}null!==o&&null!==a&&(t.buyAudio=o,t.sellAudio=a)};for(var o in t.states.panes.panes)if("trades"===t.states.panes.panes[o].type&&t.states[o]){i(t.states[o].liquidations,o);var a,s=$e(t.states[o].thresholds);try{for(s.s();!(a=s.n()).done;){var c=a.value;i(c,o)}}catch(l){s.e(l)}finally{s.f()}}},2:function(t){t.states.settings&&(t.states.settings.audioFilters={HighPassFilter:!!t.states.settings.audioFilter,LowPassFilter:!1,Compressor:!!t.states.settings.audioCompressor,Delay:!!t.states.settings.audioDelay,PingPongDelay:!!t.states.settings.audioPingPong,Chorus:!1},delete t.states.settings.audioFilter,delete t.states.settings.audioCompressor,delete t.states.settings.audioPingPong,delete t.states.settings.audioDelay)},3:function(t){var e={xl:1400,lg:1024,md:768,sm:480,xs:0},n={xl:32,lg:24,md:16,sm:12,xs:8},r=t.states.panes.layouts,i=Object.keys(r).reduce((function(t,n){return t[n]=e[n],t}),{}),o=Object.keys(i).sort((function(t,e){return n[e]-n[t]}));i[o[o.length-1]]=0;var a,s,c=window.innerWidth,l=$e(o);try{for(l.s();!(s=l.n()).done;)if(a=s.value,c>i[a])break}catch(b){l.e(b)}finally{l.f()}var u=t.states.panes.layouts[a];if("lg"!==a){var d,h=n[a],p=n.lg/h,f=$e(u);try{for(f.s();!(d=f.n()).done;){var m=d.value;m.x=Math.floor(m.x*p),m.y=Math.floor(m.y*p),m.w=Math.floor(m.w*p),m.h=Math.floor(m.h*p)}}catch(b){f.e(b)}finally{f.f()}}t.states.panes.layout=u,delete t.states.panes.layouts;var v=function(e){if("chart"!==t.states.panes.panes[e].type||!t.states[e])return"continue";var n={top:.1,bottom:.2};if(t.states[e].indicators){var r=Object.keys(t.states[e].indicators).find((function(n){return t.states[e].indicators[n].options&&t.states[e].indicators[n].options.scaleMargins&&"right"===t.states[e].indicators[n].options.priceScaleId}));r&&(n=t.states[e].indicators[r].options.scaleMargins)}t.states[e].priceScales={right:{mode:0,scaleMargins:n}}};for(var y in t.states.panes.panes)v(y)},4:function(t){for(var e in t.states.panes.panes)if("trades"===t.states.panes.panes[e].type&&t.states[e]){var n=t.states[e],r={id:"liquidation_threshold",amount:1e4,buyColor:"rgba(236,64,122,0.5)",sellColor:"rgba(255,152,0,0.5)",buyAudio:"var srqtR = Math.min(1, gain / 4)\nplay(329.63, srqtR, srqtR*2,0,,,'sine')\nplay(329.63, srqtR, srqtR*4,0.08,,,'sine')",sellAudio:"var srqtR = Math.min(1, gain / 6)\nplay(440, srqtR, srqtR*2,0,,,'sine')\nplay(440, srqtR, srqtR*4,0.08,,,'sine')"};t.states[e].liquidation&&t.states[e].liquidation.amount<25e3&&(r=t.states[e].liquidation,r.id="liquidation_threshold",t.states[e].liquidation.gif&&(r.buyGif=t.states[e].liquidation.gif,r.sellGif=t.states[e].liquidation.gif,delete r.gif)),n.liquidations=[r,{id:"liquidation_significant",amount:25e3,buyColor:"rgba(236,64,122,0.6)",sellColor:"rgba(255,152,0,0.7)",buyAudio:"var srqtR = Math.min(1, gain / 4)\nplay(329.63, srqtR, srqtR*4,0,,,'sine')\nplay(329.63, srqtR, srqtR*6,0.08,,,'sine')",sellAudio:"var srqtR = Math.min(1, gain / 6)\nplay(440, srqtR, srqtR*4,0,,,'sine')\nplay(440, srqtR, srqtR*6,0.08,,,'sine')"},{id:"liquidation_huge",amount:1e5,buyGif:"rekt",sellGif:"rekt",buyColor:"rgba(236,64,122,0.7)",sellColor:"rgba(255,152,0,0.8)",buyAudio:"var srqtR = Math.min(1, gain / 4)\nplay(329.63, srqtR, srqtR*4,0,,,'sine')\nplay(329.63, srqtR, srqtR*8,0.08,,,'sine')",sellAudio:"var srqtR = Math.min(1, gain / 6)\nplay(440, srqtR, srqtR*4,0,,,'sine')\nplay(440, srqtR, srqtR*8,0.08,,,'sine')"},{id:"liquidation_rare",amount:1e6,buyGif:"explosion",sellGif:"explosion",buyColor:"rgb(156,39,176)",sellColor:"rgb(255,235,59)",buyAudio:"var srqtR = Math.min(1, gain / 10)\nplay(329.63, srqtR, 1,0,,,'sine')\nplay(329.63, srqtR, srqtR*10,0.08,,,'sine')",sellAudio:"var srqtR = Math.min(1, gain / 10)\nplay(440, srqtR, 1,0,,,'sine')\nplay(440, srqtR, srqtR*10,0.08,,,'sine')"}];for(var i=0;i<n.thresholds.length;i++)n.thresholds[i].gif&&(n.thresholds[i].buyGif=n.thresholds[i].gif,n.thresholds[i].sellGif=n.thresholds[i].gif,delete n.thresholds[i].gif)}},5:function(t){for(var e in t.states.panes.panes){var n=t.states.panes.panes[e];n.zoom=.0625*Math.ceil(n.zoom/.0625)}}};function Ve(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ve(Object(n),!0).forEach((function(e){Ke(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ke(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ze(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=We(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function We(t,e){if(t){if("string"===typeof t)return Ye(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(t,e):void 0}}function Ye(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Je(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ze(t,e,n){return e&&Qe(t.prototype,e),n&&Qe(t,n),t}var tn=function(){function t(){Je(this,t),this.url="https://api.aggr.trade/alert",this.publicVapidKey="BNi_5_w2FU8LdTg5KxQvHYi0hXzyKMIYmYXin1nUyXEtXfyAAef0pe68v3hrQwDP00NPGPasGTrurB8Hmi3On7I"}return Ze(t,[{key:"supported",get:function(){return this.publicVapidKey&&this.url}},{key:"urlBase64ToUint8Array",value:function(t){for(var e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}},{key:"getAlerts",value:async function(t){return this._promiseOfSync&&await this._promiseOfSync,pn.getAlerts(t)}},{key:"syncTriggeredAlerts",value:async function(){var t=this;this._promiseOfSync=new Promise((function(e){navigator.serviceWorker.ready.then((async function(n){await t.markAlertsAsTriggered((await n.getNotifications()).map((function(t){return{price:t.data.price,market:t.data.market}}))),e()}))})).then((function(){navigator.serviceWorker.addEventListener("message",(function(e){t.markAlertsAsTriggered([e.data]),Ca.emit("alert",e.data)}))}))}},{key:"markAlertsAsTriggered",value:async function(t){var e=t.reduce((function(t,e){var n=e.price,r=e.market;return r&&"number"===typeof n?(t[r]||(t[r]=[]),t[r].push(n),t):t}),{});for(var n in e){var r=await pn.getAlerts(n);if(r.length){var i,o=ze(e[n]);try{var a=function(){var t=i.value,e=r.find((function(e){return e.price===t}));e&&(e.triggered=!0)};for(o.s();!(i=o.n()).done;)a()}catch(s){o.e(s)}finally{o.f()}await pn.saveAlerts({market:n,alerts:r})}}}},{key:"getPushSubscription",value:async function(){if(this.supported){if(this.pushSubscription)return this.pushSubscription;if("serviceWorker"in navigator){var t=await navigator.serviceWorker.getRegistration("sw.js");this.pushSubscription=JSON.parse(JSON.stringify(await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.urlBase64ToUint8Array(this.publicVapidKey)})))}return this.pushSubscription}}},{key:"subscribe",value:function(t,e){return this.toggleAlert(t,e)}},{key:"unsubscribe",value:function(t,e){return this.toggleAlert(t,e,!0)}},{key:"modify",value:function(t,e,n){return this.moveAlert(t,e,n)}},{key:"getPrice",value:function(t){return new Promise((function(e){Ca.once("prices",(function(n){var r=n[t];if(!r)return e(null);e(n[t].price)}))}))}},{key:"validateAlert",value:async function(t,e){var n=await this.getPrice(t);if(n){var r=100*(e/n-1);if(e<0||r>100||r<-50)return!1}return!0}},{key:"toggleAlert",value:async function(t,e,n){var r=await this.getPushSubscription();if(r&&await this.validateAlert(t,e)){var i=location.href.replace(/#.*/,"");return fetch(this.url,{method:"POST",body:JSON.stringify(qe(qe({},r),{},{origin:i,market:t,price:e,unsubscribe:n})),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){if(t.error)throw new Error(t.error);return!0})).catch((function(t){return ee(t),!1}))}}},{key:"moveAlert",value:async function(t,e,n){var r=await this.getPushSubscription();if(r&&await this.validateAlert(t,n)){var i=location.href;return fetch(this.url,{method:"POST",body:JSON.stringify(qe(qe({},r),{},{origin:i,market:t,price:e,newPrice:n})),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){if(t.error)throw new Error(t.error);return!0})).catch((function(t){return ee(t),!1}))}}}]),t}(),en=new tn;function nn(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=rn(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function rn(t,e){if(t){if("string"===typeof t)return on(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?on(t,e):void 0}}function on(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function an(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function sn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?an(Object(n),!0).forEach((function(e){cn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):an(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function cn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ln(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dn(t,e,n){return e&&un(t.prototype,e),n&&un(t,n),t}var hn=function(){function t(){ln(this,t),this.urlStrategy="history",this.defaultInserted=!1,/github\.io/.test(window.location.hostname)&&(this.urlStrategy="hash"),this.latestDatabaseVersion=Math.max.apply(null,Object.keys(Ge)),this.latestWorkspaceVersion=Math.max.apply(null,Object.keys(Xe)),this.previousAppVersion=te(localStorage.getItem("version")||"-1"),this.latestAppVersion=te("3.1.3")}return dn(t,[{key:"initialize",value:async function(){var t=this;this.db=await this.createDatabase(),this.defaultInserted||setTimeout((function(){t.insertDefault(t.db)}),3e3),en.syncTriggeredAlerts()}},{key:"createDatabase",value:async function(){var t,e=this;return new Promise((function(n){Object(ne["b"])("aggr",e.latestDatabaseVersion,{upgrade:function(n,r,i,o){t=new Promise((function(t){o.oncomplete=async function(){await e.insertDefault(n),t()},o.onerror=async function(e){t()}}));for(var a=r?r+1:r;a<=i;a++)"function"===typeof Ge[a]&&Ge[a](n,o)},blocked:function(){alert("Aggr is trying to upgrade.\nClose any other window with aggr open in order to allow it to upgrade.")},blocking:function(){},terminated:function(){alert("Browser abnormally terminated the connection with aggr db.")}}).then((function(e){return t?t.then((function(){return n(e)})):n(e)})).catch((function(t){alert(t.message+"\n\nEither reset the browser data on this site or contact the devs on the github :\nhttps://github.com/Tucsky/aggr/issues/new")}))}))}},{key:"upgradeWorkspace",value:function(t){"undefined"===typeof t.version&&(t.version=0);while(t.version<this.latestWorkspaceVersion)t.version++,"function"===typeof Xe[t.version]&&Xe[t.version](t)}},{key:"insertDefault",value:async function(t){this.defaultInserted=!0,await this.insertDefaultIndicators(t),await this.insertDefaultPresets(t),localStorage.setItem("version","3.1.3")}},{key:"insertDefaultIndicators",value:async function(t){var e=Date.now(),n=t.transaction("indicators","readwrite"),r=await n.store.getAllKeys();for(var i in It){var o=It[i];if(!(te(o.version)<=this.previousAppVersion||-1!==r.indexOf(i))){try{await n.store.add(sn(sn({},o),{},{id:i,createdAt:e,updatedAt:null}))}catch(a){throw a}0}}await n.done}},{key:"insertDefaultPresets",value:async function(t){var e,n=t.transaction("presets","readwrite"),r=await n.store.getAllKeys(),i=nn(Ot);try{for(i.s();!(e=i.n()).done;){var o=e.value;te(o.version)<this.previousAppVersion||-1!==r.indexOf(o.name)||(await n.store.add(o))}}catch(a){i.e(a)}finally{i.f()}await n.done}},{key:"getCurrentWorkspace",value:async function(){var t,e;return t="hash"===this.urlStrategy?location.hash.substring(1):location.pathname.substring(1),t.length&&/^[a-zA-Z0-9]{4}$/.test(t)||(t=localStorage.getItem("workspace")),t&&(e=await this.getWorkspace(t))||(e=await this.createWorkspace()),e}},{key:"setCurrentWorkspace",value:async function(t){var e;return this.workspace?(e=this.workspace.id,window.location.href=window.location.href.replace(e,t.id),void("hash"===this.urlStrategy&&window.location.reload())):(this.upgradeWorkspace(t),this.workspace=t,"hash"===this.urlStrategy?location.hash=this.workspace.id:window.history.replaceState("Object","Title","/"+this.workspace.id),localStorage.setItem("workspace",this.workspace.id),await Zo(t),t)}},{key:"addAndSetWorkspace",value:async function(t){await this.setCurrentWorkspace(await this.addWorkspace(t)),this.getWorkspaces()}},{key:"saveState",value:async function(t,e){if(!this.workspace)throw new Error("There is no current workspace");return e=this.cleanState(e),this.workspace.states[t]=e,this.saveWorkspace()}},{key:"cleanState",value:function(t){for(var e in t=JSON.parse(JSON.stringify(t)),t)"_"===e[0]&&"_id"!==e&&delete t[e];return t}},{key:"downloadWorkspace",value:function(){this.workspace.states.panes&&delete this.workspace.states.panes.marketsListeners,jt(this.workspace,this.workspace.id+"_"+Lt(this.workspace.name))}},{key:"getState",value:async function(t){if(!this.workspace)throw new Error("There is no current workspace");return this.workspace.states[t]?this.workspace.states[t]:null}},{key:"removeState",value:async function(t){if(!this.workspace)throw new Error("There is no current workspace");return delete this.workspace.states[t],this.workspace.states[t]&&delete this.workspace.states[t],this.saveWorkspace()}},{key:"addWorkspace",value:async function(t){var e=Date.now();return await this.makeUniqueWorkspace(t),await this.db.add("workspaces",sn(sn({},t),{},{createdAt:e,updatedAt:null})),this.getWorkspace(t.id)}},{key:"makeUniqueWorkspace",value:async function(t){var e=await this.getWorkspaces(),n=e.map((function(t){return t.name})),r=e.map((function(t){return t.id}));t.name||(t.name="Untitled"),t.name=Bt(t.name,n);var i=t.id;while(!i||-1!==r.indexOf(i))i=Nt(4);t.id=i}},{key:"getWorkspace",value:function(t){return this.db.get("workspaces",t)}},{key:"createWorkspace",value:async function(){var t=Date.now(),e=JSON.parse(JSON.stringify(At)),n={version:this.latestWorkspaceVersion,createdAt:t,updatedAt:null,name:null,id:null,states:{panes:e}};return await this.makeUniqueWorkspace(n),await this.db.add("workspaces",n),await this.getWorkspace(n.id)}},{key:"duplicateWorkspace",value:async function(){var t=Date.now(),e=JSON.parse(JSON.stringify(this.workspace));return e.createdAt=t,e.updatedAt=null,await this.makeUniqueWorkspace(e),await this.db.add("workspaces",e),await this.setCurrentWorkspace(await this.getWorkspace(e.id))}},{key:"getWorkspaces",value:function(){return this.db.getAllFromIndex("workspaces","name")}},{key:"renameWorkspace",value:async function(t){if(!this.workspace)throw new Error("There is no current workspace");return this.workspace.name=t,this.saveWorkspace()}},{key:"saveWorkspace",value:async function(){if(!this.workspace)throw new Error("There is no current workspace");return this.workspace.updatedAt=Date.now(),this.db.put("workspaces",JSON.parse(JSON.stringify(this.workspace)))}},{key:"removeWorkspace",value:function(t){return this.db.delete("workspaces",t)}},{key:"saveProducts",value:function(t){return this.db.put("products",t)}},{key:"getProducts",value:function(t){return this.db.get("products",t)}},{key:"deleteProducts",value:function(t){return this.db.delete("products",t)}},{key:"saveGifs",value:function(t){return this.db.put("gifs",t)}},{key:"getGifs",value:function(t){return this.db.get("gifs",t)}},{key:"getGifsKeywords",value:function(){return this.db.getAllKeys("gifs")}},{key:"deleteGifs",value:function(t){return this.db.delete("gifs",t)}},{key:"saveIndicator",value:async function(t){var e=Date.now();return t.createdAt?t.updatedAt=e:t.createdAt=e,ta.dispatch("app/showNotice",{type:"info",title:"Saved indicator ".concat(t.id)}),this.db.put("indicators",t)}},{key:"incrementIndicatorUsage",value:async function(t){var e=await this.getIndicator(t);if(e)return e.uses||(e.uses=0),e.uses++,this.saveIndicator(e)}},{key:"getIndicator",value:function(t){return this.db.get("indicators",t)}},{key:"getIndicators",value:function(){return this.db.getAllFromIndex("indicators","name")}},{key:"deleteIndicator",value:function(t){return this.db.delete("indicators",t)}},{key:"savePreset",value:async function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e){var r=t.type.split(":")[0],i=e.split(":")[0];if(i!==r)throw new Error("Preset type ".concat(r," is not ").concat(i," type"));t.type=i,t.name=e+":"+t.name.split(":").pop()}if(n&&await this.getPreset(t.name)&&!await Un.confirm({message:"This preset already exists (".concat(t.name,")."),ok:"Continue anyway",cancel:"Cancel"}))throw new Error("Save preset : aborted");return this.db.put("presets",t)}},{key:"getPreset",value:async function(t){return this.db.get("presets",t)}},{key:"getPresetsKeysByType",value:function(t){return this.db.getAllKeys("presets",IDBKeyRange.bound(t,t+"|",!0,!0))}},{key:"removePreset",value:function(t){return this.db.delete("presets",t)}},{key:"saveSound",value:function(t){return this.db.put("sounds",t)}},{key:"getSound",value:async function(t){return this.db.get("sounds",t)}},{key:"removeSound",value:function(t){return this.db.delete("sounds",t)}},{key:"saveColor",value:function(t){return this.db.put("colors",t)}},{key:"getColors",value:async function(){return this.db.getAll("colors")}},{key:"removeColor",value:function(t){return this.db.delete("colors",t)}},{key:"getAlerts",value:async function(t){var e=await this.db.get("alerts",t);return e?e.alerts:[]}},{key:"saveAlerts",value:function(t){return t.alerts.length?this.db.put("alerts",t):this.db.delete("alerts",t.market)}},{key:"reset",value:async function(){this.db&&(this.db.close(),this.db=null,this.workspace=null),await Object(ne["a"])("aggr"),localStorage.removeItem("workspace"),localStorage.removeItem("version")}},{key:"exportDatabase",value:async function(){var t=await n.e("chunk-2d0cc844").then(n.bind(null,"4dec")),e=t.Dexie,r=await n.e("chunk-85145916").then(n.bind(null,"9e91")),i=r.exportDB,o=await new e("aggr").open(),a=await i(o,{filter:function(t){return"products"!==t&&"gifs"!==t}}),s=(await this.getWorkspaces()).sort((function(t,e){return e.updatedAt-t.updatedAt})).map((function(t){return t.id}));jt(a,"aggr-"+s.join("-"))}}]),t}(),pn=new hn,fn={name:"Verte",mixins:[Et],components:{Dialog:kt,Picker:F,Slider:U},props:{picker:{type:String,default:"square",validator:C("picker",["wheel","square"])},value:{type:String,default:"#000"},title:{type:String,default:"Colorpicker"},model:{type:String,default:"rgb",validator:C("model",["rgb","hex","hsl"])},display:{type:String,default:"picker",validator:C("display",["picker","widget"])},menuPosition:{type:String,default:"bottom",validator:C("menuPosition",["top","bottom","left","right","center"])},showHistory:{type:Boolean,default:!0},showPalette:{type:Boolean,default:!0},colorHistory:{type:Array,default:null},enableAlpha:{type:Boolean,default:!0},rgbSliders:{type:Boolean,default:!1}},data:function(){return{rgb:Object(p["k"])("#000"),hex:Object(p["i"])("#000"),hsl:Object(p["j"])("#000"),delta:{x:0,y:0},type:"rgb",internalColorHistory:[]}},computed:{colors:function(){return z},currentColor:{get:function(){return this[this.model],"rgb"===this.model?Object(p["c"])(this[this.model]):"hsl"===this.model?Object(p["b"])(this[this.model]):"hex"===this.model?Object(p["a"])(this[this.model]):""},set:function(t){this.selectColor(t)}},typedColor:function(){return"rgb"===this.type?Object(p["c"])(this[this.type]):"hsl"===this.type?Object(p["b"])(this[this.type]):"hex"===this.type?Object(p["a"])(this[this.type]):this.currentColor},alpha:{get:function(){return this[this.model]?isNaN(this[this.model].alpha)?1:this[this.model].alpha:1},set:function(t){this[this.model].alpha=t,this.selectColor(this[this.model])}}},watch:{value:function(t,e){t!==e&&t!==this.currentColor&&this.selectColor(t)}},beforeDestroy:function(){document.getElementById("app").classList.remove("-picking-color")},created:function(){var t=this;this.selectColor(this.value||"#000",!0),document.getElementById("app").classList.add("-picking-color"),pn.getColors().then((function(e){t.internalColorHistory=e}))},methods:{selectColor:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t;if("string"===typeof t&&6===t.length&&(t="#"+t),Object(p["e"])(t))n="string"===typeof t?t:Object(p["b"])(t);else if(Object(p["f"])(t))n="string"===typeof t?t:Object(p["c"])(t);else{if(!Object(p["d"])(t))return;n="string"===typeof t?t:Object(p["a"])(t)}this.rgb=Object(p["k"])(n),this.hex=Object(p["i"])(n),this.hsl=Object(p["j"])(n),e||this.$emit("input",this.currentColor)},switchModel:function(){var t=["hex","rgb","hsl"],e=t.indexOf(this.type);this.type=t[e+1]||t[0]},submit:function(){this.addColorToHistory(this.currentColor),this.$emit("input",this.currentColor)},addColorToHistory:function(t){pn.saveColor(t),this.internalColorHistory.push(t),this.internalColorHistory.length>32&&pn.removeColor(this.internalColorHistory.shift())},inputChanged:function(t){this.selectColor(t),this.type=Object(p["l"])(t)}}},mn=fn,vn=Object(R["a"])(mn,d,h,!1,null,null,null),yn=vn.exports,bn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{on:{clickOutside:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{staticClass:"title"},[t._v(t._s(t.title))])]},proxy:!0}])},[t.html?n("p",{staticClass:"mx0",domProps:{innerHTML:t._s(t.message)}}):n("p",{staticClass:"mx0",domProps:{textContent:t._s(t.message)}}),n("footer",[t.cancel?n("a",{staticClass:"btn -text mr8",attrs:{href:"javascript:void(0);"},domProps:{textContent:t._s(t.cancel)},on:{click:function(e){return t.close(!1)}}}):t._e(),n("button",{directives:[{name:"autofocus",rawName:"v-autofocus"}],staticClass:"btn -green -large",on:{click:function(e){return t.close(!0)}}},[n("i",{staticClass:"icon-check mr4"}),t._v(" "+t._s(t.ok))])])])},gn=[],Sn={props:{title:{type:String,default:"Confirmation"},message:{type:String,required:!0},ok:{type:String,default:"OK"},cancel:{type:String,default:"Cancel"},html:{type:Boolean,default:!1}},mixins:[Et]},_n=Sn,Cn=Object(R["a"])(_n,bn,gn,!1,null,null,null),wn=Cn.exports,Tn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{on:{clickOutside:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{staticClass:"title"},[t._v(t._s(t.action))])]},proxy:!0}])},[t.question?n("p",{staticClass:"mx0"},[t._v(t._s(t.question))]):t._e(),n("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"},{name:"autofocus",rawName:"v-autofocus"}],staticClass:"form-control w-100",attrs:{type:"text"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}})]),n("footer",[n("a",{staticClass:"btn -text",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.close(!1)}}},[t._v("Cancel")]),n("button",{staticClass:"btn -green ml8 -large",attrs:{type:"submit"}},[n("i",{staticClass:"icon-check mr8"}),t._v(" Submit")])])])])},kn=[],En={props:{question:{type:String},action:{type:String,required:!0},input:{type:String,default:""}},mixins:[Et],data:function(){return{value:""}},created:function(){this.input&&this.input.length&&(this.value=this.input)},methods:{submit:function(){this.close(this.value)}}},In=En,On=Object(R["a"])(In,Tn,kn,!1,null,null,null),An=On.exports;function Pn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rn(t,e,n){return e&&xn(t.prototype,e),n&&xn(t,n),t}var Dn=function(){function t(){Pn(this,t),this.mountedComponents={},this.isInteracting=!1,this.hasDialogOpened=!1}return Rn(t,[{key:"createComponent",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3?arguments[3]:void 0,a=r["default"].extend(Object.assign({store:ta},t)),s=new a(Object.assign({},{dialogId:o,propsData:Object.assign({},n),destroyed:function(){o&&e.mountedComponents[o]&&(delete e.mountedComponents[o],e.hasDialogOpened=Object.keys(e.mountedComponents).length>0),e.pickerInstance===s&&delete e.pickerInstance,"function"===typeof i&&i(s.output)}}));return s.dialogId=o,s}},{key:"openAsPromise",value:async function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return new Promise((function(i){t=e.createComponent(t,n,i,r),e.mountDialog(t)}))}},{key:"open",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return t=this.createComponent(t,e,r,n),this.mountDialog(t),t}},{key:"mountDialog",value:function(t){var e=document.getElementById("app")||document.body,n=t.$mount();e.appendChild(n.$el);var r=t.dialogId;r&&(this.mountedComponents[r]&&this.mountedComponents[r].close(),this.mountedComponents[r]=t,this.hasDialogOpened=Object.keys(this.mountedComponents).length>0)}},{key:"isDialogOpened",value:function(t){return!!this.mountedComponents[t]}},{key:"openPicker",value:function(t,e,n,r){return this.pickerInstance?(this.pickerInstance.selectColor(t,!0),"undefined"!==typeof n&&(this.pickerInstance.title=n),this.pickerInstance.$off("input")):this.pickerInstance=this.open(yn,{value:t,title:n},null,r),"function"===typeof e&&this.pickerInstance.$on("input",e),this.pickerInstance}},{key:"confirm",value:async function(t){if(t&&("string"===typeof t&&(t={message:t}),t.message))return this.openAsPromise(wn,t)}},{key:"prompt",value:async function(t){if(t&&("string"===typeof t&&(t={action:t}),t.action))return this.openAsPromise(An,t)}}]),t}(),Un=new Dn;function Nn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nn(Object(n),!0).forEach((function(e){Ln(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ln(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jn(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Mn(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Mn(t,e){if(t){if("string"===typeof t)return $n(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$n(t,e):void 0}}function $n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Fn={},Hn={indicatorsErrors:{},indicators:{},priceScales:{right:{scaleMargins:{top:.04,bottom:.26}}},layouting:!1,timeframe:10,refreshRate:1e3,showLegend:!0,fillGapsWithEmpty:!0,forceNormalizePrice:!1,showHorizontalGridlines:!1,horizontalGridlinesColor:"rgba(255,255,255,.1)",showVerticalGridlines:!1,verticalGridlinesColor:"rgba(255,255,255,.1)",showWatermark:!0,watermarkColor:"rgba(255,255,255,.1)",hiddenMarkets:{},barSpacing:null},Gn={boot:async function(t){var e=t.state;if(e.indicatorsErrors={},e.layouting=!1,!Object.keys(e.indicators).length){var n,i=await pn.getIndicators(),o=jn(i);try{for(o.s();!(n=o.n()).done;){var a=n.value;!0===a.enabled&&(a.series||(a.series=[]),r["default"].set(e.indicators,a.id,a))}}catch(s){o.e(s)}finally{o.f()}Lr(e)}},addIndicator:function(t,e){var n=t.state,r=t.commit,i=Object.keys(n.indicators);return e.id=Bt(e.id,i),e=Bn(Bn({script:"plotline(avg_close(bar))"},e),{},{options:Bn({priceScaleId:e.priceScaleId||e.id},e.options)}),r("ADD_INDICATOR",e),r("UPDATE_INDICATOR_DISPLAY_NAME",e.id),e.id},toggleSerieVisibility:function(t,e){var n=t.commit,r=t.state;n("SET_INDICATOR_OPTION",{id:e,key:"visible",value:!(!r.indicators[e].options||"undefined"===typeof r.indicators[e].options.visible)&&!r.indicators[e].options.visible})},setIndicatorOption:function(t,e){var n=t.commit,r=t.state,i=e.id,o=e.key,a=e.value,s=e.silent;try{a=JSON.parse(a)}catch(c){}r.indicators[i]&&r.indicators[i].options[o]===a||(n("SET_INDICATOR_OPTION",{id:i,key:o,value:a,silent:s}),r.indicators[i].unsavedChanges||n("FLAG_INDICATOR_AS_UNSAVED",i),-1!==r.indicators[i].name.indexOf(o)&&n("UPDATE_INDICATOR_DISPLAY_NAME",i))},removeIndicator:async function(t,e){var n=t.state,r=t.commit,i=t.dispatch,o=e.id,a=e.confirm,s=void 0===a||a;Un.mountedComponents.indicator&&Un.mountedComponents.indicator.indicatorId===o&&await Un.mountedComponents.indicator.close(),n.indicators[o].unsavedChanges&&s&&await Un.confirm({title:"Save changes ?",message:"This indicator has unsaved changes.\nClick save to update ".concat(o," across workspace"),cancel:"DISCARD",ok:"SAVE"})&&await i("saveIndicator",o),r("REMOVE_INDICATOR",o),await Mt(100)},saveIndicator:async function(t,e){var n=t.state,r=t.commit,i=t.dispatch;r("FLAG_INDICATOR_AS_SAVED",e),pn.saveIndicator(n.indicators[e]),await i("transferIndicator",n.indicators[e])},renameIndicator:async function(t,e){var n=t.commit,r=t.state,i=t.dispatch,o=e.id,a=e.name,s=Bt(Lt(a),Object.keys(r.indicators)),c=JSON.parse(JSON.stringify(r.indicators[o])),l=Bn(Bn({},c),{},{name:a,id:s});return n("ADD_INDICATOR",l),i("removeIndicator",{id:o,confirm:!1}),/{.*}/.test(r.indicators[s].name)&&n("UPDATE_INDICATOR_DISPLAY_NAME",s),s},transferIndicator:function(t,e){var n=t.state,r=t.rootState;for(var i in r.panes.panes)if(i!==n._id&&"chart"===r.panes.panes[i].type){var o=r[i].indicators[e.id];o.unsavedChanges||(o.options=e.options,this.commit(i+"/SET_INDICATOR_SCRIPT",{id:e.id}))}},setIndicatorNavigationState:async function(t,e){var n=t.state,r=e.id,i=e.navigationState;n.indicators[r].navigationState=i,Br(n)},undoIndicator:async function(t,e){var n=t.state,r=t.commit,i=await pn.getIndicator(e);i?(n.indicators[e]=i,r("SET_INDICATOR_SCRIPT",{id:e})):this.dispatch("app/showNotice",{title:"Indicator ".concat(e," doesn't exist in your library, nothing to rollback to."),type:"error"})},toggleMarkets:function(t,e){var n,i=t.state,o=t.rootState,a=t.commit,s=e.type,c=e.id,l=e.inverse,u="undefined"!==typeof o.panes.panes[i._id].markets.find((function(t){return!0===i.hiddenMarkets[t]})),d=jn(o.panes.panes[i._id].markets);try{for(d.s();!(n=d.n()).done;){var h=n.value,p=!0===i.hiddenMarkets[h];if(s)if("all"===s)u!==!p&&r["default"].set(i.hiddenMarkets,h,!u);else{var f=o.panes.marketsListeners[h],m=s!==f.type;m!==p&&r["default"].set(i.hiddenMarkets,h,m)}else if(l)p||h===c?p&&h===c&&r["default"].set(i.hiddenMarkets,h,!1):r["default"].set(i.hiddenMarkets,h,!0);else{if(h!==c)continue;r["default"].set(i.hiddenMarkets,h,!p)}}}catch(v){d.e(v)}finally{d.f()}a("TOGGLE_MARKET")}},Xn={SET_REFRESH_RATE:function(t,e){t.refreshRate=+e||0},TOGGLE_LEGEND:function(t){t.showLegend=!t.showLegend},SET_GRIDLINES:function(t,e){var n=e.type,r=e.value;"vertical"===n?"boolean"===typeof r?t.showVerticalGridlines=r:t.verticalGridlinesColor=r:"boolean"===typeof r?t.showHorizontalGridlines=r:t.horizontalGridlinesColor=r},SET_WATERMARK:function(t,e){var n=e.value;"boolean"===typeof n?t.showWatermark=n:t.watermarkColor=n},SET_INDICATOR_SERIES:function(t,e){var n=e.id,r=e.series;t.indicators[n].series=r},SET_INDICATOR_ERROR:function(t,e){var n=e.id,i=e.error;i?r["default"].set(t.indicatorsErrors,n,i):r["default"].set(t.indicatorsErrors,n,null)},SET_TIMEFRAME:function(t,e){t.timeframe=e},ADD_INDICATOR:function(t,e){r["default"].set(t.indicators,e.id,e)},UPDATE_DESCRIPTION:function(t,e){var n=e.id,i=e.description;r["default"].set(t.indicators[n],"description",i)},REMOVE_INDICATOR:function(t,e){r["default"].delete(t.indicators,e)},SET_INDICATOR_OPTION:function(t,e){var n=e.id,i=e.key,o=e.value;t.indicators[n]||(t.indicators[n]={}),t.indicators[n].options||(t.indicators[n].options={}),r["default"].set(t.indicators[n].options,i,o)},REMOVE_INDICATOR_OPTION:function(t,e){var n=e.id,i=e.key;t.indicators[n]&&r["default"].delete(t.indicators[n].options,i)},SET_INDICATOR_SCRIPT:function(t,e){"undefined"!==typeof e.value&&(t.indicators[e.id].script!==e.value&&this.commit(t._id+"/FLAG_INDICATOR_AS_UNSAVED",e.id),r["default"].set(t.indicators[e.id],"script",e.value))},FLAG_INDICATOR_AS_UNSAVED:function(t,e){r["default"].set(t.indicators[e],"unsavedChanges",!0)},FLAG_INDICATOR_AS_SAVED:function(t,e){r["default"].set(t.indicators[e],"unsavedChanges",!1)},TOGGLE_LAYOUTING:function(t,e){"string"!==typeof e||t.layouting?t.layouting=!t.layouting:t.layouting=e},TOGGLE_FILL_GAPS_WITH_EMPTY:function(t){t.fillGapsWithEmpty=!t.fillGapsWithEmpty},TOGGLE_FORCE_NORMALIZE_PRICE:function(t){t.forceNormalizePrice=!t.forceNormalizePrice},UPDATE_INDICATOR_DISPLAY_NAME:function(t,e){var n=t.indicators[e].name.replace(/\{([\w\d_]+)\}/g,(function(n,r){return t.indicators[e].options[r]||""}));r["default"].set(t.indicators[e],"displayName",n)},TOGGLE_MARKET:function(t,e){e&&r["default"].set(t.hiddenMarkets,e,!t.hiddenMarkets[e])},SET_PRICE_SCALE:function(t,e){var n=e.id,r=e.priceScale;r?t.priceScales[n]=r:delete t.priceScales[n]},SET_BAR_SPACING:function(t,e){t.barSpacing=e}},Vn={namespaced:!0,state:Hn,getters:Fn,actions:Gn,mutations:Xn},qn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{on:{clickOutside:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",[n("div",{staticClass:"title"},[t._v("BUCKET")]),n("div",{staticClass:"subtitle"},[t._v(t._s(t.name))])]),n("dropdown",{staticClass:"form-control -left -center w-auto",attrs:{selected:t.type,label:"Type",options:t.availableTypes,placeholder:"type"},on:{output:function(e){return t.$store.dispatch(t.paneId+"/updateBucket",{id:t.bucketId,prop:"type",value:e})}}})]},proxy:!0}])},[n("div",{staticClass:"column mb8"},[n("div",{staticClass:"form-group -fill"},[n("label",[t._v("Name")]),n("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.name},on:{input:function(e){return t.$store.dispatch(t.paneId+"/renameBucket",{id:t.bucketId,name:e.target.value})}}})]),t.conditionnalColor?t._e():n("div",{ref:"colorContainer",staticClass:"form-group -end mtauto -tight"},[n("verte",{attrs:{picker:"square",menuPosition:"left",model:"rgb",value:t.color},on:{input:function(e){return t.$store.dispatch(t.paneId+"/updateBucket",{id:t.bucketId,prop:"color",value:e})}}})],1),"histogram"===t.type?n("div",{staticClass:"form-group -tight -end mtauto"},[n("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"checkbox-control checkbox-control-input -auto flex-right",attrs:{title:"Enable onditionnal color"}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.conditionnalColor},on:{change:function(e){return t.$store.commit(t.paneId+"/TOGGLE_BUCKET_COLOR_CONDITION",t.bucketId)}}}),n("div",{attrs:{on:"dynamic",off:"fixed"}})])]):t._e()]),t.conditionnalColor?n("div",{staticClass:"form-group mb8"},[n("label",{attrs:{for:""}},[t._v("Color condition "),n("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:"ex: value > 0 ? 'red' : 'white'"}})]),n("textarea",{staticClass:"form-control",attrs:{rows:"2",spellcheck:"false"},domProps:{value:t.color},on:{change:function(e){return t.$store.dispatch(t.paneId+"/updateBucket",{id:t.bucketId,prop:"color",value:e.target.value})}}})]):t._e(),n("div",{staticClass:"column"},[n("div",{staticClass:"form-group mb8"},[n("label",[t._v(" Window (m) "),n("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:"Sum over given interval (ex: 30s or 10m or 1h)"}})]),n("input",{staticClass:"form-control",attrs:{type:"text",placeholder:t.getHms(t.$store.state[t.paneId].window)+" (default)"},domProps:{value:t.window},on:{change:function(e){return t.$store.dispatch(t.paneId+"/updateBucket",{id:t.bucketId,prop:"window",value:e.target.value})}}})]),n("div",{staticClass:"form-group mb8"},[n("label",[t._v(" Precision "),n("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:"Decimal precision"}})]),n("editable",{staticClass:"form-control",attrs:{placeholder:"auto",content:t.precision},on:{output:function(e){return t.$store.dispatch(t.paneId+"/updateBucket",{id:t.bucketId,prop:"precision",value:e})}}})],1)]),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:""}},[t._v("Value "),n("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:"/!\\Javascript syntax/!\\<br>use build in variable such as vbuy/vsell (volume) cbuy/csell (trade count) lbuy/lsell (liquidation volume)"}})]),n("textarea",{staticClass:"form-control",attrs:{rows:"5",spellcheck:"false"},domProps:{value:t.input},on:{change:function(e){return t.$store.dispatch(t.paneId+"/updateBucket",{id:t.bucketId,prop:"input",value:e.target.value})}}}),n("p",{staticClass:"help-text mt-8"},[t._v(" Sum "),n("code",[t._v(t._s(t.input))]),t._v(" over "+t._s(t.window)+" window ")])]),n("hr"),n("div",{staticClass:"column"},[n("div",{staticClass:"form-group"},[n("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"checkbox-control",attrs:{title:t.enabled?"Disable":"Enable"},on:{change:function(e){return t.disable(t.bucketId,e)}}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.enabled}}),n("div"),n("span",[t._v(" "+t._s(t.enabled?"Active":"Disabled")+" ")])])]),n("button",{staticClass:"btn -red",on:{click:t.remove}},[n("i",{staticClass:"icon-trash"})])])])},Kn=[],zn={props:["paneId","bucketId"],mixins:[Et],components:{Dialog:kt},computed:{color:function(){return ta.state[this.paneId].buckets[this.bucketId].color},conditionnalColor:function(){return"undefined"===typeof ta.state[this.paneId].buckets[this.bucketId].conditionnalColor&&this.$set(ta.state[this.paneId].buckets[this.bucketId],"conditionnalColor",!1),ta.state[this.paneId].buckets[this.bucketId].conditionnalColor},enabled:function(){return ta.state[this.paneId].buckets[this.bucketId].enabled},name:function(){return ta.state[this.paneId].buckets[this.bucketId].name},type:function(){return ta.state[this.paneId].buckets[this.bucketId].type},input:function(){return ta.state[this.paneId].buckets[this.bucketId].input},precision:function(){return ta.state[this.paneId].buckets[this.bucketId].precision||null},window:function(){var t=ta.state[this.paneId].buckets[this.bucketId].window;return t?Dt(t):null}},data:function(){return{availableTypes:{line:"Line",area:"Area",histogram:"Histogram"}}},methods:{getHms:function(t){return Dt(t)},disable:function(t,e){this.$store.dispatch(this.paneId+"/updateBucket",{id:t,prop:"enabled",value:e.target.checked}),this.close()},remove:async function(){await this.close(),this.$store.commit(this.paneId+"/REMOVE_BUCKET",this.bucketId)}}},Wn=zn,Yn=Object(R["a"])(Wn,qn,Kn,!1,null,null,null),Jn=Yn.exports,Qn={},Zn={granularity:5e3,window:6e4,enableChart:!1,buckets:{trades:{id:"trades",name:"TRADES",input:"cbuy + csell",enabled:!0,color:"rgba(255, 255, 255, .25)",precision:2,type:"line"},vold:{id:"vold",name:"VOLUME Δ",input:"vbuy - vsell",enabled:!0,color:"#40d745",type:"area"},tradesd:{id:"tradesd",name:"TRADES Δ",input:"cbuy - csell",enabled:!0,color:"#2196f3",precision:2,type:"line"},"1hliq":{id:"1hliq",name:"1H LIQUIDATIONS Δ",window:36e5,input:"lbuy-lsell",enabled:!1,color:"value>0?'#43a047':'#f44336'",conditionnalColor:!0,type:"histogram"}}},tr={createBucket:function(t){var e=t.state,n=t.commit,r=Object.keys(e.buckets),i=r.map((function(t){return e.buckets[t].name})),o=Bt("Untitled Bucket",i),a=Bt(Lt(o),r);n("CREATE_BUCKET",{id:a,name:o}),Un.open(Jn,{paneId:e._id,bucketId:a})},updateBucket:function(t,e){var n=t.commit,r=t.state,i=e.id,o=e.prop,a=e.value;if(r.buckets[i][o]!==a){var s="";s+="boolean"===typeof a?"TOGGLE_BUCKET":"SET_BUCKET_"+o.toUpperCase(),n(s,{id:i,value:a})}},renameBucket:function(t,e){var n=t.commit,r=t.state,i=e.id,o=e.name,a=Object.keys(r.buckets).filter((function(t){return t!==i})).map((function(t){return r.buckets[t].name}));o=Bt(o,a),n("RENAME_BUCKET",{id:i,name:o})}},er={TOGGLE_BUCKET:function(t,e){var n=e.id,i=e.value,o=t.buckets[n];o.enabled=!!i,r["default"].set(t.buckets,n,o)},SET_BUCKET_INPUT:function(t,e){var n=e.id,i=e.value,o=t.buckets[n];o.input=i,r["default"].set(t.buckets,n,o)},RENAME_BUCKET:function(t,e){var n=e.id,i=e.name,o=t.buckets[n];o.name=i,r["default"].set(t.buckets,n,o)},SET_BUCKET_COLOR:function(t,e){var n=e.id,i=e.value,o=t.buckets[n];o.color=i,r["default"].set(t.buckets,n,o)},SET_BUCKET_TYPE:function(t,e){var n=e.id,i=e.value,o=t.buckets[n];o.type=i,o.conditionnalColor&&"histogram"!==i&&this.commit(t._id+"/TOGGLE_BUCKET_COLOR_CONDITION",n),r["default"].set(t.buckets,n,o)},TOGGLE_BUCKET_COLOR_CONDITION:function(t,e){var n=t.buckets[e];n.conditionnalColor=!n.conditionnalColor,n.conditionnalColor||this.commit(t._id+"/SET_BUCKET_COLOR",{id:e,value:this.state.settings.textColor}),r["default"].set(t.buckets,e,n)},SET_BUCKET_PRECISION:function(t,e){var n=e.id,i=e.value,o=t.buckets[n];i=parseInt(i),o.precision=isNaN(i)?null:i,r["default"].set(t.buckets,n,o)},SET_BUCKET_WINDOW:function(t,e){var n=e.id,i=e.value,o=t.buckets[n],a=parseInt(i);isNaN(a)?o.window=null:(/[\d.]+s/.test(i)?a*=1e3:/[\d.]+h/.test(i)?a*=36e5:a*=6e4,o.window=a),r["default"].set(t.buckets,n,o)},CREATE_BUCKET:function(t,e){var n=e.id,i=e.name;r["default"].set(t.buckets,n,{id:n,name:i,input:"vbuy + vsell",enabled:!1})},REMOVE_BUCKET:function(t,e){r["default"].delete(t.buckets,e)},SET_WINDOW:function(t,e){var n=parseInt(e)||0;/[\d.]+s/.test(e)?n*=1e3:/[\d.]+h/.test(e)?n*=36e5:n*=6e4,t.window=n},TOGGLE_CHART:function(t,e){t.enableChart=!!e}},nr={namespaced:!0,state:Zn,getters:Qn,actions:tr,mutations:er};function rr(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ir(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ir(t,e){if(t){if("string"===typeof t)return or(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?or(t,e):void 0}}function or(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ar(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function sr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ar(Object(n),!0).forEach((function(e){cr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function cr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lr(t){return lr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lr(t)}var ur={getThreshold:function(t){return function(e){for(var n=0;n<t.thresholds.length;n++)if(t.thresholds[n].id===e)return t.thresholds[n];for(var r=0;r<t.liquidations.length;r++)if(t.liquidations[r].id===e)return t.liquidations[r]}}},dr={liquidations:[{id:"liquidation_threshold",amount:5e4,buyColor:"rgba(236,64,122,0.5)",sellColor:"rgba(255,152,0,0.5)",buyAudio:"var srqtR = Math.min(1, gain / 4)\nplay(329.63, srqtR, srqtR*2,0,,,'sine')\nplay(329.63, srqtR, srqtR*4,0.08,,,'sine')",sellAudio:"var srqtR = Math.min(1, gain / 6)\nplay(440, srqtR, srqtR*2,0,,,'sine')\nplay(440, srqtR, srqtR*4,0.08,,,'sine')"},{id:"liquidation_significant",amount:1e5,buyColor:"rgba(236,64,122,0.6)",sellColor:"rgba(255,152,0,0.7)",buyAudio:"var srqtR = Math.min(1, gain / 4)\nplay(329.63, srqtR, srqtR*4,0,,,'sine')\nplay(329.63, srqtR, srqtR*6,0.08,,,'sine')",sellAudio:"var srqtR = Math.min(1, gain / 6)\nplay(440, srqtR, srqtR*4,0,,,'sine')\nplay(440, srqtR, srqtR*6,0.08,,,'sine')"},{id:"liquidation_huge",amount:2e5,buyGif:"flying money",sellGif:"flying money",buyColor:"rgba(236,64,122,0.7)",sellColor:"rgba(255,152,0,0.8)",buyAudio:"var srqtR = Math.min(1, gain / 4)\nplay(329.63, srqtR, srqtR*4,0,,,'sine')\nplay(329.63, srqtR, srqtR*8,0.08,,,'sine')",sellAudio:"var srqtR = Math.min(1, gain / 6)\nplay(440, srqtR, srqtR*4,0,,,'sine')\nplay(440, srqtR, srqtR*8,0.08,,,'sine')"},{id:"liquidation_rare",amount:1e6,buyGif:"explosion",sellGif:"explosion",buyColor:"rgb(156,39,176)",sellColor:"rgb(255,235,59)",buyAudio:"var srqtR = Math.min(1, gain / 10)\nplay(329.63, srqtR, 1,0,,,'sine')\nplay(329.63, srqtR, srqtR*10,0.08,,,'sine')",sellAudio:"var srqtR = Math.min(1, gain / 10)\nplay(440, srqtR, 1,0,,,'sine')\nplay(440, srqtR, srqtR*10,0.08,,,'sine')"}],thresholds:[{id:"threshold",amount:1e5,buyColor:"rgba(119, 148, 92, 0.25)",sellColor:"rgba(239, 67, 82, 0.25)",buyAudio:"play(659.26, gain / 10, 0.1 + gain / 7)",sellAudio:"play(493.88, gain * 1.5 / 10, 0.1 + gain / 7)"},{id:"significant",amount:25e4,buyColor:"rgb(100, 157, 102)",sellColor:"rgb(239, 67, 82)",buyAudio:"play(659.26, 0.05 + gain / 10, 0.2 + ratio * 0.23,0,,0);\nplay(830.6, 0.05 + gain / 10, 0.2 + ratio * 0.23, 0.08,,0)",sellAudio:"play(493.88, 0.05 + gain * 1.5 / 10, 0.2 + ratio * 0.23,0,,0);\nplay(392, 0.05 + gain * 1.5 / 10, 0.2 + ratio * 0.23, 0.08,,0)"},{id:"huge",amount:1e6,buyGif:"cash bullish",sellGif:"cash bearish",buyColor:"rgb(59, 202, 109)",sellColor:"rgb(235, 30, 47)",buyAudio:"play(659.26, 0.05 + gain / 25, 0.1 + ratio * 0.23, 0,,0);\nplay(830.6, 0.05 + gain / 25, 0.1 + ratio * 0.23, 0.08,,0);\nplay(987.76, 0.05 + gain / 25, 0.1 + ratio * 0.23, 0.16,,0);\nplay(1318.52, 0.05 + gain / 10, 0.1 + ratio * 0.23, 0.24,,0)",sellAudio:"play(493.88, 0.05 + gain / 25, 0.1 + ratio * 0.23, 0,,0);\nplay(369.99, 0.05 + gain * 1.5 / 10, 0.2, 0.08,,0);\nplay(293.66, 0.05 + gain * 1.5 / 10, 0.2, 0.16,,0);\nplay(246.94, 0.05 + gain * 1.5 / 10, 0.1 + ratio * 0.23, 0.24,,0)"},{id:"rare",amount:1e7,buyGif:"explosion",sellGif:"explosion",buyColor:"rgb(0, 255, 127)",sellColor:"rgb(217, 31, 28)",buyAudio:"play(659.26, 0.05 + gain / 25, 0.1 + ratio * 0.13, 0,,0);\nplay(830.6, 0.05 + gain / 25, 0.1 + ratio * 0.13, 0.08,,0);\nplay(987.76, 0.05 + gain / 25, 0.1 + ratio * 0.13, 0.16,,0);\nplay(1318.52, 0.05 + gain / 10, 0.1 + ratio * 0.13, 0.24,,0)",sellAudio:"play(493.88, 0.05 + gain / 25, 0.1 + ratio * 0.13, 0,,0);\nplay(369.99, 0.05 + gain * 1.5 / 10, 0.2, 0.08,,0);\nplay(293.66, 0.05 + gain * 1.5 / 10, 0.2, 0.16,,0);\nplay(246.94, 0.05 + gain * 1.5 / 10, 0.1 + ratio * 0.13, 0.24,,0)"}],audioThreshold:null,multipliers:{},showThresholdsAsTable:!0,maxRows:100,muted:!1,audioPitch:null,audioVolume:null,showTradesPairs:!1,tradeType:"both",showLogos:!0,monochromeLogos:!1,showTimeAgo:!0,showPrice:!0,thresholdsMultipler:1},hr={updateThreshold:function(t,e){var n=t.state,r=t.commit,i=e.index,o=e.prop,a=e.value,s=n.thresholds[i];if(!s)throw new Error("No threshold");var c={index:i};a&&"object"===lr(a)?c=sr(sr({},c),a):c.value=a,r("SET_THRESHOLD_"+o,c)},updateLiquidations:function(t,e){var n=t.state,r=t.commit,i=e.prop,o=e.value,a=n.liquidations;if(!a)throw new Error("No liquidation threshold");r("SET_LIQUIDATIONS_"+i,o)}},pr={TOGGLE_TRADES_PAIRS:function(t){t.showTradesPairs=!t.showTradesPairs},SET_MAX_ROWS:function(t,e){t.maxRows=e},TOGGLE_LOGOS:function(t){t.monochromeLogos?(t.showLogos=!1,t.monochromeLogos=!1):t.showLogos?t.monochromeLogos=!0:(t.showLogos=!0,t.monochromeLogos=!1)},TOGGLE_MUTED:function(t){t.muted=!t.muted,t.muted||0!==t.audioVolume||(t.audioVolume=null)},SET_AUDIO_PITCH:function(t,e){"string"===typeof e&&(e=e.replace(/[^0-9-.]/g,"")),e=+e,t.audioPitch=e&&1!==e?e:null},SET_AUDIO_VOLUME:function(t,e){"string"===typeof e&&(e=e.replace(/[^0-9-.]/g,"")),isNaN(+e)||null===e?t.audioVolume=null:(t.audioVolume=+e,0!==t.audioVolume||t.muted?t.audioVolume>0&&t.muted&&(t.muted=!1):t.muted=!0)},TOGGLE_MONOCHROME_LOGOS:function(t,e){t.monochromeLogos=!!e},TOGGLE_TRADE_TYPE:function(t){var e=["both","liquidations","trades"],n=Math.max(0,e.indexOf(t.tradeType));t.tradeType=e[(n+1)%e.length]},TOGGLE_TIME_AGO:function(t){t.showTimeAgo=!t.showTimeAgo},TOGGLE_PRICE:function(t){t.showPrice=!t.showPrice},TOGGLE_THRESHOLDS_TABLE:function(t,e){t.showThresholdsAsTable=!!e},SET_THRESHOLD_AMOUNT:function(t,e){var n=e.id,r=e.value,i=this.getters[t._id+"/getThreshold"](n);i&&("string"===typeof r&&/m|k$/i.test(r)&&(/m$/i.test(r)?i.amount=1e6*parseFloat(r):i.amount=1e3*parseFloat(r)),i.amount=+r)},TOGGLE_THRESHOLD_MAX:function(t,e){var n=this.getters[t._id+"/getThreshold"](e);n&&(n.max=!n.max)},SET_THRESHOLD_MULTIPLIER:function(t,e){var n=e.identifier,i=e.multiplier;null===i||isNaN(i)||i<0?r["default"].delete(t.multipliers,n):(0===i&&(i=.01),r["default"].set(t.multipliers,n,i))},SET_THRESHOLD_GIF:function(t,e){var n=this.getters[t._id+"/getThreshold"](e.id),r=e.side+"Gif";n&&(e.value.trim().length?n[r]=e.value:(e.value=n.gif,e.isDeleted=!0,n[r]=null))},SET_THRESHOLD_COLOR:function(t,e){var n=e.id,r=e.side,i=e.value,o=this.getters[t._id+"/getThreshold"](n);o&&(o[r]=i)},SET_THRESHOLD_AUDIO:function(t,e){var n=e.id,r=e.buyAudio,i=e.sellAudio,o=this.getters[t._id+"/getThreshold"](n);o&&(o["buyAudio"]=r,o["sellAudio"]=i)},ADD_THRESHOLD:function(t,e){var n=t[e][t[e].length-1],r="play(659.26, ratio, ratio, 0)",i="play(493.88, ratio, ratio, 0)";n&&(r=n.buyAudio,i=n.sellAudio),t[e].push({id:Nt(8),amount:2*t[e][t.thresholds.length-1].amount,buyColor:"rgb(0, 255, 0)",sellColor:"rgb(255, 0, 0)",buyAudio:r,sellAudio:i})},DELETE_THRESHOLD:function(t,e){var n=t.thresholds.indexOf(t.thresholds.find((function(t){return t.id===e})));if(-1===n){var r=t.liquidations.indexOf(t.liquidations.find((function(t){return t.id===e})));-1===r||t.liquidations.splice(r,1)}else t.thresholds.splice(n,1)},SET_AUDIO_THRESHOLD:function(t,e){t.audioThreshold=e},SET_THRESHOLDS_MULTIPLER:function(t,e){var n=e.value,r=e.market;n=Math.max(n,.01);var i=(n-t.thresholdsMultipler)/t.thresholdsMultipler;t.thresholdsMultipler=n;var o,a=rr(t.thresholds);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.amount=+xe(s.amount+s.amount*i,r)}}catch(d){a.e(d)}finally{a.f()}var c,l=rr(t.liquidations);try{for(l.s();!(c=l.n()).done;){var u=c.value;u.amount=+xe(u.amount+u.amount*i,r)}}catch(d){l.e(d)}finally{l.f()}}},fr={namespaced:!0,state:dr,getters:ur,actions:hr,mutations:pr},mr={},vr={animateSort:!0,showPairs:!0,showVolume:!0,showVolumeDelta:!0,period:0,showChange:!0,showPrice:!0,sortType:"change",sortOrder:-1},yr={},br={TOGGLE_SORT_ANIMATION:function(t){t.animateSort=!t.animateSort},TOGGLE_PAIRS:function(t){t.showPairs=!t.showPairs},TOGGLE_VOLUME:function(t){t.showVolume=!t.showVolume},TOGGLE_VOLUME_DELTA:function(t){t.showVolumeDelta=!t.showVolumeDelta},SET_PERIOD:function(t,e){t.period=e},TOGGLE_CHANGE:function(t){t.showChange=!t.showChange},TOGGLE_PRICE:function(t){t.showPrice=!t.showPrice},TOGGLE_SORT_ORDER:function(t){t.sortOrder=t.sortOrder>0?-1:1},SET_SORT_TYPE:function(t,e){t.sortType=e}},gr={namespaced:!0,state:vr,getters:mr,actions:yr,mutations:br},Sr={},_r={granularity:5e3,liquidationsOnly:!1,steps:[3e4,6e4,9e5,18e5],count:!1},Cr={},wr={REPLACE_COUNTERS:function(t,e){t.steps=e.sort((function(t,e){return t-e}))},TOGGLE_COUNT:function(t){t.count=!t.count},TOGGLE_LIQUIDATIONS_ONLY:function(t){t.liquidationsOnly=!t.liquidationsOnly}},Tr={namespaced:!0,state:_r,getters:Sr,actions:Cr,mutations:wr},kr={},Er={url:"https://cryptopanic.com/widgets/news/?bg_color=FFFFFF&amp;font_family=sans&amp;header_bg_color=30343B&amp;header_text_color=FFFFFF&amp;link_color=0091C2&amp;news_feed=trending&amp;text_color=333333&amp;title=Latest%20News",interactive:!1,locked:!1},Ir={boot:async function(t){var e=t.state,n=t.dispatch;setTimeout((function(){n("setTitle",e.url)}))},setUrl:function(t,e){var n=t.dispatch,r=t.commit;if(e)try{new URL(e),n("setTitle",e),r("SET_URL",e)}catch(i){}},setTitle:function(t,e){var n=t.rootState,r=t.state,i="";try{i=new URL(r.url).hostname}catch(a){}var o="";try{o=new URL(e).hostname}catch(a){}n.panes.panes[r._id].name&&n.panes.panes[r._id].name!==i||this.commit("panes/SET_PANE_NAME",{id:r._id,name:o})}},Or={SET_URL:function(t,e){t.url=e},TOGGLE_INTERACTIVE:function(t){t.interactive=!t.interactive},UNLOCK_URL:function(t){t.locked=!1}},Ar={namespaced:!0,state:Er,getters:kr,actions:Ir,mutations:Or},Pr={chart:Vn,stats:nr,trades:fr,prices:gr,counters:Tr,website:Ar};function xr(t){return xr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xr(t)}function Rr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Dr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rr(Object(n),!0).forEach((function(e){Ur(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ur(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Nr={};async function Br(t){"undefined"!==typeof t._id&&("number"===typeof Nr[t._id]&&(clearTimeout(Nr[t._id]),delete Nr[t._id]),await pn.saveState(t._id,t))}function Lr(t){if("undefined"!==typeof t._id)return"number"===typeof Nr[t._id]&&clearTimeout(Nr[t._id]),new Promise((function(e){Nr[t._id]=setTimeout((async function(){await Br(t),e()}),500)}))}async function jr(t){try{var e=await pn.getState(t._id);if(e)return Object.assign({},t,e)}catch(n){pn.removeState(t._id)}return t}async function Mr(t){if(ta._actions[t+"/boot"])try{await ta.dispatch(t+"/boot")}catch(e){}}async function $r(t,e,n,r){r?(e=Dr(Dr({},Pr[r.type]),{},{state:JSON.parse(JSON.stringify(Pr[r.type].state))}),e.state._id=t,"object"===xr(r.settings)&&(r.settings._id&&delete r.settings._id,u()(e.state,r.settings))):e=Dr(Dr({},e),{},{state:JSON.parse(JSON.stringify(e.state))}),"undefined"!==typeof e.state._id&&(e.state=await jr(e.state)),ta.registerModule(t,e),n&&r&&await Mr(t),Br(e.state)}function Fr(t){return new Promise((function(e){var n=ta.watch(t,(function(t){e(t),n()}))}))}var Hr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{staticClass:"-sticky-footer -mobile-fs -internal-scroll -auto",class:[t.loading&&"-loading"],on:{clickOutside:t.hide},scopedSlots:t._u([{key:"header",fn:function(){return[t.paneId?n("div",[n("div",{staticClass:"title"},[t._v("ADD/REMOVE SOURCES")]),n("div",{staticClass:"subtitle",staticStyle:{opacity:"1"}},[t._v(" to "),n("span",{staticClass:"text-success",domProps:{textContent:t._s(t.paneName)}}),t._v(" pane "),n("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn -small ml4 -text",attrs:{type:"button",title:"Target all instead"},on:{click:t.detargetPane}},[n("i",{staticClass:"icon-cross"})])])]):n("div",[n("div",{staticClass:"title"},[t._v("REPLACE SOURCES")]),n("div",{staticClass:"subtitle"},[t._v("across all panes")])]),n("div",{staticClass:"column -center"})]},proxy:!0}])},[n("div",{staticClass:"search"},[n("div",{staticClass:"search__side hide-scrollbar",class:{"-show":t.mobileShowFilters}},[n("div",{staticClass:"search-filters mb16"},[t.showExtraFilters?n("div",{staticClass:"search-filters__content"},[n("label",{staticClass:"checkbox-control -small mb4"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.searchTypes.normalize},on:{change:function(e){return t.$store.commit("settings/TOGGLE_SEARCH_TYPE","normalize")}}}),n("div"),n("span",[t._v("Group by pair")])]),n("label",{staticClass:"checkbox-control -small mb4"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.searchTypes.mergeUsdt},on:{change:function(e){return t.$store.commit("settings/TOGGLE_SEARCH_TYPE","mergeUsdt")}}}),n("div"),n("span",[t._v("Merge stablecoins")])]),n("label",{staticClass:"checkbox-control -small mb4"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.searchTypes.historical},on:{change:function(e){return t.$store.commit("settings/TOGGLE_SEARCH_TYPE","historical")}}}),n("div"),n("span",[t._v("With historical data")])]),n("label",{staticClass:"checkbox-control -small mb4"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.onlyConnected},on:{change:function(e){t.onlyConnected=!t.onlyConnected}}}),n("div"),n("span",[t._v("Already connected")])])]):t._e(),n("div",{staticClass:"search-filters__title text-muted mb8",on:{click:function(e){t.showExtraFilters=!t.showExtraFilters}}},[t._v(" Extra "),n("i",{staticClass:"icon-up-thin"})])]),n("div",{staticClass:"search-filters mb16"},[t.showQuoteFilters?n("div",{staticClass:"search-filters__content"},t._l(t.quoteCurrencies,(function(e){return n("label",{key:e,staticClass:"checkbox-control -small mb4"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:!0===t.searchQuotes[e]||void 0===t.searchQuotes[e]},on:{change:function(n){return t.$store.commit("settings/TOGGLE_SEARCH_QUOTE",{key:e,value:n.target.checked})}}}),n("div"),n("span",[t._v(t._s(e))])])})),0):t._e(),n("div",{staticClass:"search-filters__title text-muted mb8",on:{click:function(e){t.showQuoteFilters=!t.showQuoteFilters}}},[t._v(" Quote currency "),n("i",{staticClass:"icon-up-thin"})])]),n("div",{staticClass:"search-filters mb16"},[t.showTypeFilters?n("div",{staticClass:"search-filters__content"},[n("label",{staticClass:"checkbox-control -small mb4"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.searchTypes.spots},on:{change:function(e){return t.$store.commit("settings/TOGGLE_SEARCH_TYPE","spots")}}}),n("div"),n("span",[t._v("Spots")])]),n("label",{staticClass:"checkbox-control -small mb4"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.searchTypes.perpetuals},on:{change:function(e){return t.$store.commit("settings/TOGGLE_SEARCH_TYPE","perpetuals")}}}),n("div"),n("span",[t._v("Perpetuals")])]),n("label",{staticClass:"checkbox-control -small mb4"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.searchTypes.futures},on:{change:function(e){return t.$store.commit("settings/TOGGLE_SEARCH_TYPE","futures")}}}),n("div"),n("span",[t._v("Futures")])])]):t._e(),n("div",{staticClass:"search-filters__title text-muted mb8",on:{click:function(e){t.showTypeFilters=!t.showTypeFilters}}},[t._v(" Type "),n("i",{staticClass:"icon-up-thin"})])]),n("div",{staticClass:"search-filters"},[t.showExchanges?n("div",{staticClass:"search-filters__content"},[n("label",{staticClass:"search-filters__controls checkbox-control -small mb4 flex-right"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.allExchangesEnabled},on:{change:t.toggleAll}}),n("div")]),t._l(t.exchanges,(function(e){return[t.$store.state.exchanges[e].disabled?t._e():n("label",{key:e,staticClass:"checkbox-control -small mb4 -custom"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:!1!==t.searchExchanges[e]},on:{change:function(n){return t.$store.commit("settings/TOGGLE_SEARCH_EXCHANGE",e)}}}),n("div",{class:"icon-"+e}),n("span",[n("span",{domProps:{textContent:t._s(e)}}),t.canRefreshProducts?n("a",{staticClass:"-text",attrs:{href:"javascript:void(0);",title:"Refresh products"},on:{click:function(n){return t.refreshExchangeProducts(e)}}},[n("i",{staticClass:"icon-refresh ml8"})]):t._e()])])]}))],2):t._e(),n("div",{staticClass:"search-filters__title text-muted mb8",on:{click:function(e){t.showExchanges=!t.showExchanges}}},[t._v(" Exchanges "),t.canRefreshProducts?n("a",{staticClass:"search-filters__refresh-all -text",attrs:{href:"javascript:void(0);",title:"Refresh products"},on:{click:function(e){return t.refreshExchangeProducts()}}},[n("i",{staticClass:"icon-refresh ml8"})]):t._e(),n("i",{staticClass:"icon-up-thin"})])])]),n("div",{ref:"wrapper",staticClass:"search__wrapper hide-scrollbar"},[n("div",{staticClass:"search-selection search__tags form-control",class:t.groupsCount<10&&"-sticky"},[t.selection.length?n("div",{staticClass:"search-selection__controls"},[n("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn -text",attrs:{title:"Toggle grouping"},on:{click:function(e){return t.$store.commit("settings/TOGGLE_SEARCH_TYPE","normalize")}}},[n("i",{staticClass:"icon-merge"})]),n("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn -text",attrs:{title:"Clear"},on:{click:t.clearSelection}},[n("i",{staticClass:"icon-eraser"})])]):t._e(),t.searchTypes.normalize?t._l(t.groupedSelection,(function(e,r){return n("button",{key:r,staticClass:"btn -accent -accent-200 -pill",attrs:{title:"Click to remove "+e.join(", ")},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.deselectWhileRetainingScroll(e)}}},[e.length>1?n("span",{staticClass:"badge -compact ml8",domProps:{textContent:t._s(e.length)}}):t._e(),n("span",{domProps:{textContent:t._s(r)}})])})):t._l(t.selection,(function(e){return n("button",{key:e,staticClass:"btn -accent -accent-200",class:{"-green":-1!==t.activeMarkets.indexOf(e)},attrs:{title:"Click to remove"},domProps:{textContent:t._s(e)},on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.deselectWhileRetainingScroll(e)}}})})),n("input",{ref:"input",attrs:{type:"text",placeholder:"Search"},domProps:{value:t.query},on:{focus:function(e){return t.toggleHistory(!0)},blur:function(e){return t.toggleHistory(!1)},input:function(e){t.page=0,t.query=e.target.value}}})],2),n("div",{staticClass:"search__results"},[n("transition-height",{attrs:{name:"search-history",single:""}},[t.showHistory&&t.previousSearchSelections.length?n("div",{staticClass:"search-history"},[n("div",{staticClass:"search__tags"},t._l(t.previousSearchSelections,(function(e){return n("button",{key:e.label,staticClass:"btn -accent -accent-200 -pill -small",attrs:{title:e.markets.join(", ")},on:{click:function(n){return t.selectMarkets(e.markets,n.shiftKey)}}},[e.count>1?n("span",{staticClass:"badge -invert ml8",domProps:{textContent:t._s(e.markets.length)}}):t._e(),n("span",[t._v(t._s(e.label))])])})),0),n("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn -outline search-history__clear",attrs:{title:"Clear recent searches<br><i>💡 SHIFT+CLIC to delete 1 item</i>"}},[n("i",{staticClass:"icon-trash -small",on:{click:function(e){return t.$store.commit("settings/CLEAR_SEARCH_HISTORY")}}})])]):t._e()]),t.results.length?[t.page>0?n("div",{staticClass:"d-flex mt8"},[n("button",{staticClass:"btn -text mlauto switch-page",on:{click:t.showLess}},[t._v("... go page "+t._s(t.page))])]):t._e(),t.searchTypes.normalize?n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",[t._v("pair")]),n("th",[t._v("markets")])])]),n("tbody",t._l(t.results,(function(e,r){return n("tr",{key:e.localPair,staticClass:"-action",class:{active:t.activeIndex===r},on:{click:function(n){return t.selectMarkets(e.markets)}}},[n("td",{domProps:{textContent:t._s(e.localPair)}}),n("td",[n("small",{domProps:{textContent:t._s(e.markets.join(", "))}})])])})),0)]):n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th"),n("th",[t._v("exchange")]),n("th",[t._v("pair")]),n("th",[t._v("type")])])]),n("tbody",t._l(t.results,(function(e,r){return n("tr",{key:e.id,staticClass:"-action",class:{active:t.activeIndex===r},on:{click:function(n){return t.selectMarket(e.id)}}},[n("td",{staticClass:"icon search__exchange text-center",class:"icon-"+e.exchange}),n("td",{domProps:{textContent:t._s(e.exchange)}}),n("td",{domProps:{textContent:t._s(e.pair)}}),n("td",{domProps:{textContent:t._s(e.type)}}),n("td",{staticClass:"text-center"},[-1!==t.historicalMarkets.indexOf(e.id)?n("i",{staticClass:"icon-candlestick icon-lower"}):t._e()])])})),0)]),n("div",{staticClass:"mt8 d-flex"},[n("button",{staticClass:"btn -text",on:{click:t.addAll}},[n("i",{staticClass:"icon-plus mr8"}),t._v(" add all of the above")]),t.results.length===t.resultsPerPage?n("button",{staticClass:"btn -text mlauto switch-page",on:{click:t.showMore}},[t._v(" go page "+t._s(t.page+2)+" ... ")]):t._e()])]:t.query.length?n("p",{staticClass:"mb0 pb0"},[n("span",[t._v('No results found for "'+t._s(t.query)+'".')]),n("br"),t.hasFilters||!t.allExchangesEnabled?n("button",{staticClass:"btn -outline -cases",on:{click:t.clearFilters}},[n("i",{staticClass:"icon-refresh"}),t._v(" Retry without filters ")]):t._e()]):t._e()],2)])]),n("footer",[n("a",{staticClass:"btn -text mrauto search-filters__toggle",attrs:{href:"javascript:void(0);"},domProps:{textContent:t._s(t.mobileShowFilters?"Hide filters":"Show filters")},on:{click:function(e){t.mobileShowFilters=!t.mobileShowFilters}}}),n("a",{staticClass:"btn -text",attrs:{href:"javascript:void(0);"},on:{click:t.hide}},[t._v("Cancel")]),n("button",{staticClass:"btn -large ml8 -green",class:t.loading&&"-loading",on:{click:t.submit}},[t._v(" "+t._s(t.submitLabel)+" "),t.loading?n("div",{staticClass:"lds-spinner -center"},[n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div")]):t._e()])])])},Gr=[],Xr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.name?t.single?"transition":"transition-group":"div",{tag:"component",attrs:{name:t.name,tag:t.tag},on:{beforeEnter:t.beforeEnter,enter:t.enter,afterEnter:t.afterEnter,beforeLeave:t.beforeLeave,leave:t.leave}},[t._t("default")],2)},Vr=[];function qr(t){return qr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qr(t)}function Kr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wr(t,e,n){return e&&zr(t.prototype,e),n&&zr(t,n),t}function Yr(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jr(t,e)}function Jr(t,e){return Jr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Jr(t,e)}function Qr(t){var e=ei();return function(){var n,r=ni(t);if(e){var i=ni(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Zr(this,n)}}function Zr(t,e){if(e&&("object"===qr(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ti(t)}function ti(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ei(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function ni(t){return ni=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ni(t)}var ri=function(t){Yr(n,t);var e=Qr(n);function n(){return Kr(this,n),e.apply(this,arguments)}return Wr(n,[{key:"mounted",value:function(){var t=this;this.$nextTick((function(){var e=t.$el;e instanceof Element&&(e.dataset.height=t.getChildrenHeight(e))}))}},{key:"getChildrenHeight",value:function(t){var e=t.children[0];if(!e)return"0px";var n=e.offsetHeight,r=window.getComputedStyle(e);return n+=parseInt(r.getPropertyValue("margin-top")),n+=parseInt(r.getPropertyValue("margin-bottom")),n+"px"}},{key:"beforeEnter",value:function(t){t.style.height="0px"}},{key:"enter",value:function(t){var e=this.getChildrenHeight(t);t.dataset.height=e,setTimeout((function(){t.style.height=e}),100)}},{key:"afterEnter",value:function(t){t.style.height=""}},{key:"beforeLeave",value:function(t){t.style.height=t.dataset.height}},{key:"leave",value:function(t){setTimeout((function(){t.style.height="0px"}))}}]),n}(s["c"]);ri=Object(a["a"])([Object(s["a"])({name:"Transitionheight",props:{name:{type:String,required:!1,default:null},single:{type:Boolean,required:!1},tag:{type:String,required:!1,default:null}}})],ri);var ii=ri,oi=ii,ai=Object(R["a"])(oi,Xr,Vr,!1,null,null,null),si=ai.exports;function ci(t){return di(t)||ui(t)||mi(t)||li()}function li(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ui(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function di(t){if(Array.isArray(t))return vi(t)}function hi(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=mi(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function pi(t,e){return bi(t)||yi(t,e)||mi(t,e)||fi()}function fi(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function mi(t,e){if(t){if("string"===typeof t)return vi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vi(t,e):void 0}}function vi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yi(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function bi(t){if(Array.isArray(t))return t}var gi=25,Si={mixins:[Et],components:{Dialog:kt,TransitionHeight:si},props:{paneId:{required:!1}},data:function(){return{page:0,query:"",showHistory:!0,markets:[],loading:!1,selection:[],originalSelection:[],activeIndex:null,mobileShowFilters:!1,showExchanges:!0,showExtraFilters:!0,showQuoteFilters:!1,showTypeFilters:!0,onlyConnected:!1,canRefreshProducts:!0,flattenedProducts:[],quoteCurrencies:["USD","USDT","UST","USDC","BUSD","ETH","BTC","BNB","EUR","AUD","GBP","OTHERS"]}},computed:{previousSearchSelections:function(){return this.$store.state.settings.previousSearchSelections},resultsPerPage:function(){return gi},otherPanes:function(){var t=this;return Object.keys(this.$store.state.panes.panes).filter((function(e){return e!==t.paneId})).map((function(e){return t.$store.state.panes.panes[e]}))},paneName:function(){return this.paneId?this.$store.state.panes.panes[this.paneId].name||this.paneId:null},activeMarkets:function(){return Object.keys(this.$store.state.panes.marketsListeners)},paneMarkets:function(){return this.paneId?this.$store.state.panes.panes[this.paneId].markets:[]},toConnect:function(){var t=this;return this.paneId?this.selection.filter((function(e){return-1===t.paneMarkets.indexOf(e)})).length:this.selection.filter((function(e){return-1===t.activeMarkets.indexOf(e)})).length},toDisconnect:function(){var t=this;return this.originalSelection.filter((function(e){return-1===t.selection.indexOf(e)})).length},submitLabel:function(){var t=+this.toConnect,e=+this.toDisconnect,n="";return t&&(n+="connect".concat(this.loading?"ing":""," ").concat(t)),e&&(n+="".concat(t?" and ":"","disconnect").concat(this.loading?"ing":""," ").concat(e)),n||"REFRESH"},searchTypes:function(){return this.$store.state.settings.searchTypes},searchQuotes:function(){var t=this.$store.state.settings.searchQuotes;return this.quoteCurrencies.reduce((function(e,n){return e[n]="undefined"!==typeof t[n]&&t[n],e}),{})},allQuotes:function(){return!Object.values(this.searchQuotes).find((function(t){return!!t}))},exchanges:function(){return this.$store.getters["exchanges/getExchanges"]},searchExchanges:function(){var t=this,e=this.$store.state.settings.searchExchanges;return Object.keys(this.$store.state.exchanges).reduce((function(n,r){return t.$store.state.exchanges[r].disabled||(n[r]="undefined"===typeof e[r]||e[r]),n}),{})},allExchangesEnabled:function(){return"undefined"===typeof Object.values(this.searchExchanges).find((function(t){return!1===t}))},hasFilters:function(){var t=this.searchTypes.historical,e=this.searchTypes.spots,n=this.searchTypes.perpetuals,r=this.searchTypes.futures,i=this.searchTypes.mergeUsdt;return i||t||e||n||r||this.onlyConnected},historicalMarkets:function(){return this.$store.state.app.historicalMarkets},queryFilter:function(){var t=this.query.replace(/[ ,]/g,"|").replace(/(^|\w|\s)\*(\w|\s|$)/g,"$1.*$2");return this.searchTypes.normalize?new RegExp("^"+t,"i"):new RegExp(t,"i")},filteredProducts:function(){var t=this,e=this.searchTypes.historical,n=this.searchTypes.spots,r=this.searchTypes.perpetuals,i=this.searchTypes.futures,o=this.searchExchanges,a=this.onlyConnected,s=this.activeMarkets,c=n||r||i,l=this.searchQuotes,u=this.allQuotes;return this.page=0,this.flattenedProducts.filter((function(d){return(!e||-1!==t.historicalMarkets.indexOf(d.id))&&(!(!u&&("boolean"===typeof l[d.quote]&&!1===l[d.quote]||"boolean"!==typeof l[d.quote]&&!l.OTHERS))&&((!a||-1!==s.indexOf(d.id))&&(!!o[d.exchange]&&(!c||!(!i&&"future"===d.type||!r&&"perp"===d.type||!n&&"spot"===d.type)))))}))},results:function(){var t=this,e=this.page*gi;if(this.searchTypes.normalize){var n=this.filteredProducts.filter((function(e){return-1===t.selection.indexOf(e.id)&&t.queryFilter.test(e.local)})).reduce((function(e,n){var r=n.local;return t.searchTypes.mergeUsdt&&(r=ke(r)),e[r]||(e[r]=[]),e[r].push(n.id),e}),{});return Object.keys(n).slice(e,e+gi).map((function(t){return{localPair:t,markets:n[t]}}))}return this.filteredProducts.filter((function(e){return-1===t.selection.indexOf(e.id)&&t.queryFilter.test(e.id)})).slice(e,e+gi)},groupedSelection:function(){var t=this;return this.selection.reduce((function(e,n){var r=n.split(":"),i=pi(r,1),o=i[0];if(!be[o])return e;var a=be[o].find((function(t){return t.id===n})),s=a?a.local:n;return t.searchTypes.mergeUsdt&&(s=ke(s)),e[s]||(e[s]=[]),e[s].push(n),e}),{})},groupsCount:function(){return Object.keys(this.groupedSelection).length}},watch:{"$store.state.app.showSearch":function(t){t||this.close(!1)}},created:async function(){await this.ensureProducts(),this.initSelection(),this.cacheProducts()},mounted:function(){var t=this;this.$nextTick((function(){t.$refs.input&&t.$refs.input.focus()})),document.addEventListener("paste",this.onPaste),document.addEventListener("keydown",this.onKeydown)},beforeDestroy:function(){document.removeEventListener("paste",this.onPaste),document.removeEventListener("keydown",this.onKeydown),this._hideHistoryTimeout&&clearTimeout(this._hideHistoryTimeout)},methods:{detargetPane:function(){this.$store.commit("app/SET_FOCUSED_PANE",null),this.paneId=null,this.initSelection()},initSelection:function(){this.paneId?this.selection=this.$store.state.panes.panes[this.paneId].markets.slice():this.selection=this.activeMarkets.slice(),this.originalSelection=this.selection.slice()},containMultipleMarketsConfigurations:function(){var t=this;return Object.keys(this.$store.state.panes.panes).map((function(e){return $t(t.$store.state.panes.panes[e].markets)})).filter((function(t,e,n){return n.indexOf(t)===e})).length>1},selectPaneMarkets:function(t){for(var e=this.otherPanes[t],n=0;n<e.markets.length;n++)-1===this.selection.indexOf(e.markets[n])&&this.selection.push(e.markets[n])},selectMarket:function(t){this.selection.push(t)},selectMarkets:function(t,e){var n=this;if(e)return this.$store.commit("settings/REMOVE_SEARCH_HISTORY",t),void clearTimeout(this._hideHistoryTimeout);var r=t.filter((function(t){return-1===n.selection.indexOf(t)}));r.length?this.selection=this.selection.concat(r):this.$store.dispatch("app/showNotice",{id:"select-market-already-added",title:"You already selected ".concat(t.length>1?"these markets":t[0]," !"),type:"error"})},deselectWhileRetainingScroll:async function(t){var e=this.$refs.wrapper.scrollTop;Array.isArray(t)?this.deselectMarkets(t):this.deselectMarket(t),await this.$nextTick(),this.$refs.input.focus(),this.$refs.wrapper.scrollTop=e},deselectMarket:function(t){this.selection.splice(this.selection.indexOf(t),1)},deselectMarkets:function(t){var e,n=hi(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.deselectMarket(r)}}catch(i){n.e(i)}finally{n.f()}},submit:async function(){if(this.selection.length&&this.$store.dispatch("settings/saveSearchSelection",this.selection),this.paneId)this.loading=!0,await this.$store.dispatch("panes/setMarketsForPane",{id:this.paneId,markets:this.selection});else{if(this.containMultipleMarketsConfigurations()&&!await Un.confirm("Are you sure ? Some of the panes are watching specific markets."))return;this.loading=!0,Object.keys(this.$store.state.panes.panes).length||await this.$store.dispatch("panes/addPane",{type:"trades"}),await this.$store.dispatch("panes/setMarketsForAll",this.selection)}this.loading=!1,this.hide()},hide:function(){this.$store.dispatch("app/hideSearch")},toggleType:function(t){this.$store.commit("settings/TOGGLE_SEARCH_TYPE",t)},toggleExchange:function(t){this.$store.commit("settings/TOGGLE_SEARCH_EXCHANGE",t)},ensureProducts:async function(){var t,e=hi(this.$store.getters["exchanges/getExchanges"]);try{for(e.s();!(t=e.n()).done;){var n=t.value;!0!==this.$store.state.exchanges[n].disabled&&(this.$store.state.exchanges[n].fetched||await Ee(n),this.$store.state.exchanges[n].fetched&&!be[n]&&await Ce(n))}}catch(r){e.e(r)}finally{e.f()}},clearSelection:function(){this.selection.splice(0,this.selection.length),this.query="",this.$refs.input.focus()},copySelection:function(){zt(this.selection.join(",")),this.$store.dispatch("app/showNotice",{id:"products-clipboard",title:"Copied ".concat(this.selection.length," product(s) to clipboard")})},clearFilters:function(){this.$store.commit("settings/CLEAR_SEARCH_FILTERS"),this.toggleAll(!0),this.onlyConnected=!1},onPaste:function(t){if(!document.activeElement||"INPUT"!==document.activeElement.tagName){var e=t.clipboardData.getData("text/plain"),n=e.split(",").filter((function(t){return/^.{3,}:.{4,32}$/.test(t)}));n.length&&(this.selection=n)}},onKeydown:function(t){switch(t.key){case"Enter":t.preventDefault(),this.results[this.activeIndex]&&(this.searchTypes.normalize?this.selectMarkets(this.results[this.activeIndex].markets):this.selectMarket(this.results[this.activeIndex].id));break;case"ArrowDown":case"ArrowUp":this.results.length&&("ArrowUp"===t.key?this.activeIndex=Math.max(0,this.activeIndex-1):null===this.activeIndex?this.activeIndex=0:this.activeIndex=Math.min(this.results.length-1,this.activeIndex+1));break;case"Backspace":case"Delete":this.deleteLast();break;case"c":!t.ctrlKey&&!t.metaKey||window.getSelection().toString().length||this.copySelection();break}},deleteLast:function(){if(!this.query.length&&this.selection.length)if(this.searchTypes.normalize){var t=Object.keys(this.groupedSelection).pop();this.deselectMarkets(this.groupedSelection[t])}else this.selection.splice(this.selection.length-1,1)},addAll:function(){for(var t=this.searchTypes.normalize,e=[],n=0;n<this.results.length;n++)if(t){var r,i=hi(this.results[n].markets);try{for(i.s();!(r=i.n()).done;){var o=r.value;e.push(o)}}catch(a){i.e(a)}finally{i.f()}}else e.push(this.results[n].id);this.selectMarkets(e)},toggleAll:function(t){"boolean"!==typeof t&&(t=Boolean(!this.allExchangesEnabled)),this.$set(this.$store.state.settings,"searchExchanges",this.exchanges.reduce((function(e,n){return e[n]=!!t,e}),{}))},refreshExchangeProducts:async function(t){var e=this;if(t)this.canRefreshProducts=!1,await pn.deleteProducts(t),setTimeout((function(){e.canRefreshProducts=!0}),3e3),await Ee(t,!0),await Ce(t),await this.$store.dispatch("exchanges/disconnect",t),await this.$store.dispatch("exchanges/connect",t),this.cacheProducts();else{var n,r=hi(this.exchanges);try{for(r.s();!(n=r.n()).done;){var i=n.value;await this.refreshExchangeProducts(i)}}catch(o){r.e(o)}finally{r.f()}}},showMore:function(){this.page++},showLess:function(){this.page=Math.max(this.page-1,0)},cacheProducts:function(){var t;this.flattenedProducts=(t=Array.prototype).concat.apply(t,ci(Object.values(be)))},toggleHistory:function(t){var e=this;this._hideHistoryTimeout&&(clearTimeout(this._hideHistoryTimeout),this._hideHistoryTimeout=null),t?this.showHistory=!0:this._hideHistoryTimeout=setTimeout((function(){e._hideHistoryTimeout=null,e.showHistory=!1}),1e3)}}},_i=Si,Ci=(n("1feb"),Object(R["a"])(_i,Hr,Gr,!1,null,"34776b7e",null)),wi=Ci.exports,Ti=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{staticClass:"-timeframe",on:{clickOutside:t.hide},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",[n("div",{staticClass:"title"},[t._v("Timeframe")]),n("div",{staticClass:"subtitle pl0",domProps:{textContent:t._s(t.paneName)}})]),n("div",{staticClass:"column -center"})]},proxy:!0}])},[n("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[n("div",{staticClass:"text-center"},[n("timeframe-input",{staticClass:"form-control w-100",attrs:{placeholder:t.placeholder},on:{timeframe:t.onTimeframe,submit:t.submit}})],1),n("div",{staticClass:"timeframe-for-human"},[t.valid?n("code",{staticClass:"text-muted",domProps:{textContent:t._s("= "+t.timeframeForHuman)}}):n("code",{staticClass:"form-feedback"},[t._v("Unknown timeframe")])]),n("footer",[n("button",{staticClass:"btn -green ml8 -large",attrs:{type:"submit"}},[t._v("Go")])])])])},ki=[],Ei=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"input",staticClass:"w-100",attrs:{contenteditable:"",placeholder:t.placeholder},on:{input:t.onInput,keydown:t.onKeydown}})},Ii=[];function Oi(){var t=" -webkit- -moz- -o- -ms- ".split(" "),e=function(t){return window.matchMedia(t).matches};if("ontouchstart"in window)return!0;var n=["(",t.join("touch-enabled),("),"heartz",")"].join("");return e(n)}function Ai(t){var e=t.offsetX,n=t.offsetY;if(t.touches&&t.touches.length){var r=t.target.getBoundingClientRect();e=t.touches[0].pageX-r.left,n=t.touches[0].pageY-r.top}return{x:e,y:n}}function Pi(t){return Pi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pi(t)}function xi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ri(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Di(t,e,n){return e&&Ri(t.prototype,e),n&&Ri(t,n),t}function Ui(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ni(t,e)}function Ni(t,e){return Ni=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ni(t,e)}function Bi(t){var e=Mi();return function(){var n,r=$i(t);if(e){var i=$i(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Li(this,n)}}function Li(t,e){if(e&&("object"===Pi(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ji(t)}function ji(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mi(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function $i(t){return $i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},$i(t)}var Fi=function(t){Ui(n,t);var e=Bi(n);function n(){return xi(this,n),e.apply(this,arguments)}return Di(n,[{key:"mounted",value:function(){var t=this;Oi()||this.$nextTick((function(){t.$refs.input.focus()}))}},{key:"onKeydown",value:function(t){13===t.which&&(t.preventDefault(),this.$emit("submit",this.format(t.currentTarget.innerText)))}},{key:"format",value:function(t){var e,n=t.trim();return/t$|ticks?$/i.test(n)?parseInt(n)+"t":(e=/d$/i.test(n)?60*parseFloat(n)*60*24:/h$/i.test(n)?60*parseFloat(n)*60:/m$/i.test(n)?60*parseFloat(n):/ms$/i.test(n)?parseFloat(n)/1e3:parseFloat(n),e)}},{key:"onInput",value:function(t){this.$emit("timeframe",this.format(t.currentTarget.innerText))}}]),n}(s["c"]);Fi=Object(a["a"])([Object(s["a"])({name:"TimeframeInput",props:{hero:{type:Boolean,required:!1,default:!1},placeholder:{type:String,required:!1,default:null},autofocus:{type:String,required:!1,default:null}}})],Fi);var Hi=Fi,Gi=Hi,Xi=Object(R["a"])(Gi,Ei,Ii,!1,null,null,null),Vi=Xi.exports,qi={components:{TimeframeInput:Vi},props:{timeframe:{type:String}},mixins:[Et],data:function(){return{newTimeframe:"",paneId:null}},computed:{paneName:function(){return this.$store.state.panes.panes[this.paneId].name||this.paneId},timeframeForHuman:function(){return Wt(this.newTimeframe)},valid:function(){return null!==this.timeframeForHuman}},watch:{"$store.state.app.showSearch":function(t){t||this.close(!1)}},created:function(){this.paneId=this.$store.state.app.focusedPaneId,this.timeframe&&(this.newTimeframe=this.timeframe),this.placeholder=this.$store.state[this.paneId].timeframe},methods:{hide:function(){this.$store.dispatch("app/hideSearch")},onTimeframe:function(t){this.newTimeframe=t},submit:function(){this.valid&&(this.$store.commit(this.paneId+"/SET_TIMEFRAME",this.newTimeframe),this.hide())}}},Ki=qi,zi=(n("1e89"),Object(R["a"])(Ki,Ti,ki,!1,null,null,null)),Wi=zi.exports,Yi={isBooted:!1,isLoading:!1,isExchangesReady:!1,optimalDecimal:null,pairs:[],showSearch:!1,activeExchanges:{},notices:[],historicalMarkets:[],apiSupportedTimeframes:[],proxyUrl:null,apiUrl:null,version:"DEV",buildDate:"now",baseCurrency:"coin",baseCurrencySymbol:"฿",quoteCurrency:"dollar",quoteCurrencySymbol:"$",focusedPaneId:null},Ji={boot:async function(t){var e=t.commit;e("SET_API_SUPPORTED_PAIRS","BINANCE:avaxusdt,BINANCE_FUTURES:avaxusdt,BITFINEX:AVAX:UST,BITFINEX:AVAXF0:USTF0,BYBIT:AVAXUSDT,COINBASE:AVAX-USDT,OKEX:AVAX-USDT,OKEX:AVAX-USDT-SWAP,BITFINEX:AVAX:USD,BITMEX:AVAXUSD,COINBASE:AVAX-USD,FTX:AVAX-PERP,HUOBI:AVAX-USD,HUOBI:AVAX-USDT,BINANCE:mkrusdt,BINANCE_FUTURES:mkrusdt,BITFINEX:MKRUST,FTX:MKR/USDT,OKEX:MKR-USDT,OKEX:MKR-USDT-SWAP,BITFINEX:MKRUSD,COINBASE:MKR-USD,FTX:MKR-PERP,FTX:MKR/USD,HUOBI:MKR-USDT,KRAKEN:MKR/USD,BINANCE:runeusdt,BINANCE_FUTURES:runeusdt,FTX:RUNE/USDT,FTX:RUNE-PERP,FTX:RUNE/USD,BYBIT:RUNEUSDT,BINANCE:alphausdt,BINANCE_FUTURES:alphausdt,OKEX:ALPHA-USDT,OKEX:ALPHA-USDT-SWAP,FTX:ALPHA-PERP,FTX:ALPHA/USD,BINANCE:1inchusdt,BINANCE_FUTURES:1inchusdt,BITFINEX:1INCH:UST,OKEX:1INCH-USDT,OKEX:1INCH-USDT-SWAP,BITFINEX:1INCH:USD,COINBASE:1INCH-USD,FTX:1INCH-PERP,FTX:1INCH/USD,KRAKEN:1INCH/USD,HUOBI:1INCH-USDT,BINANCE:srmusdt,BINANCE_FUTURES:srmusdt,BYBIT:SRMUSDT,FTX:SRM/USDT,OKEX:SRM-USDT,OKEX:SRM-USDT-SWAP,FTX:SRM-PERP,FTX:SRM/USD,KRAKEN:SRM/USD,HUOBI:KSM-USDT,BINANCE:ksmusdt,BINANCE_FUTURES:ksmusdt,BITFINEX:KSMUST,BYBIT:KSMUSDT,OKEX:KSM-USDT,OKEX:KSM-USDT-SWAP,BITFINEX:KSMUSD,FTX:KSM-PERP,KRAKEN:KSM/USD,BINANCE:hotusdt,BINANCE_FUTURES:hotusdt,FTX:HOT-PERP,BYBIT:HOTUSDT,BINANCE:ftmusdt,BINANCE_FUTURES:ftmusdt,BITFINEX:FTMUST,BITFINEX:FTMF0:USTF0,BYBIT:FTMUSDT,OKEX:FTM-USDT,OKEX:FTM-USDT-SWAP,BINANCE_FUTURES:ftmusd_perp,BITFINEX:FTMUSD,FTX:FTM-PERP,HUOBI:FTM-USD,HUOBI:FTM-USDT,FTX:FTM/USD,FTX:DYDX-PERP,FTX:DYDX/USD,KRAKEN:DYDX/USD,BINANCE:dydxusdt,BINANCE_FUTURES:dydxusdt,BYBIT:DYDXUSDT,OKEX:DYDX-USDT,OKEX:DYDX-USDT-SWAP,HUOBI:DYDX-USDT,BINANCE:grtusdt,BINANCE_FUTURES:grtusdt,BITFINEX:GRTUST,OKEX:GRT-USDT,OKEX:GRT-USDT-SWAP,BITFINEX:GRTUSD,COINBASE:GRT-USD,FTX:GRT-PERP,FTX:GRT/USD,HUOBI:GRT-USDT,KRAKEN:GRT/USD,BINANCE:hntusdt,BINANCE_FUTURES:hntusdt,FTX:HNT/USDT,FTX:HNT-PERP,FTX:HNT/USD,BYBIT:HNTUSDT,BINANCE:atomusdt,BINANCE_FUTURES:atomusdt,BYBIT:ATOMUSDT,OKEX:ATOM-USDT,OKEX:ATOM-USDT-SWAP,COINBASE:ATOM-USD,FTX:ATOM-PERP,HUOBI:ATOM-USD,HUOBI:ATOM-USDT,KRAKEN:ATOM/USD,FTX:STEP-PERP,FTX:STEP/USD,BINANCE:yfiusdt,BINANCE_FUTURES:yfiusdt,BITFINEX:YFIUST,FTX:YFI/USDT,OKEX:YFI-USDT,OKEX:YFI-USDT-SWAP,BITFINEX:YFIUSD,COINBASE:YFI-USD,FTX:YFI-PERP,FTX:YFI/USD,HUOBI:YFI-USD,HUOBI:YFI-USDT,KRAKEN:YFI/USD,BINANCE:compusdt,BINANCE_FUTURES:compusdt,BITFINEX:COMP:UST,BITFINEX:COMPF0:USTF0,BYBIT:COMPUSDT,FTX:COMP/USDT,OKEX:COMP-USDT,OKEX:COMP-USDT-SWAP,BITFINEX:COMP:USD,COINBASE:COMP-USD,FTX:COMP-PERP,FTX:COMP/USD,HUOBI:COMP-USD,HUOBI:COMP-USDT,KRAKEN:COMP/USD,BINANCE_FUTURES:duskusdt,BITFINEX:DUSK:USD,BINANCE:duskusdt,BYBIT:DUSKUSDT,BINANCE_FUTURES:balusdt,BINANCE:balusdt,BITFINEX:BALUSD,BITFINEX:BALUST,COINBASE:BAL-USD,FTX:BAL-PERP,FTX:BAL/USD,FTX:BAL/USDT,KRAKEN:BAL/USD,OKEX:BAL-USDT,OKEX:BAL-USDT-SWAP,BINANCE:acausdt,BYBIT:ACAUSDT-SPOT,KRAKEN:ACA/USD,OKEX:ACA-USDT,BINANCE:glmrusdt,BYBIT:GLMRUSDT-SPOT,BYBIT:GLMRUSDT,FTX:GLMR-PERP,HUOBI:GLMR-USDT,KRAKEN:GLMR/USD,OKEX:GLMR-USDT,BYBIT:LOOKSUSDT-SPOT,BYBIT:LOOKSUSDT,FTX:LOOKS-PERP,FTX:LOOKS/USD,HUOBI:LOOKS-USDT,BINANCE_FUTURES:storjusdt,BYBIT:STORJUSDT,COINBASE:STORJ-USD,FTX:STORJ-PERP,FTX:STORJ/USD,BINANCE:storjusdt,KRAKEN:STORJ/USD,HUOBI:STORJ-USD,HUOBI:STORJ-USDT,OKEX:STORJ-USDT,OKEX:STORJ-USDT-SWAP,BINANCE:thetausdt,BINANCE_FUTURES:thetausdt,BINANCE_FUTURES:thetausd_perp,BITFINEX:THETA:USD,BITFINEX:THETA:UST,BYBIT:THETAUSDT-SPOT,BYBIT:THETAUSDT,FTX:THETA-PERP,OKEX:THETA-USDT,OKEX:THETA-USDT-SWAP,HUOBI:THETA-USD,HUOBI:THETA-USDT,BINANCE:nearusdt,BINANCE_FUTURES:nearusdt,BINANCE_FUTURES:nearusd_perp,BITFINEX:NEAR:USD,BITFINEX:NEAR:UST,BITFINEX:NEARF0:USTF0,BYBIT:NEARUSDT,FTX:NEAR-PERP,OKEX:NEAR-USDT,OKEX:NEAR-USDT-SWAP,HUOBI:NEAR-USD,HUOBI:NEAR-USDT,BINANCE:joeusdt,FTX:JOE/USD,OKEX:JOE-USDT,BINANCE:apeusdt,BINANCE_FUTURES:apeusdt,BITFINEX:APEUSD,BITFINEX:APEUST,BYBIT:APEUSDT-SPOT,BYBIT:APEUSDT,COINBASE:APE-USD,COINBASE:APE-USDT,FTX:APE-PERP,FTX:APE/USD,KRAKEN:APE/USD,HUOBI:APE-USDT,OKEX:APE-USDT,OKEX:APE-USDT-SWAP,BINANCE:agldusdt,BYBIT:AGLDUSDT-SPOT,COINBASE:AGLD-USDT,COINBASE:AGLD-USD,FTX:AGLD-PERP,FTX:AGLD/USD,HUOBI:AGLD-USDT,OKEX:AGLD-USDT,OKEX:AGLD-USDT-SWAP,BINANCE:kdausdt,BYBIT:KDAUSDT,OKEX:KDA-USDT,HUOBI:VRA-USDT,OKEX:VRA-USDT,BINANCE:imxusdt,BINANCE_FUTURES:imxusdt,BYBIT:IMXUSDT-SPOT,BYBIT:IMXUSDT,COINBASE:IMX-USD,COINBASE:IMX-USDT,FTX:IMX-PERP,FTX:IMX/USD,HUOBI:IMX-USDT,KRAKEN:IMX/USD,OKEX:IMX-USDT,OKEX:IMX-USDT-SWAP,BINANCE:oneusdt,BINANCE_FUTURES:oneusdt,BYBIT:ONEUSDT-SPOT,BYBIT:ONEUSDT,FTX:ONE-PERP,HUOBI:ONE-USDT,OKEX:ONE-USDT,BINANCE:sandusdt,BINANCE_FUTURES:sandusdt,BINANCE_FUTURES:sandusd_perp,BYBIT:SANDUSDT,FTX:SAND-PERP,FTX:SAND/USD,HUOBI:SAND-USDT,KRAKEN:SAND/USD,OKEX:SAND-USDT,OKEX:SAND-USDT-SWAP,BINANCE:manausdt,BINANCE_FUTURES:manausdt,BINANCE_FUTURES:manausd_perp,BYBIT:MANAUSDT-SPOT,BYBIT:MANAUSDT,COINBASE:MANA-USDC,COINBASE:MANA-USD,FTX:MANA-PERP,FTX:MANA/USD,KRAKEN:MANA/USD,OKEX:MANA-USDT,OKEX:MANA-USDT-SWAP,HUOBI:MANA-USDT,BINANCE:galausdt,BINANCE_FUTURES:galausdt,BINANCE_FUTURES:galausd_perp,BITFINEX:GALA:USD,BITFINEX:GALA:UST,BITFINEX:GALAF0:USTF0,BYBIT:GALAUSDT-SPOT,BYBIT:GALAUSDT,COINBASE:GALA-USDT,COINBASE:GALA-USD,FTX:GALA-PERP,FTX:GALA/USD,KRAKEN:GALA/USD,OKEX:GALA-USDT,OKEX:GALA-USDT-SWAP,BINANCE:luncusdt,BINANCE_FUTURES:luncusdt,BITFINEX:LUNCUSD,BITFINEX:LUNCUST,BYBIT:LUNCUSDT-SPOT,BYBIT:LUNCUSDT,COINBASE:LUNC-USD,COINBASE:LUNC-USDT,FTX:LUNC-PERP,FTX:LUNC/USD,KRAKEN:LUNC/USD,HUOBI:LUNC-USDT,HUOBI:luncusdt,OKEX:LUNC-USDT,OKEX:LUNC-USDT-SWAP,BITFINEX:LUNA:USD,BITFINEX:LUNA2:USD,BYBIT:LUNAUSDT-SPOT,KRAKEN:LUNA/USD,HUOBI:LUNA-USDT,HUOBI:lunausdt,OKEX:LUNA-USDT,OKEX:LUNA-USDT-SWAP,KRAKEN:LUNA2/USD,HUOBI:luncustc,BINANCE:lunausdt,BINANCE:luncbusd,BINANCE_FUTURES:1000luncbusd,BINANCE_FUTURES:luna2busd,BYBIT:LUNA2USDT,BINANCE_FUTURES:btcusd_perp,BITFINEX:BTCUSD,BITMEX:XBTUSD,BITSTAMP:btcusd,BYBIT:BTCUSD,COINBASE:BTC-USD,FTX:BTC-PERP,FTX:BTC/USD,HUOBI:BTC-USD,HUOBI:BTC-USDT,KRAKEN:XBT/USD,KRAKEN:XBT/EUR,KRAKEN:PI_XBTUSD,BINANCE:btcusdt,BINANCE_FUTURES:btcusdt,BITFINEX:BTCUST,BITFINEX:BTCF0:USTF0,BITMEX:XBTUSDT,BYBIT:BTCUSDT,COINBASE:BTC-USDT,FTX:BTC/USDT,HUOBI:btcusdt,KRAKEN:XBT/USDT,OKEX:BTC-USDT,OKEX:BTC-USDT-SWAP,OKEX:BTC-USD-SWAP,POLONIEX:USDT_BTC,DERIBIT:BTC-PERPETUAL,DERIBIT:BTC_USDC-PERPETUAL,BINANCE_FUTURES:ethusd_perp,BITFINEX:ETHUSD,BITMEX:ETHUSD,BITSTAMP:ethusd,BYBIT:ETHUSD,COINBASE:ETH-USD,FTX:ETH-PERP,FTX:ETH/USD,HUOBI:ETH-USD,HUOBI:ETH-USDT,KRAKEN:ETH/USD,KRAKEN:PI_ETHUSD,BINANCE:ethusdt,BINANCE_FUTURES:ethusdt,BITFINEX:ETHUST,BITFINEX:ETHF0:USTF0,BITMEX:ETHUSDT,BYBIT:ETHUSDT,COINBASE:ETH-USDT,FTX:ETH/USDT,HUOBI:ethusdt,KRAKEN:ETH/USDT,OKEX:ETH-USDT,OKEX:ETH-USDT-SWAP,OKEX:ETH-USD-SWAP,POLONIEX:USDT_ETH,DERIBIT:ETH-PERPETUAL,DERIBIT:ETH_USDC-PERPETUAL,BINANCE:solusdt,BINANCE_FUTURES:solusdt,BITFINEX:SOLUST,BITFINEX:SOLF0:USTF0,BITMEX:SOLUSDT,BYBIT:SOLUSDT,COINBASE:SOL-USDT,FTX:SOL/USDT,HUOBI:SOL-USD,HUOBI:SOL-USDT,OKEX:SOL-USDT,OKEX:SOL-USDT-SWAP,BINANCE_FUTURES:solusd_perp,BITFINEX:SOLUSD,BITMEX:SOLUSD,COINBASE:SOL-USD,FTX:SOL-PERP,FTX:SOL/USD,KRAKEN:SOL/USD,DERIBIT:SOL_USDC-PERPETUAL,BINANCE:filusdt,BINANCE_FUTURES:filusdt,BITFINEX:FILF0:USTF0,BYBIT:FILUSDT,OKEX:FIL-USDT,OKEX:FIL-USDT-SWAP,BINANCE_FUTURES:filusd_perp,BITFINEX:FILUSD,COINBASE:FIL-USD,FTX:FIL-PERP,HUOBI:FIL-USD,HUOBI:FIL-USDT,KRAKEN:FIL/USD,BINANCE:dotusdt,BINANCE_FUTURES:dotusdt,BITFINEX:DOTUST,BITFINEX:DOTF0:USTF0,BYBIT:DOTUSDT,COINBASE:DOT-USDT,KRAKEN:DOT/USDT,OKEX:DOT-USDT,OKEX:DOT-USDT-SWAP,BINANCE_FUTURES:dotusd_perp,BITFINEX:DOTUSD,BITMEX:DOTUSD,BYBIT:DOTUSD,COINBASE:DOT-USD,FTX:DOT-PERP,HUOBI:DOT-USD,HUOBI:DOT-USDT,KRAKEN:DOT/USD,BINANCE:dogeusdt,BINANCE_FUTURES:dogeusdt,BITFINEX:DOGE:UST,BITFINEX:DOGEF0:USTF0,BITMEX:DOGEUSDT,BYBIT:DOGEUSDT,COINBASE:DOGE-USDT,FTX:DOGE/USDT,OKEX:DOGE-USDT,OKEX:DOGE-USDT-SWAP,BINANCE_FUTURES:dogeusd_perp,BITFINEX:DOGE:USD,BITMEX:DOGEUSD,COINBASE:DOGE-USD,FTX:DOGE-PERP,FTX:DOGE/USD,HUOBI:DOGE-USD,HUOBI:DOGE-USDT,BINANCE:linkusdt,BINANCE_FUTURES:linkusdt,BITFINEX:LINK:UST,BITFINEX:LINKF0:USTF0,BYBIT:LINKUSDT,FTX:LINK/USDT,KRAKEN:LINK/USDT,OKEX:LINK-USDT,OKEX:LINK-USDT-SWAP,BINANCE_FUTURES:linkusd_perp,BITFINEX:LINK:USD,BITMEX:LINKUSD,BITSTAMP:linkusd,COINBASE:LINK-USD,FTX:LINK-PERP,FTX:LINK/USD,HUOBI:LINK-USD,HUOBI:LINK-USDT,KRAKEN:LINK/USD,BINANCE:bnbusdt,BINANCE_FUTURES:bnbusdt,BYBIT:BNBUSDT,FTX:BNB/USDT,BINANCE_FUTURES:bnbusd_perp,BITMEX:BNBUSD,FTX:BNB-PERP,FTX:BNB/USD,BINANCE:fttusdt,BITFINEX:FTTUST,BYBIT:FTTUSDT,FTX:FTT/USDT,BITFINEX:FTTUSD,BITSTAMP:fttusd,FTX:FTT-PERP,FTX:FTT/USD,BINANCE:kavausdt,BINANCE_FUTURES:kavausdt,FTX:KAVA-PERP,KRAKEN:KAVA/USD,BYBIT:KAVAUSDT,HUOBI:KAVA-USDT,BINANCE:aaveusdt,BINANCE_FUTURES:aaveusdt,BITFINEX:AAVEF0:USTF0,BYBIT:AAVEUSDT,FTX:AAVE/USDT,OKEX:AAVE-USDT,OKEX:AAVE-USDT-SWAP,BITFINEX:AAVE:USD,BITSTAMP:aaveusd,COINBASE:AAVE-USD,FTX:AAVE-PERP,FTX:AAVE/USD,HUOBI:AAVE-USD,HUOBI:AAVE-USDT,KRAKEN:AAVE/USD,BINANCE:xtzusdt,BINANCE_FUTURES:xtzusdt,BITFINEX:XTZUST,BITFINEX:XTZF0:USTF0,BYBIT:XTZUSDT,OKEX:XTZ-USDT,OKEX:XTZ-USDT-SWAP,BITFINEX:XTZUSD,COINBASE:XTZ-USD,FTX:XTZ-PERP,HUOBI:XTZ-USD,HUOBI:XTZ-USDT,KRAKEN:XTZ/USD,BINANCE:oceanusdt,BINANCE_FUTURES:oceanusdt,BITFINEX:OCEAN:UST,BITFINEX:OCEAN:USD,KRAKEN:OCEAN/USD,BINANCE:sushiusdt,BINANCE_FUTURES:sushiusdt,BITFINEX:SUSHIF0:USTF0,BYBIT:SUSHIUSDT,FTX:SUSHI/USDT,OKEX:SUSHI-USDT,OKEX:SUSHI-USDT-SWAP,BITFINEX:SUSHI:USD,BITSTAMP:sushiusd,COINBASE:SUSHI-USD,FTX:SUSHI-PERP,FTX:SUSHI/USD,HUOBI:SUSHI-USD,HUOBI:SUSHI-USDT,KRAKEN:SUSHI/USD,BINANCE:crvusdt,BINANCE_FUTURES:crvusdt,BYBIT:CRVUSDT,OKEX:CRV-USDT,OKEX:CRV-USDT-SWAP,BITSTAMP:crvusd,COINBASE:CRV-USD,FTX:CRV-PERP,FTX:CRV/USD,HUOBI:CRV-USD,HUOBI:CRV-USDT,KRAKEN:CRV/USD,BINANCE:algousdt,BINANCE_FUTURES:algousdt,BYBIT:ALGOUSDT,OKEX:ALGO-USDT,OKEX:ALGO-USDT-SWAP,BITSTAMP:algousd,COINBASE:ALGO-USD,FTX:ALGO-PERP,HUOBI:ALGO-USD,HUOBI:ALGO-USDT,KRAKEN:ALGO/USD,BINANCE:maticusdt,BINANCE_FUTURES:maticusdt,BITFINEX:MATICF0:USTF0,BYBIT:MATICUSDT,OKEX:MATIC-USDT,OKEX:MATIC-USDT-SWAP,BITFINEX:MATIC:USD,BITSTAMP:maticusd,COINBASE:MATIC-USD,FTX:MATIC-PERP,FTX:MATIC/USD,HUOBI:MATIC-USD,HUOBI:MATIC-USDT,KRAKEN:MATIC/USD,COINBASE:AMP-USD,BINANCE:ampusdt,BITSTAMP:ampusd,BINANCE:hbarusdt,BINANCE_FUTURES:hbarusdt,BYBIT:HBARUSDT,HUOBI:HBAR-USDT,OKEX:HBAR-USDT,BITSTAMP:hbarusd,FTX:HBAR-PERP,BINANCE:axsusdt,BINANCE_FUTURES:axsusdt,BINANCE_FUTURES:axsusd_perp,BITFINEX:AXSUSD,BITFINEX:AXSUST,BITFINEX:AXSF0:USTF0,BITMEX:AXSUSD,BITSTAMP:axsusd,BYBIT:AXSUSDT-SPOT,BYBIT:AXSUSDT,COINBASE:AXS-USDT,COINBASE:AXS-USD,FTX:AXS-PERP,FTX:AXS/USD,KRAKEN:AXS/USD,OKEX:AXS-USDT,OKEX:AXS-USDT-SWAP,HUOBI:AXS-USDT,BINANCE:roseusdt,BINANCE_FUTURES:roseusdt,BINANCE_FUTURES:roseusd_perp,BITFINEX:ROSE:USD,BITFINEX:ROSE:UST,BYBIT:ROSEUSDT,FTX:ROSE-PERP,HUOBI:ROSE-USDT,BINANCE:rndrusdt,BYBIT:RNDRUSDT-SPOT,BYBIT:RNDRUSDT,COINBASE:RNDR-USD,COINBASE:RNDR-USDT,FTX:RNDR-PERP,FTX:RNDR/USD,BINANCE:icpusdt,BINANCE_FUTURES:icpusdt,BITFINEX:ICPUST,BYBIT:ICPUSDT,COINBASE:ICP-USDT,OKEX:ICP-USDT,OKEX:ICP-USDT-SWAP,BITFINEX:ICPUSD,COINBASE:ICP-USD,FTX:ICP-PERP,HUOBI:ICP-USD,HUOBI:ICP-USDT,BITFINEX:SHIB:USD,BITFINEX:SHIB:UST,BITFINEX:SHIBF0:USTF0,FTX:SHIB-PERP,FTX:SHIB/USD,BINANCE:shibusdt,BITMEX:SHIBUSDT,BYBIT:SHIBUSDT-SPOT,COINBASE:SHIB-USDT,COINBASE:SHIB-USD,KRAKEN:SHIB/USD,BINANCE:api3usdt,BINANCE_FUTURES:api3usdt,BYBIT:API3USDT,COINBASE:API3-USD,COINBASE:API3-USDT,HUOBI:API3-USDT,OKEX:API3-USDT,OKEX:API3-USDT-SWAP,BINANCE:enjusdt,BINANCE_FUTURES:enjusdt,BITFINEX:ENJUSD,BITSTAMP:enjusd,BYBIT:ENJUSDT-SPOT,BYBIT:ENJUSDT,COINBASE:ENJ-USDT,COINBASE:ENJ-USD,FTX:ENJ-PERP,FTX:ENJ/USD,KRAKEN:ENJ/USD,HUOBI:ENJ-USDT,OKEX:ENJ-USDT,OKEX:ENJ-USDT-SWAP,BINANCE:xrpusdt,BINANCE_FUTURES:xrpusdt,BINANCE_FUTURES:xrpusd_perp,BITFINEX:XRPUSD,BITFINEX:XRPUST,BITFINEX:XRPF0:USTF0,BITMEX:XRPUSD,BITMEX:XRPUSDT,BITSTAMP:xrpusd,BYBIT:XRPUSD,BYBIT:XRPUSDT,COINBASE:XRP-USD,DERIBIT:XRP_USDC-PERPETUAL,FTX:XRP-PERP,FTX:XRP/USD,FTX:XRP/USDT,KRAKEN:XRP/USD,HUOBI:XRP-USD,HUOBI:XRP-USDT,OKEX:XRP-USDT,OKEX:XRP-USDT-SWAP"),e("SET_API_SUPPORTED_TIMEFRAMES","10,30,60,180,300,900,1260,1800,3600,7200,14400,21600,28800,43200,86400"),e("SET_VERSION","3.1.3"),e("SET_BUILD_DATE","7 jun"),e("SET_API_URL","https://api.aggr.trade/historical/{from}/{to}/{timeframe}/{markets}"),e("SET_PROXY_URL","https://cors.aggr.trade/")},setBooted:function(t){var e=t.commit,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e("SET_BOOTED",n)},showNotice:async function(t,e){var n=this,r=t.commit,i=t.getters;if("string"===typeof e&&(e={title:e}),e.id&&i.getNoticeById(e.id)){if(e.update)return this.dispatch("app/updateNotice",e);try{await this.dispatch("app/hideNotice",e.id)}catch(o){return}}e.id||(e.id=Nt()),"undefined"===typeof e.timeout&&(e.timeout="error"===e.type?1e4:3e3),e.timeout>0&&(e._timeout=setTimeout((function(){delete e._timeout,n.dispatch("app/hideNotice",e.id)}),e.timeout)),r("CREATE_NOTICE",e)},hideNotice:function(t,e){var n=t.commit,r=t.getters,i=r.getNoticeById(e);return i?(i._timeout&&clearTimeout(i._timeout),i._reject&&i._reject(),new Promise((function(t,e){i._reject=e,i._timeout=setTimeout((function(){n("REMOVE_NOTICE",i),delete i._reject,delete i._timeout,t()}),100)}))):Promise.resolve()},updateNotice:function(t,e){var n=t.commit,r=t.getters,i=t.state,o=r.getNoticeById(e.id),a=i.notices.indexOf(o);if(!o||-1===a)return Promise.resolve();n("UPDATE_NOTICE",{index:a,notice:e})},showSearch:function(t,e){var n=t.commit,r=t.state;r.showSearch||(n("TOGGLE_SEARCH",!0),"undefined"===typeof e&&r.focusedPaneId&&(e=r.focusedPaneId),Un.open(wi,{paneId:e}))},showTimeframe:function(t){var e=t.commit,n=t.state,r=t.rootState;!n.showSearch&&n.focusedPaneId&&r[n.focusedPaneId]&&(e("TOGGLE_SEARCH",!0),Un.open(Wi))},hideSearch:function(t){var e=t.commit,n=t.state;n.showSearch&&e("TOGGLE_SEARCH",!1)}},Qi={SET_BOOTED:function(t,e){t.isBooted=e},SET_EXCHANGES_READY:function(t){t.isExchangesReady=!0},EXCHANGE_UPDATED:function(t,e){r["default"].set(t.activeExchanges,e,!this.state.exchanges[e].disabled)},TOGGLE_LOADING:function(t,e){t.isLoading=!!e},CREATE_NOTICE:function(t,e){t.notices.push(e)},UPDATE_NOTICE:function(t,e){var n=e.index,i=e.notice;r["default"].set(t.notices,n,i)},REMOVE_NOTICE:function(t,e){var n=t.notices.indexOf(e);-1!==n&&t.notices.splice(n,1)},TOGGLE_SEARCH:function(t,e){t.showSearch="boolean"===typeof e?e:!t.showSearch},SET_OPTIMAL_DECIMAL:function(t,e){t.optimalDecimal=e},SET_API_URL:function(t,e){t.apiUrl=e},SET_PROXY_URL:function(t,e){t.proxyUrl=e},SET_API_SUPPORTED_PAIRS:function(t,e){t.historicalMarkets=e?"string"===typeof e?e.split(",").map((function(t){return t.trim()})):e:[]},SET_API_SUPPORTED_TIMEFRAMES:function(t,e){e&&e.trim()?t.apiSupportedTimeframes=e.split(","):t.apiSupportedTimeframes=[]},SET_VERSION:function(t,e){t.version=e},SET_BUILD_DATE:function(t,e){t.buildDate=e},SET_CURRENCIES:function(t,e){t.baseCurrency=e.base,t.baseCurrencySymbol=e.baseSymbol,t.quoteCurrency=e.quote,t.quoteCurrencySymbol=e.quoteSymbol},SET_FOCUSED_PANE:function(t,e){t.focusedPaneId=e}},Zi={getNoticeById:function(t){return function(e){for(var n=0;n<t.notices.length;n++)if(t.notices[n].id===e)return t.notices[n]}}},to={namespaced:!0,state:Yi,getters:Zi,actions:Ji,mutations:Qi},eo=n("3e57"),no=n("6502"),ro=n.n(no);function io(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=oo(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function oo(t,e){if(t){if("string"===typeof t)return ao(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ao(t,e):void 0}}function ao(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function so(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function co(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lo(t,e,n){return e&&co(t.prototype,e),n&&co(t,n),t}var uo={frequency:"Tone frequency of the note you want to play (Hz)",gain:"Determine how loud it should be (0 to 1 to avoid saturation)",fadeOut:"Duration of the OUT transition (in seconds, default is 1)",delay:"Wait n seconds before play the note",fadeIn:"Duration of the IN transition (in seconds, default is 0)",holdDuration:"Hold the note for n seconds (default 0)",osc:"Type of wave used for the note (can be triangle, square, sawtooth, sin etc)",startGain:"Initial gain (before fadeIn)",endGain:"Final gain (after fadeOut)",url:"Direct link to song (.mp3, .wav, .ogg) or name of already imported file",startTime:"Offset the start of the song at second n (to play only a part of it)"},ho={play:["frequency","gain","fadeOut","delay","fadeIn","holdDuration","osc","startGain","endGain"],playurl:["url","gain","holdDuration","delay","startTime","fadeIn","fadeOut","startGain","endGain"]},po={play:{frequency:329.63,gain:1,fadeOut:1,delay:0,fadeIn:0,holdDuration:0,osc:"'triangle'",startGain:.001,endGain:.001},playurl:{url:"'https://d7d3471nr939s.cloudfront.net/DeepHouseSessions_Noiz_SP/MP3/One+Shots/Bongo_08_73_SP.mp3?cb=6cfb91bb-f15f-432a-bfae-17ef22b22005'",gain:1,holdDuration:1,delay:0,startTime:0,fadeIn:0,fadeOut:0,startGain:1e-5,endGain:1e-5}},fo=function(){function t(){so(this,t),this.filtersOptions={HighPassFilter:{frequency:800,Q:10,gain:-10,filterType:"highpass",bypass:0},LowPassFilter:{frequency:1500,Q:1,gain:0,filterType:"lowpass",bypass:0},Compressor:{threshold:-1,makeupGain:1,attack:1,release:0,ratio:4,knee:5,automakeup:!0,bypass:0},Delay:{feedback:.33,delayTime:400},PingPongDelay:{wetLevel:.6,feedback:.01,delayTimeLeft:175,delayTimeRight:100},Chorus:{rate:1.5,feedback:.4,depth:.7,delay:.0045,bypass:0}},this.count=0,this.minTime=0}return lo(t,[{key:"connect",value:function(){var t=this;this.context||(this.minTime=0,this.count=0,r["default"].nextTick((function(){t.bindContext(),t.bindOutput()})))}},{key:"bindContext",value:function(){var t=this;this.context=new(window.AudioContext||window.webkitAudioContext);var e=!1;if("suspended"===this.context.state){var n=document.body;setTimeout((function(){n.focus()}),500);var r=function(){e||(e=!0,t.context&&ta.state.settings.useAudio&&t.context.resume(),setTimeout((function(){ta.state.settings.useAudio&&"suspended"===t.context.state?"suspended"===t.context.state&&ta.dispatch("app/showNotice",{id:"audio",type:"error",title:"Browser prevented audio from playing\nClick somewhere to resume."}):(ta.state.settings.useAudio&&ta.dispatch("app/showNotice",{id:"audio",type:"success",title:"Audio resumed successfully 🔊"}),window.removeEventListener("focus",r),window.removeEventListener("blur",r),n.removeEventListener("click",r)),e=!1}),500))}.bind(this);window.addEventListener("blur",r),window.addEventListener("focus",r),n.addEventListener("click",r)}else ta.dispatch("app/showNotice",{id:"audio",type:"success",title:"Audio enabled 🔊"});return this.context}},{key:"bindOutput",value:function(){if(this.context){this.output&&(this.output.disconnect(),this.output=null),this.tuna=new ro.a(this.context);var t=[];for(var e in this.filtersOptions)if(ta.state.settings.audioFilters[e]){var n=e;"HighPassFilter"!==e&&"LowPassFilter"!==e||(n="Filter"),t.push(new this.tuna[n](this.filtersOptions[e]))}if(this.gainNode=new this.tuna.Gain({gain:ta.state.settings.audioVolume}),t.push(this.gainNode),t.length){var r,i,o=io(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;r&&r.connect(a),r=a}}catch(s){o.e(s)}finally{o.f()}r.connect(this.context.destination),this.output=t[0]}else this.output=this.context.destination}}},{key:"setVolume",value:function(t){this.gainNode.gain.value=t}},{key:"fetchArrayBuffer",value:function(t){return fetch(t).then((function(t){return t.arrayBuffer()}))}},{key:"retrieveArrayBuffer",value:async function(t){var e=(await pn.getSound(t)).data,n=new FileReader;return new Promise((function(t){n.onloadend=function(e){return t(e.target.result)},n.readAsArrayBuffer(e)}))}},{key:"loadSoundBuffer",value:async function(e){if(t.savedAudioBuffers[e])return t.savedAudioBuffers[e];var n;n=-1!==e.indexOf("/")?await this.fetchArrayBuffer(e):await this.retrieveArrayBuffer(e),t.savedAudioBuffers[e]=await this.context.decodeAudioData(n)}},{key:"playurl",value:async function(e,n,r,i,o,a,s,c,l){var u=this;if("running"===this.context.state&&t.savedAudioBuffers[e]){var d=this.getNextTime(i);setTimeout((function(){var i=u.context.createGain(),h=u.context.createBufferSource();h.buffer=t.savedAudioBuffers[e],h.connect(i),i.connect(u.output),u.fade(h,i,d,n,c,a,r,s,l,o)}),1e3*(d-this.context.currentTime))}}},{key:"play",value:async function(t,e,n,r,i,o,a,s,c){var l=this;if("running"===this.context.state){var u=this.getNextTime(r);setTimeout((function(){if(l.context.currentTime){u=l.context.currentTime;var r=l.context.createOscillator(),d=l.context.createGain();r.frequency.value=t,r.type=a,d.connect(l.output),r.connect(d),l.fade(r,d,u,e,s,i,o,n,c)}}),1e3*(u-this.context.currentTime))}}},{key:"fade",value:function(t,e,n,r,i,o,a,s,c,l){var u=this;t.onended=function(){e.disconnect(),u.count--},o?(e.gain.setValueAtTime(i,n),e.gain.exponentialRampToValueAtTime(r,n+o),s&&(e.gain.setValueAtTime(r,n+o+a),setTimeout((function(){e.gain.exponentialRampToValueAtTime(c,n+o+a+s)}),1e3*(o+a)))):(e.gain.setValueAtTime(r,n),s&&e.gain.exponentialRampToValueAtTime(c,n+o+a+s)),"undefined"!==typeof l?t.start(n,l):t.start(n),t.stop(n+o+a+s)}},{key:"getNextTime",value:function(t){var e=0;this.minTime?(this.minTime=Math.max(this.minTime,this.context.currentTime),!t&&this.count&&(e=this.count>10?this.count>20?this.count>100?.01:.02:.04:.08)):this.minTime=this.context.currentTime;var n=this.minTime+e+t;return this.minTime+=e,this.count++,n}},{key:"reconnect",value:function(){this.disconnect(),this.connect()}},{key:"disconnect",value:function(){this.context&&"running"===this.context.state&&this.context.close(),this.output&&this.output.disconnect(),this.context=null,this.output=null,ta.dispatch("app/showNotice",{id:"audio",title:"Audio disabled 🔇"})}},{key:"buildAudioFunction",value:async function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];t="'use strict'; \n    var gain = Math.sqrt(ratio);\n    ".concat(t);var o=/(play|playurl)\(/g,a=null;null===r&&(r=1);try{do{if(a=o.exec(t)){var s=t.slice(a.index+a[0].length,Ht(t,a.index+a[0].length-1)),c=Gt(s);if(!c)throw new Error("Invalid argument(s) for "+a[0]+" function");for(var l=Object.values(po[a[1]]),u=0;u<l.length;u++){var d=l[u];if("undefined"!==typeof c[u]){if("string"===typeof c[u]){c[u]=c[u].trim();var h=/^('|").*('|")$/.test(c[u]),p=/^('|").*('|")$/.test(l[u]);h&&!p?c[u]=l[u]:!h&&p&&(c[u]="'".concat(c[u],"'"))}try{d=JSON.parse(c[u])}catch(v){d=c[u]}null!==d&&""!==d||(d=l[u])}c[u]=null===d?"null":d}if("play"===a[1]?+c[0]&&n&&1!==n&&(c[0]*=n):await this.loadSoundBuffer(c[0].slice(1,c[0].length-1)),r&&1!==r)for(var f=1;f<=2;f++)+c[1]?c[1]*=r:c[1]=r+"*("+c[1]+")";var m=c.join(", ");t=t.replace("("+s+")","("+m+")")}}while(a);return t=t.replaceAll("play(","audioService['play']("),t=t.replaceAll("playurl(","audioService['playurl']("),new Function("audioService","ratio",t)}catch(v){if(i)throw v;return ta.dispatch("app/showNotice",{id:"audio-script-error",type:"error",title:"Please check that ".concat(e," audio script is syntactically correct.")+(v.message?"<br>".concat(v.message):""),timeout:6e4}),new Function}}},{key:"playOnce",value:async function(t){await this.loadSoundBuffer(t),this.playurl(t,1,1,0,0,0,0,1e-5,1e-5)}}]),t}();fo.savedAudioBuffers={};var mo=new fo;function vo(t,e){return go(t)||bo(t,e)||_o(t,e)||yo()}function yo(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bo(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function go(t){if(Array.isArray(t))return t}function So(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=_o(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _o(t,e){if(t){if("string"===typeof t)return Co(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Co(t,e):void 0}}function Co(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var wo=Object.assign({_id:"settings"},eo),To={boot:async function(t){var e=t.state,n=t.dispatch;Ca.dispatch({op:"configureAggregator",data:{key:"calculateSlippage",value:e.calculateSlippage}}),Ca.dispatch({op:"configureAggregator",data:{key:"aggregationLength",value:e.aggregationLength}}),Ca.dispatch({op:"configureAggregator",data:{key:"preferQuoteCurrencySize",value:e.preferQuoteCurrencySize}}),n("updateCSS"),r["default"].nextTick((function(){e.useAudio?mo.connect():mo.disconnect()}))},setTextColor:function(t,e){var n=t.commit,r=t.dispatch;n("SET_CHART_COLOR",e),r("updateCSS")},setBackgroundColor:function(t,e){var n=t.commit,r=t.state,i=t.dispatch;n("SET_CHART_BACKGROUND_COLOR",e);var o=Q(et(e)),a=o>144?"light":"dark";a!==r.theme&&n("SET_CHART_THEME",a),r.textColor.length&&n("SET_CHART_COLOR",""),i("updateCSS")},updateCSS:function(t){var e=t.state,n=e.theme,r="light"===n?.5:1,i="dark"===n?1:-10,o="dark"===n?-1:1,a=et(e.backgroundColor),s=it(a,.015*r*i),c=et(s);document.documentElement.style.setProperty("--theme-background-base",e.backgroundColor),document.documentElement.style.setProperty("--theme-background-100",s),document.documentElement.style.setProperty("--theme-background-150",it(a,.05*r*i)),document.documentElement.style.setProperty("--theme-background-200",it(a,.075*r*i)),document.documentElement.style.setProperty("--theme-background-300",it(a,.1*r*i)),document.documentElement.style.setProperty("--theme-background-o75","rgba(".concat(c[0],", ").concat(c[1],",").concat(c[2],", .75)")),document.documentElement.style.setProperty("--theme-background-o20","rgba(".concat(c[0],", ").concat(c[1],",").concat(c[2],", .2)"));var l="light"!==n?"rgb(17,17,17)":"rgb(246,246,246)",u=e.textColor;u||(u="light"===n?"rgb(17,17,17)":"rgb(246,246,246)");var d=et(u);document.documentElement.style.setProperty("--theme-color-base",u),document.documentElement.style.setProperty("--theme-color-100",it(d,.1*o)),document.documentElement.style.setProperty("--theme-color-150",it(d,.2*o)),document.documentElement.style.setProperty("--theme-color-200",it(d,.5*o)),document.documentElement.style.setProperty("--theme-color-700",it(d,.9*o)),document.documentElement.style.setProperty("--theme-color-accent",nt(st(d,2))),document.documentElement.style.setProperty("--theme-color-o75","rgba(".concat(d[0],", ").concat(d[1],",").concat(d[2],", .75)")),document.documentElement.style.setProperty("--theme-color-o50","rgba(".concat(d[0],", ").concat(d[1],",").concat(d[2],", .5)")),document.documentElement.style.setProperty("--theme-color-o20","rgba(".concat(d[0],", ").concat(d[1],",").concat(d[2],", .2)")),document.documentElement.style.setProperty("--theme-color-inverse",l)},setAudioVolume:function(t,e){var n=t.commit,r=t.state;n("SET_AUDIO_VOLUME",e),mo.setVolume(e),e&&!r.useAudio?n("TOGGLE_AUDIO",!0):!e&&r.useAudio&&n("TOGGLE_AUDIO",!1)},saveSearchSelection:function(t,e){var n,r,i=t.commit,o=e.sort((function(t,e){return t.localeCompare(e)})),a=[],s=[],c=So(o);try{for(c.s();!(n=c.n()).done;){var l=n.value,u=Ie(l),d=vo(u,2),h=d[0],p=d[1],f=Oe(h,p,!0),m=f.local;-1===a.indexOf(m)&&a.push(m),-1===s.indexOf(h)&&s.push(h)}}catch(y){c.e(y)}finally{c.f()}var v=0;1===o.length?r=o[0]:1===s.length?(r=s[0]+":"+a.join("+"),v=o.length):(r=a.join("+"),v=o.length),i("SAVE_SEARCH_SELECTION",{label:r.length>32?r.slice(0,29)+"...":r,markets:o,count:v})}},ko={SET_QUOTE_AS_PREFERED_CURRENCY:function(t,e){t.preferQuoteCurrencySize=!!e,Ca.dispatch({op:"configureAggregator",data:{key:"preferQuoteCurrencySize",value:t.preferQuoteCurrencySize}})},TOGGLE_SLIPPAGE:function(t){var e=[!1,"bps","price"],n=Math.max(0,e.indexOf(t.calculateSlippage));t.calculateSlippage=e[(n+1)%e.length],Ca.dispatch({op:"configureAggregator",data:{key:"calculateSlippage",value:t.calculateSlippage}})},TOGGLE_AGGREGATION:function(t){var e=[0,1,10,100,1e3],n=Math.max(0,e.indexOf(t.aggregationLength));t.aggregationLength=e[(n+1)%e.length],Ca.dispatch({op:"configureAggregator",data:{key:"aggregationLength",value:t.aggregationLength}})},TOGGLE_ANIMATIONS:function(t){t.disableAnimations=!t.disableAnimations},TOGGLE_NORMAMIZE_WATERMARKS:function(t){t.normalizeWatermarks=!t.normalizeWatermarks},TOGGLE_SETTINGS_PANEL:function(t,e){var n=t.settings.indexOf(e);-1===n?t.settings.push(e):t.settings.splice(n,1)},TOGGLE_AUDIO:function(t,e){t.useAudio=!!e,t.useAudio?mo.connect():mo.disconnect()},SET_AUDIO_VOLUME:function(t,e){t.audioVolume=e},SET_AUDIO_FILTER:function(t,e){var n=e.id,r=e.value;t.audioFilters[n]=r,mo.reconnect()},SET_CHART_BACKGROUND_COLOR:function(t,e){t.backgroundColor=e},SET_CHART_THEME:function(t,e){t.theme=e},SET_CHART_COLOR:function(t,e){t.textColor=e},SET_TIMEZONE_OFFSET:function(t,e){t.timezoneOffset=+e||0},TOGGLE_AUTO_HIDE_HEADERS:function(t){t.autoHideHeaders=!t.autoHideHeaders},TOGGLE_SEARCH_TYPE:function(t,e){r["default"].set(t.searchTypes,e,!t.searchTypes[e])},TOGGLE_SEARCH_QUOTE:function(t,e){var n=e.key,i=e.value;r["default"].set(t.searchQuotes,n,i)},TOGGLE_SEARCH_EXCHANGE:function(t,e){r["default"].set(t.searchExchanges,e,"boolean"===typeof t.searchExchanges[e]&&!t.searchExchanges[e])},CLEAR_SEARCH_FILTERS:function(t){for(var e in t.searchTypes)"normalize"!==e&&(t.searchTypes[e]=!1);r["default"].set(t,"searchTypes",t.searchTypes),r["default"].set(t,"searchQuotes",{})},TOGGLE_FAVORITE_TIMEFRAME:function(t,e){"undefined"===typeof t.favoriteTimeframes[e]?r["default"].set(t.favoriteTimeframes,e,Wt(e)):r["default"].delete(t.favoriteTimeframes,e)},TOGGLE_ALERTS:function(t,e){t.alerts="undefined"!==typeof e?e:!t.alerts,e&&Oi()&&(t.alertsClick=!0)},SET_ALERTS_COLOR:function(t,e){t.alertsColor=e},SET_ALERTS_LINESTYLE:function(t,e){t.alertsLineStyle=Math.max(0,Math.min(4,e))},SET_ALERTS_LINEWIDTH:function(t,e){t.alertsLineWidth=Math.max(0,+e||0)},TOGGLE_ALERTS_CLICK:function(t){t.alertsClick=!t.alertsClick},SET_ALERT_SOUND:function(t,e){t.alertSound=e},SAVE_SEARCH_SELECTION:function(t,e){var n=t.previousSearchSelections.find((function(t){return t.label===e.label&&t.count===e.count}));n&&t.previousSearchSelections.splice(t.previousSearchSelections.indexOf(n),1),t.previousSearchSelections.unshift(e),t.previousSearchSelections.length>16&&t.previousSearchSelections.splice(16,t.previousSearchSelections.length-16)},CLEAR_SEARCH_HISTORY:function(t){t.previousSearchSelections=[]},REMOVE_SEARCH_HISTORY:function(t,e){var n=t.previousSearchSelections.find((function(t){return t.markets===e}));n&&t.previousSearchSelections.splice(t.previousSearchSelections.indexOf(n),1)}},Eo={namespaced:!0,state:wo,actions:To,mutations:ko};function Io(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Oo(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Oo(t,e){if(t){if("string"===typeof t)return Ao(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ao(t,e):void 0}}function Ao(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Po="binance,binance_futures,binance_us,bitfinex,bitmex,bitstamp,bybit,coinbase,deribit,dydx,ftx,hitbtc,huobi,kraken,okex,phemex,poloniex".split(",").map((function(t){return t.toUpperCase()})),xo=Po.reduce((function(t,e){return t[e]={disabled:/HITBTC|PHEMEX|BINANCE_US|SERUM|OKEX|HUOBI|BITSTAMP|KRAKEN|POLONIEX/.test(e)},t}),{_exchanges:[]});xo._id="exchanges";var Ro={getExchanges:function(t){return Object.keys(t).filter((function(t){return"INDEX"!==t&&!/^_/.test(t)}))}},Do={boot:async function(t){var e=t.dispatch;await e("prepareExchanges")},prepareExchanges:function(t){var e=t.state,n=t.getters,r=t.rootState;e._exchanges.splice(0,e._exchanges.length);var i,o=Io(n.getExchanges);try{for(o.s();!(i=o.n()).done;){var a=i.value;-1!==Po.indexOf(a)?(e._exchanges.push(a),e[a].fetched=!1,r.app.activeExchanges[a]=!e[a].disabled):(r.settings.searchExchanges[a]&&delete r.settings.searchExchanges[a],r.exchanges[a]&&delete r.exchanges[a])}}catch(s){o.e(s)}finally{o.f()}},requestExchangesProducts:async function(t){var e,n=t.getters,r=Io(n.getExchanges);try{for(r.s();!(e=r.n()).done;){var i=e.value;await Ee(i)}}catch(o){r.e(o)}finally{r.f()}},toggleExchange:async function(t,e){var n=t.commit,r=t.state,i=t.dispatch;n("TOGGLE_EXCHANGE",e),r[e].disabled?await i("disconnect",e):await i("connect",e),this.commit("app/EXCHANGE_UPDATED",e)},disconnect:async function(t,e){var n=t.rootState,r=new RegExp("^".concat(e,":"),"i"),i=Object.keys(n.panes.marketsListeners).filter((function(t){return r.test(t)}));await Ca.disconnect(i)},connect:async function(t,e){var n=t.rootState,r=new RegExp("^".concat(e,":"),"i"),i=Object.keys(n.panes.marketsListeners).filter((function(t){return r.test(t)}));await Ca.connect(i)},indexExchangeProducts:function(t,e){for(var n=e.exchangeId,r=e.symbols,i=[],o=0;o<r.length;o++)i.push(Oe(n,r[o]));be[n]=i}},Uo={TOGGLE_EXCHANGE:function(t,e){var n=!0;"boolean"===typeof t[e].disabled&&(n=!t[e].disabled),r["default"].set(t[e],"disabled",n)},SET_FETCHED:function(t,e){r["default"].set(t[e],"fetched",!0)}},No={namespaced:!0,getters:Ro,state:xo,actions:Do,mutations:Uo};function Bo(t){return Bo="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bo(t)}function Lo(t,e){return $o(t)||Mo(t,e)||Ho(t,e)||jo()}function jo(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Mo(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function $o(t){if(Array.isArray(t))return t}function Fo(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Ho(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ho(t,e){if(t){if("string"===typeof t)return Go(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Go(t,e):void 0}}function Go(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Xo=[{i:"chart",type:"chart",x:0,y:0,w:20,h:24},{i:"trades",type:"trades",x:20,y:0,w:4,h:20},{i:"liquidations",type:"trades",x:20,y:20,w:4,h:4}],Vo=[{i:"chart",type:"chart",x:0,y:0,w:24,h:16},{i:"trades",type:"trades",x:0,y:0,w:24,h:8}],qo=JSON.parse(JSON.stringify(At)),Ko={},zo={boot:async function(t){var e=t.state,n=t.dispatch;for(var r in e.layout||n("setupLayout"),e.marketsListeners)"number"===typeof e.marketsListeners[r]?delete e.marketsListeners[r]:e.marketsListeners[r].listeners=0},addPane:async function(t,e){var n=t.commit,i=t.dispatch,o=t.state;if(Pr[e.type]){var a=e.name||"",s=Bt(Lt(a||e.type),Object.keys(o.panes)),c={id:s,name:a,type:e.type,zoom:e.zoom,settings:e.settings,markets:e.markets||Object.keys(o.marketsListeners)};await $r(s,{},!0,c),n("ADD_PANE",c),i("appendPaneGridItem",{id:c.id,type:c.type,originalGridItem:e.originalGridItem}),i("refreshMarketsListeners"),r["default"].nextTick((function(){window.scrollTo(0,document.body.scrollHeight)}))}else this.dispatch("app/showNotice",{title:'Unrecognized pane type "'+e.type+'"',type:"error"})},removePane:async function(t,e){var n=this,r=t.commit,i=t.state,o=t.dispatch,a=t.rootState,s=i.panes[e];s&&(o("removePaneGridItems",e),r("REMOVE_PANE",e),o("refreshMarketsListeners"),a.app.focusedPaneId===e&&this.commit("app/SET_FOCUSED_PANE",null),await pn.removeState(e),setTimeout((function(){n.unregisterModule(e),localStorage.removeItem(e)})))},appendPaneGridItem:function(t,e){var n=t.commit,r=e.id,i=e.type,o=e.originalGridItem,a={i:r,type:i};o&&(a.w=o.w,a.h=o.h),n("ADD_GRID_ITEM",a)},removePaneGridItems:function(t,e){var n=t.commit,r=t.state,i=r.layout.find((function(t){return t.i===e}));if(i){var o=r.layout.indexOf(i);n("REMOVE_GRID_ITEM",o)}},refreshMarketsListeners:async function(t){var e=t.commit,n=t.state,r=t.rootState,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.markets,a=i.id,s=Object.keys(n.marketsListeners).reduce((function(t,e){return t[e]=n.marketsListeners[e].listeners,t}),{}),c={},l={};for(var u in n.panes){var d=n.panes[u].markets;if(!o||a&&u!==a||(d=o),"counters"===n.panes[u].type||"stats"===n.panes[u].type){var h=$t(d);l[h]||(l[h]=d)}var p,f=Fo(d);try{for(f.s();!(p=f.n()).done;){var m=p.value;if("undefined"===typeof c[m])if(n.marketsListeners[m])c[m]=n.marketsListeners[m],c[m].listeners=0;else{var v=Ie(m),y=Lo(v,2),b=y[0],g=y[1];r.exchanges[b].fetched||await Ee(b),c[m]=Oe(b,g,!0),c[m].listeners=0}"undefined"!==typeof c[m]&&c[m].listeners++}}catch(A){f.e(A)}finally{f.f()}}var S,_=Object.keys(c).concat(Object.keys(n.marketsListeners)).filter((function(t,e,n){return n.indexOf(t)===e})),C=[],w=[],T=Fo(_);try{for(T.s();!(S=T.n()).done;){var k=S.value,E=s[k],I=c[k]&&c[k].listeners;!E&&I?C.push(k):E&&!I&&(w.push(k),n.marketsListeners[k]&&delete n.marketsListeners[k])}}catch(A){T.e(A)}finally{T.f()}if(await Promise.all([Ca.connect(C),Ca.disconnect(w)]),Ca.dispatch({op:"updateBuckets",data:l}),e("SET_MARKETS_LISTENERS",c),o)for(var O in n.panes)a&&O!==a||e("SET_PANE_MARKETS",{id:O,markets:o})},setMarketsForAll:function(t,e){var n=t.dispatch;return n("refreshMarketsListeners",{markets:e})},setMarketsForPane:function(t,e){var n=t.dispatch,r=e.id,i=e.markets;return n("refreshMarketsListeners",{id:r,markets:i})},duplicatePane:function(t,e){var n=t.state,r=t.rootState,i=t.dispatch;if(n.panes[e]&&r[e]){var o=JSON.parse(JSON.stringify(n.panes[e]));o.settings=JSON.parse(JSON.stringify(r[e])),o.originalGridItem=n.layout.find((function(t){return t.i===e})),i("addPane",o),this.dispatch("app/showNotice",{title:"Duplicated pane ".concat(e)})}else this.dispatch("app/showNotice",{title:"Pane ".concat(e," doesn't exists"),type:"error"})},resetPane:async function(t,e){var n,r=t.state,i=t.rootState,o=e.id,a=e.data,s=JSON.parse(JSON.stringify(r.panes[o]));a&&"object"===Bo(a)&&(n=Object.assign({},i[o],a));var c=r.layout.find((function(t){return t.i===o})),l=c.type;c.type="div",this.unregisterModule(o),await pn.removeState(o),n&&await pn.saveState(o,n),await $r(o,{},!0,s),c.type=l},setZoom:function(t,e){var n=t.commit,r=t.dispatch,i=e.id,o=e.zoom;n("SET_PANE_ZOOM",{id:i,zoom:o}),r("refreshZoom",i)},refreshZoom:function(t,e){var n=t.state,r=n.panes[e].zoom?Math.max(.1,n.panes[e].zoom):1,i=document.getElementById(e);if(i){var o=i.parentElement;o.style.fontSize=r?r+"rem":"",r>=1?i.classList.add("-large"):i.classList.remove("-large"),r<1?i.classList.add("-small"):i.classList.remove("-small")}},setupLayout:function(t){var e=t.state,n=1,r=window.innerWidth;if(r>=768?(e.layout=Xo,r>=1920&&(n=1.25)):(e.layout=Vo,n=1.25,delete e.panes.liquidations),n>1)for(var i in e.panes)e.panes[i].zoom=n}},Wo={ADD_PANE:function(t,e){r["default"].set(t.panes,e.id,e)},REMOVE_PANE:function(t,e){r["default"].delete(t.panes,e)},ADD_GRID_ITEM:function(t,e){if("undefined"===typeof e.x){for(var n=oe,r=window.innerWidth<=500?16:window.innerWidth<768?8:4,i=e.w||r,o=e.h||r,a=t.layout.slice().sort((function(t,e){return t.x+2*t.y-(e.x+2*e.y)})),s=[],c=0;c<n;c+=i){var l,u=0,d=Fo(a);try{for(d.s();!(l=d.n()).done;){var h=l.value;(h.x>=c&&h.x<c+i||h.x+h.w>c&&h.x+h.w<c+i||h.x<c&&h.x+h.w>=c+i)&&(u=Math.max(u,h.y+h.h))}}catch(v){d.e(v)}finally{d.f()}s.push(u)}if(e.y=Math.min.apply(null,s),e.x=s.indexOf(Math.min.apply(null,s))*i,e.y>=n){var p,f=Fo(t.layout);try{for(f.s();!(p=f.n()).done;){var m=p.value;m.y+=o}}catch(v){f.e(v)}finally{f.f()}e.y=0,e.x=0}e.w=i,e.h=o}t.layout.push(e)},REMOVE_GRID_ITEM:function(t,e){t.layout.splice(e,1)},UPDATE_LAYOUT:function(t,e){t.layout=e},TOGGLE_LAYOUT:function(t){t.locked=!t.locked},SET_MARKETS_LISTENERS:function(t,e){t.marketsListeners=e},SET_PANE_MARKETS:function(t,e){var n=e.id,r=e.markets;t.panes[n].markets=r},SET_PANE_NAME:function(t,e){var n=e.id,r=e.name;t.panes[n].name=r},SET_PANE_ZOOM:function(t,e){var n=e.id,i=e.zoom;r["default"].set(t.panes[n],"zoom",i)}},Yo={namespaced:!0,state:qo,getters:Ko,actions:zo,mutations:Wo};r["default"].use(c["a"]);var Jo=new c["a"].Store({}),Qo={app:to,settings:Eo,exchanges:No,panes:Yo};async function Zo(t){for(var e in await $r("app",Qo["app"]),await Jo.dispatch("app/boot"),await $r("settings",Qo["settings"]),await Jo.dispatch("settings/boot"),await $r("panes",Qo["panes"]),await Jo.dispatch("panes/boot"),await $r("exchanges",Qo["exchanges"]),await Jo.dispatch("exchanges/boot"),Jo.state.panes.panes)await $r(e,{},!1,Jo.state.panes.panes[e]),await Mr(e);Jo.dispatch("app/setBooted"),await Jo.dispatch("panes/refreshMarketsListeners"),Jo.commit("app/SET_EXCHANGES_READY")}Jo.subscribe((function(t,e){var n=t.type.split("/")[0];e[n]&&"undefined"!==typeof e[n]._id&&Lr(e[n])}));var ta=Jo,ea=n("ba10"),na=n.n(ea);function ra(){return new Worker(n.p+"js/aggregator.493a402f.worker.js")}function ia(t){return ia="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ia(t)}function oa(t,e){return ua(t)||la(t,e)||sa(t,e)||aa()}function aa(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sa(t,e){if(t){if("string"===typeof t)return ca(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ca(t,e):void 0}}function ca(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function la(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function ua(t){if(Array.isArray(t))return t}function da(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ha(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pa(t,e,n){return e&&ha(t.prototype,e),n&&ha(t,n),t}function fa(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ma(t,e)}function ma(t,e){return ma=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ma(t,e)}function va(t){var e=ga();return function(){var n,r=Sa(t);if(e){var i=Sa(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ya(this,n)}}function ya(t,e){if(e&&("object"===ia(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ba(t)}function ba(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ga(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Sa(t){return Sa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Sa(t)}var _a=function(t){fa(n,t);var e=va(n);function n(){var t;return da(this,n),t=e.call(this),t.worker=new ra,t.worker.addEventListener("message",(function(e){t.emit(e.data.op,e.data.data,e.data.trackingId)})),t.listenUtilityEvents(),t}return pa(n,[{key:"listenUtilityEvents",value:function(){var t=this;this.once("hello",(async function(){await pn.initialize();var t=await pn.getCurrentWorkspace();pn.setCurrentWorkspace(t)})),this.on("price",(function(e){var n=e.market,r=e.price;ge[n]=Pe(r),t._normalizeDecimalsTimeout&&clearTimeout(t._normalizeDecimalsTimeout),t._normalizeDecimalsTimeout=setTimeout(t.normalizeDecimals.bind(t),1e3)})),this.on("getExchangeProducts",(async function(e,n){var r=e.exchangeId,i=e.endpoints,o=e.forceFetch,a=await Te(r,i,o);t.dispatch({op:"getExchangeProducts",data:{exchangeId:r,data:a},trackingId:n})}))}},{key:"dispatch",value:function(t){this.worker.postMessage(t)}},{key:"dispatchAsync",value:function(t){var e=this,n=Nt(8);return new Promise((function(r){var i=function n(i){var o=i.data;o.trackingId===t.trackingId&&(e.worker.removeEventListener("message",n),r(o.data))};e.worker.addEventListener("message",i),t.trackingId=n,e.worker.postMessage(t)}))}},{key:"connect",value:async function(t){if(t.length){for(var e=0;e<t.length;e++){var n=Ie(t[e]),r=oa(n,1),i=r[0];if(ta.state.exchanges[i].disabled){var o=[];for(var a in ta.state.panes.panes)-1!==ta.state.panes.panes[a].markets.indexOf(t[e])&&o.push(a);t.splice(e,1),e--}}await this.dispatchAsync({op:"connect",data:t})}}},{key:"disconnect",value:async function(t){t.length&&await this.dispatchAsync({op:"disconnect",data:t})}},{key:"normalizeDecimals",value:function(){this._normalizeDecimalsTimeout=null;var t={};for(var e in ge)if(ta.state.panes.marketsListeners[e]){var n=ta.state.panes.marketsListeners[e].local.replace("USDT","USD").replace("USDC","USD");t[n]||(t[n]=[]),t[n].push(ge[e])}for(var r in ge)if(ta.state.panes.marketsListeners[r]){var i=ke(ta.state.panes.marketsListeners[r].local);if(t[i]){var o=Math.round(t[i].reduce((function(t,e){return t+e}))/t[i].length);ge[r]=ge[i]=o}}this.emit("decimals")}}]),n}(na.a),Ca=new _a,wa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition-height",{staticClass:"notices",attrs:{name:t.transitionGroupName,tag:"div"}},t._l(t.notices,(function(e){return n("div",{key:e.id,staticClass:"notice",class:"-"+e.type},[n("div",{staticClass:"notice__wrapper",on:{click:function(n){return t.$store.dispatch("app/hideNotice",e.id)}}},[e.icon?n("i",{staticClass:"notice__icon",class:e.icon}):t._e(),e.html?n("div",{staticClass:"notice__title",domProps:{innerHTML:t._s(e.title)}}):n("div",{staticClass:"notice__title",domProps:{textContent:t._s(e.title)}})])])})),0)},Ta=[];function ka(t){return ka="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ka(t)}function Ea(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ia(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Oa(t,e,n){return e&&Ia(t.prototype,e),n&&Ia(t,n),t}function Aa(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pa(t,e)}function Pa(t,e){return Pa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Pa(t,e)}function xa(t){var e=Ua();return function(){var n,r=Na(t);if(e){var i=Na(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ra(this,n)}}function Ra(t,e){if(e&&("object"===ka(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Da(t)}function Da(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ua(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Na(t){return Na=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Na(t)}var Ba=function(t){Aa(n,t);var e=xa(n);function n(){return Ea(this,n),e.apply(this,arguments)}return Oa(n,[{key:"notices",get:function(){return this.$store.state.app.notices}},{key:"disableAnimations",get:function(){return this.$store.state.settings.disableAnimations}},{key:"transitionGroupName",get:function(){return this.disableAnimations?null:"slide-notice"}},{key:"onButtonClick",value:function(t){var e=!0;"function"===typeof t.button.click&&(e=t.button.click()),!1!==e&&this.$store.dispatch("app/hideNotice",t.id)}}]),n}(s["c"]);Ba=Object(a["a"])([Object(s["a"])({components:{TransitionHeight:si},name:"Notices"})],Ba);var La=Ba,ja=La,Ma=Object(R["a"])(ja,wa,Ta,!1,null,null,null),$a=Ma.exports,Fa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menu",class:{"-open":t.open},attrs:{id:"menu"}},[n("button",{staticClass:"menu__button btn",on:{click:t.toggleMenu}},[n("i",{staticClass:"icon-menu"})]),t.open?n("div",{staticClass:"menu__actions",on:{click:t.onClickItem}},[n("button",{staticClass:"menu-action btn",attrs:{type:"button"},on:{click:t.showSettings}},[n("span",{staticClass:"mr4"},[t._v("Settings")]),n("i",{staticClass:"icon-cog"})]),n("button",{staticClass:"menu-action btn",attrs:{type:"button"},on:{click:t.toggleFullscreen}},[n("span",{staticClass:"mr4",domProps:{textContent:t._s(t.isFullscreen?"exit":"fullscreen")}}),n("i",{staticClass:"icon-enlarge"})]),n("tippy",{attrs:{to:"MenuVolume",interactive:!0,delay:[0,400],distance:20,placement:"left",theme:"transparent"}},[n("div",{staticClass:"mt4 mb4 text-nowrap"},[n("slider",{staticStyle:{width:"100px"},attrs:{min:0,max:10,step:.1,label:!0,editable:!1,value:t.audioVolume},on:{input:function(e){return t.$store.dispatch("settings/setAudioVolume",e)},reset:function(e){return t.$store.dispatch("settings/setAudioVolume",1)}}})],1)]),n("button",{staticClass:"menu-action btn -volume",attrs:{type:"button",name:"MenuVolume"},on:{click:t.toggleAudio}},[n("span",{staticClass:"mr4"},[t._v("Audio")]),t.useAudio?n("i",{staticClass:"icon-volume-medium",class:{"icon-volume-high":t.audioVolume>1}}):n("i",{staticClass:"icon-volume-off"})]),n("dropdown",{staticClass:"menu-action",attrs:{options:t.paneTypes,placeholder:"tf.",selectionClass:"-green"},on:{output:t.addPane,click:function(t){t.stopPropagation()}},scopedSlots:t._u([{key:"selection",fn:function(){return[n("i",{staticClass:"icon-dashboard -center mr16"}),n("span",{staticClass:"mr4"},[t._v("Pane")]),n("i",{staticClass:"icon-plus"})]},proxy:!0},{key:"option",fn:function(e){var r=e.value;return[n("span",[n("div",{staticClass:"dropdown-option__title"},[t._v(t._s(r.title))]),n("div",{staticClass:"dropdown-option__description"},[t._v(t._s(r.description))])]),n("i",{staticClass:"icon-plus mr4"})]}}],null,!1,2831921745)}),n("button",{staticClass:"menu-action btn",attrs:{type:"button"},on:{click:function(e){return t.$store.dispatch("app/showSearch",null)}}},[n("span",{staticClass:"mr4"},[t._v("Search")]),n("i",{staticClass:"icon-search"})])],1):t._e()])},Ha=[],Ga=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{staticClass:"-sticky-footer",attrs:{contentClass:"settings"},on:{clickOutside:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",[n("div",{staticClass:"title"},[t._v("Settings")]),t.hits?n("div",{staticClass:"subtitle"},[n("i",{staticClass:"icon-bolt"}),t._v(" "),n("code",{domProps:{textContent:t._s(t.hits)}}),t._v(" messages /s")]):t._e()]),n("div",{staticClass:"column -center"})]},proxy:!0}])},[t.workspace?n("section",{staticClass:"section"},[t.settings.indexOf("workspaces")>-1?n("div",[n("div",{staticClass:"column"},[n("dropdown",{staticClass:"w-100",attrs:{options:t.activeWorkspaceMenu,selectionClass:"-blue -large -cases w-100 column"},scopedSlots:t._u([{key:"selection",fn:function(){return[n("i",{staticClass:"icon-dashboard -center mr16"}),n("div",{staticClass:"-fill text-left"},[n("div",{staticClass:"column"},[n("div",{staticClass:"-center"},[t._v(t._s(t.workspace.name))]),n("small",{staticClass:"-center"},[n("code",[t._v(t._s(t.workspace.id))])]),n("div",{staticClass:"-fill"})]),n("small",{staticClass:"text-muted"},[t._v("created "+t._s(t.workspace.createdAt)+" ago")])]),n("i",{staticClass:"icon-cog"})]},proxy:!0},{key:"option",fn:function(e){var r=e.value;return[n("i",{class:"icon-"+r.icon}),n("span",[t._v(t._s(r.label))])]}}],null,!1,1710021158)}),n("dropdown",{attrs:{options:t.workspacesToolsMenu,selectionClass:"-text"},scopedSlots:t._u([{key:"selection",fn:function(){return[n("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-plus",attrs:{title:"New template"}})]},proxy:!0},{key:"option",fn:function(e){var r=e.value;return[n("i",{class:"icon-"+r.icon}),n("span",[t._v(t._s(r.label))])]}}],null,!1,4140538554)})],1),t.workspaces.length?n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",[t._v("Name")]),n("th",[t._v("Use")])])]),n("tbody",t._l(t.workspaces,(function(e){return n("tr",{key:e.id,staticClass:"option -action",on:{click:function(n){return t.openWorkspace(e.id)}}},[n("td",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"right"},expression:"{ placement: 'right' }"}],staticClass:"table-input table-ellipsis text-nowrap",attrs:{title:e.name},domProps:{textContent:t._s(e.name)}}),n("td",{staticClass:"table-input table-min"},[t._v(t._s(t.ago(e.updatedAt))+" ago")]),n("td",{staticClass:"table-action -hover"},[n("button",{staticClass:"btn -small",on:{click:function(n){return n.stopPropagation(),t.openWorkspace(e.id,!0)}}},[n("i",{staticClass:"icon-external-link-square-alt"})])]),n("td",{staticClass:"table-action -hover"},[n("button",{staticClass:"btn -red -small",on:{click:function(n){return n.stopPropagation(),t.removeWorkspace(e.id)}}},[n("i",{staticClass:"icon-trash"})])])])})),0)]):t._e()]):t._e(),n("div",{staticClass:"section__title",on:{click:function(e){return t.$store.commit("settings/TOGGLE_SETTINGS_PANEL","workspaces")}}},[t._v(" Workspaces "),n("small",[t._v("your templates")]),n("i",{staticClass:"icon-up-thin"})])]):t._e(),n("section",{staticClass:"section"},[t.settings.indexOf("list")>-1?n("div",{staticClass:"settings-trades"},[n("div",{staticClass:"form-group column mb8"},[n("label",{staticClass:"checkbox-control -aggr -auto flex-grow-1"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:!0},on:{click:function(e){return e.preventDefault(),t.$store.commit("settings/TOGGLE_AGGREGATION")}}}),n("div",{attrs:{on:t.aggregationLength+"ms",off:"No aggregation"}}),t.aggregationLength?n("span",[t._v(t._s(t.aggregationLength)+"ms aggregation")]):n("span",[t._v("No aggregation")])])]),n("div",{staticClass:"form-group mb8"},[n("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"left"},expression:"{ placement: 'left' }"}],staticClass:"checkbox-control -slippage",attrs:{title:"price"===t.calculateSlippage?"Show slippage in $":"bps"===t.calculateSlippage?"Show slippage in basis point (bps)":"Slippage disabled"}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.calculateSlippage},on:{change:function(e){return t.$store.commit("settings/TOGGLE_SLIPPAGE")}}}),n("div"),"price"===t.calculateSlippage?n("span",[t._v(" Calculate slippage in price change ("),n("i",{staticClass:"icon-dollar"}),t._v(") ")]):t._e(),"bps"===t.calculateSlippage?n("span",[t._v(" Calculate slippage in bps "),n("i",{staticClass:"icon-bps"})]):t._e(),t.calculateSlippage?t._e():n("span",[t._v("Do not show slippage")])])]),n("div",{staticClass:"form-group"},[n("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"left"},expression:"{ placement: 'left' }"}],staticClass:"checkbox-control checkbox-control-input -auto",attrs:{title:"Size display preference"}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.preferQuoteCurrencySize},on:{change:function(e){return t.$store.commit("settings/SET_QUOTE_AS_PREFERED_CURRENCY",e.target.checked)}}}),n("span",[t._v("Size in")]),n("div",{attrs:{on:"quote currency",off:"base currency"}}),n("span",[t._v("("),n("i",{class:t.preferQuoteCurrencySize?"icon-quote":"icon-base"}),t._v(")")])])])]):t._e(),n("div",{staticClass:"section__title",on:{click:function(e){return t.$store.commit("settings/TOGGLE_SETTINGS_PANEL","list")}}},[t._v(" Trades "),n("small",[t._v("aggregation, slippage, currency")]),n("i",{staticClass:"icon-up-thin"})])]),n("section",{staticClass:"section"},[t.settings.indexOf("audio")>-1?n("audio-settings"):t._e(),n("div",{staticClass:"section__title",on:{click:function(e){return t.$store.commit("settings/TOGGLE_SETTINGS_PANEL","audio")}}},[t._v(" Audio "),n("small",[t._v("main volume")]),n("i",{staticClass:"icon-up-thin"})])],1),n("section",{staticClass:"section"},[t.settings.indexOf("chart")>-1?n("div",{staticClass:"settings-chart"},[n("div",{staticClass:"form-group mb16"},[n("label",{staticClass:"checkbox-control flex-left"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:!!t.timezoneOffset},on:{change:function(e){t.$store.commit("settings/SET_TIMEZONE_OFFSET",t.timezoneOffset?0:6e4*(new Date).getTimezoneOffset()*-1)}}}),n("div"),n("span",[t._v("Show local time")])])]),n("div",{staticClass:"form-group column mb8"},[n("verte",{attrs:{value:t.backgroundColor},on:{input:function(e){e!==t.backgroundColor&&t.$store.dispatch("settings/setBackgroundColor",e)}}}),n("label",{staticClass:"-fill -center ml8"},[t._v("Background color")])],1),n("div",{staticClass:"form-group column mb8"},[n("verte",{attrs:{picker:"square",menuPosition:"left",model:"rgb",value:t.textColor},on:{input:function(e){e!==t.textColor&&t.$store.dispatch("settings/setTextColor",e)}}}),n("label",{staticClass:"-fill -center ml8",attrs:{for:""}},[t._v("Text color "),n("a",[t.textColor?n("i",{staticClass:"icon-cross text-small",on:{click:function(e){return t.$store.commit("settings/SET_CHART_COLOR",null)}}}):t._e()])])],1)]):t._e(),n("div",{staticClass:"section__title",on:{click:function(e){return t.$store.commit("settings/TOGGLE_SETTINGS_PANEL","chart")}}},[t._v(" Chart "),n("small",[t._v("background color, timezone")]),n("i",{staticClass:"icon-up-thin"})])]),n("section",{staticClass:"section"},[t.settings.indexOf("exchanges")>-1?n("div",{staticClass:"form-group"},[n("div",{staticClass:"settings-exchanges"},t._l(t.exchanges,(function(t){return n("Exchange",{key:t,attrs:{id:t}})})),1)]):t._e(),n("div",{staticClass:"section__title",on:{click:function(e){return t.$store.commit("settings/TOGGLE_SETTINGS_PANEL","exchanges")}}},[t._v(" Exchanges "),n("small",[t._v("enable/disable exchange globally")]),n("i",{staticClass:"icon-up-thin"})])]),n("section",{staticClass:"section"},[t.settings.indexOf("other")>-1?n("other-settings"):t._e(),n("div",{staticClass:"section__title",on:{click:function(e){return t.$store.commit("settings/TOGGLE_SETTINGS_PANEL","other")}}},[t._v(" Other "),n("i",{staticClass:"icon-up-thin"})])],1),n("footer",{staticClass:"section mt16 settings__footer"},[n("div",{staticClass:"form-group"},[t.version?n("div",{staticClass:"column"},[n("div",{staticClass:"-grow"},[n("button",{staticClass:"btn -text pl0"},[t._v(" v"+t._s(t.version)+" "),n("sup",{staticClass:"version-date"},[t._v(t._s(t.buildDate))])])]),n("a",{staticClass:"btn -text",attrs:{href:"https://github.com/Tucsky/aggr",target:"_blank"}},[t._v("github")]),n("i",{staticClass:"pipe -center"},[t._v("|")]),n("span",[n("dono-dropdown",{staticClass:"-top -text-left"})],1),n("i",{staticClass:"pipe -center"},[t._v("|")]),n("span",[n("dropdown",{attrs:{options:t.databaseMenu,placeholder:"Reset",selectionClass:"-text -arrow"},scopedSlots:t._u([{key:"option",fn:function(e){var r=e.value;return[n("i",{staticClass:"-fill",class:"icon-"+r.icon}),n("span",{staticClass:"ml4"},[t._v(t._s(r.label))])]}}],null,!1,2384376222)})],1)]):t._e()])])])},Xa=[],Va=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"settings-exchange",class:{"-active":t.active,"-enabled":!t.settings.disabled,"-expanded":t.expanded}},[n("div",{staticClass:"settings-exchange__header",on:{click:t.toggleExchange}},[n("div",{staticClass:"settings-exchange__name"},[n("span",[t._v(t._s(t.name))])]),n("div",{staticClass:"settings-exchange__controls"},[n("button",{staticClass:"settings-exchange__more",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.expanded=!t.expanded}}},[n("i",{staticClass:"icon-down"})])])]),t.expanded?n("div",{staticClass:"settings-exchange__detail"},[t.markets.length?n("div",{staticClass:"form-group"},[n("small",{staticClass:"mb4 d-block"},[t._v("Connections")]),n("div",t._l(t.markets,(function(e){return n("div",{key:e.id,staticClass:"d-flex"},[n("div",{staticClass:"-fill -center"},[t._v(t._s(e.id))])])})),0)]):t._e()]):t._e()])},qa=[];function Ka(t){return Ka="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ka(t)}function za(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ya(t,e,n){return e&&Wa(t.prototype,e),n&&Wa(t,n),t}function Ja(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qa(t,e)}function Qa(t,e){return Qa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Qa(t,e)}function Za(t){var e=ns();return function(){var n,r=rs(t);if(e){var i=rs(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ts(this,n)}}function ts(t,e){if(e&&("object"===Ka(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return es(t)}function es(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ns(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function rs(t){return rs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},rs(t)}var is=function(t){Ja(n,t);var e=Za(n);function n(){var t;return za(this,n),t=e.apply(this,arguments),t.expanded=!1,t.prices={},t}return Ya(n,[{key:"mounted",value:function(){Ca.on("prices",this.updateMarketsPrices)}},{key:"beforeDestroy",value:function(){Ca.off("prices",this.updateMarketsPrices)}},{key:"updateMarketsPrices",value:function(t){this.prices=t}},{key:"name",get:function(){return this.id.replace(/[\W_]+/g," ")}},{key:"settings",get:function(){return this.$store.state.exchanges[this.id]}},{key:"markets",get:function(){var t=this;return Object.values(this.$store.state.panes.marketsListeners).filter((function(e){return e.exchange===t.id}))}},{key:"active",get:function(){return this.markets.length}},{key:"toggleExchange",value:async function(){await this.$store.dispatch("exchanges/toggleExchange",this.id)}},{key:"formatAmount",value:function(t){return Ae(t)}}]),n}(s["c"]);is=Object(a["a"])([Object(s["a"])({name:"Exchange",components:{Slider:U},props:["id"]})],is);var os=is,as=os,ss=(n("15a7"),Object(R["a"])(as,Va,qa,!1,null,null,null)),cs=ss.exports,ls=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dropdown",{attrs:{options:t.donationMenu,placeholder:t.label,selectionClass:"-text -arrow"},scopedSlots:t._u([{key:"option",fn:function(e){var r=e.value;return[n("i",{staticClass:"-fill",class:"icon-"+r.icon}),n("span",{staticClass:"ml4"},[t._v(t._s(r.label))])]}}])})},us=[];function ds(t){return ds="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ds(t)}function hs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ps(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fs(t,e)}function fs(t,e){return fs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},fs(t,e)}function ms(t){var e=bs();return function(){var n,r=gs(t);if(e){var i=gs(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return vs(this,n)}}function vs(t,e){if(e&&("object"===ds(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ys(t)}function ys(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bs(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function gs(t){return gs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},gs(t)}var Ss=function(t){ps(n,t);var e=ms(n);function n(){var t;return hs(this,n),t=e.apply(this,arguments),t.donationMenu=[{label:"with Bitcoin",icon:"bitcoin",click:function(){return window.open("bitcoin:3PK1bBK8sG3zAjPBPD7g3PL14Ndux3zWEz")}},{label:"with Monero",icon:"xmr",click:function(){return window.open("monero:48NJj3RJDo33zMLaudQDdM8G6MfPrQbpeZU2YnRN2Ep6hbKyYRrS2ZSdiAKpkUXBcjD2pKiPqXtQmSZjZM7fC6YT6CMmoX6")}},{label:"with other coin",icon:"COINBASE",click:function(){return window.open("https://commerce.coinbase.com/checkout/c58bd003-5e47-4cfb-ae25-5292f0a0e1e8")}}],t}return n}(s["c"]);Ss=Object(a["a"])([Object(s["a"])({props:{label:{default:"donate"}}})],Ss);var _s=Ss,Cs=_s,ws=Object(R["a"])(Cs,ls,us,!1,null,null,null),Ts=ws.exports,ks=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"settings-audio",class:{active:t.useAudio}},[n("div",{staticClass:"-fill"},[n("div",{staticClass:"column"},[n("div",{staticClass:"form-group -tight"},[n("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"checkbox-control checkbox-control-input flex-right",attrs:{title:"Enable audio"}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.useAudio},on:{change:function(e){return t.$store.commit("settings/TOGGLE_AUDIO",e.target.checked)}}}),n("div")])]),n("div",{staticClass:"form-group -fill -center"},[n("slider",{attrs:{min:0,max:10,step:.1,editable:!1,label:!0,value:t.audioVolume},on:{input:function(e){return t.$store.dispatch("settings/setAudioVolume",e)},reset:function(e){return t.$store.dispatch("settings/setAudioVolume",1)}}})],1)]),t.useAudio?n("div",{staticClass:"mt8"},t._l(t.filters,(function(e){return n("div",{key:e,staticClass:"btn -text px0"},[n("label",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"checkbox-control checkbox-control-input -auto",attrs:{title:t.filtersDescriptions[e]}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.$store.state.settings.audioFilters[e]},on:{change:function(n){return t.$store.commit("settings/SET_AUDIO_FILTER",{id:e,value:n.target.checked})}}}),n("div",{attrs:{on:e,off:e}})])])})),0):t._e()])])},Es=[];function Is(t){return Is="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Is(t)}function Os(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function As(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ps(t,e,n){return e&&As(t.prototype,e),n&&As(t,n),t}function xs(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rs(t,e)}function Rs(t,e){return Rs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Rs(t,e)}function Ds(t){var e=Bs();return function(){var n,r=Ls(t);if(e){var i=Ls(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Us(this,n)}}function Us(t,e){if(e&&("object"===Is(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ns(t)}function Ns(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bs(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Ls(t){return Ls=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ls(t)}var js=function(t){xs(n,t);var e=Ds(n);function n(){var t;return Os(this,n),t=e.apply(this,arguments),t.filters=[],t.filtersDescriptions={HighPassFilter:"High-Pass Filter passes frequencies above its cutoff frequency and attenuates frequencies below its cutoff frequency",LowPassFilter:"Low-Pass Filter passes frequencies below its cutoff frequency and attenuates frequencies above its cutoff frequency. This effect can therefore be used to reduce high pitched noise",Compressor:"A compressor has the ability to reduce the difference in order for the quiet notes to be louder and the peak notes to be quieter",Delay:"A delay effect is similar to an echo, in that the sound is repeated one or more times after the original sound",PingPongDelay:"Ping Pong Delay is a time-sensitive delay that pans the delay to the left and right speakers one after the other",Chorus:"An equal mix of the wet and dry signal is used with the wet signal being delayed and pitch modulated"},t}return Ps(n,[{key:"useAudio",get:function(){return this.$store.state.settings.useAudio}},{key:"audioVolume",get:function(){return this.$store.state.settings.audioVolume}},{key:"created",value:function(){this.filters=Object.keys(mo.filtersOptions)}}]),n}(s["c"]);js=Object(a["a"])([Object(s["a"])({components:{Slider:U},name:"AudioSettings"})],js);var Ms=js,$s=Ms,Fs=(n("38da"),Object(R["a"])($s,ks,Es,!1,null,"50d123a8",null)),Hs=Fs.exports,Gs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"form-group mb8"},[n("label",{staticClass:"checkbox-control"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.autoHideHeaders},on:{change:function(e){return t.$store.commit("settings/TOGGLE_AUTO_HIDE_HEADERS")}}}),n("div"),n("span",[t._v("Auto hide headers")])])]),n("div",{staticClass:"form-group mb8"},[n("label",{staticClass:"checkbox-control -animations"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.animationsEnabled},on:{change:function(e){return t.$store.commit("settings/TOGGLE_ANIMATIONS")}}}),n("div"),n("span",[n("small",{staticClass:"d-block text-muted",domProps:{textContent:t._s(t.animationsEnabled?"UI animations are enabled ✨":"UI animations are disabled 🚀")}}),n("span",{staticClass:"d-block mt4",domProps:{textContent:t._s(t.animationsEnabled?"Disable animations":"Enable animations")}})])])]),n("div",{staticClass:"form-group mb8"},[n("label",{staticClass:"checkbox-control -animations"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.locked},on:{change:function(e){return t.$store.commit("panes/TOGGLE_LAYOUT")}}}),n("div"),n("span",[n("small",{staticClass:"d-block text-muted",domProps:{textContent:t._s(t.locked?"Workspace grid is locked":"Workspace grid is unlocked")}}),n("span",{staticClass:"d-block mt4",domProps:{textContent:t._s(t.locked?"Unlock layout":"Lock layout")}})])])]),n("div",{staticClass:"form-group mb8"},[n("label",{staticClass:"checkbox-control -animations"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.normalizeWatermarks},on:{change:function(e){return t.$store.commit("settings/TOGGLE_NORMAMIZE_WATERMARKS")}}}),n("div"),n("span",[t._v("Simple watermarks")])])])])},Xs=[];function Vs(t){return Vs="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vs(t)}function qs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ks(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zs(t,e,n){return e&&Ks(t.prototype,e),n&&Ks(t,n),t}function Ws(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ys(t,e)}function Ys(t,e){return Ys=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ys(t,e)}function Js(t){var e=tc();return function(){var n,r=ec(t);if(e){var i=ec(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Qs(this,n)}}function Qs(t,e){if(e&&("object"===Vs(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Zs(t)}function Zs(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tc(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function ec(t){return ec=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ec(t)}var nc=function(t){Ws(n,t);var e=Js(n);function n(){var t;return qs(this,n),t=e.apply(this,arguments),t.responsiveEnabled=null,t}return zs(n,[{key:"animationsEnabled",get:function(){return!this.$store.state.settings.disableAnimations}},{key:"autoHideHeaders",get:function(){return this.$store.state.settings.autoHideHeaders}},{key:"locked",get:function(){return this.$store.state.panes.locked}},{key:"normalizeWatermarks",get:function(){return this.$store.state.settings.normalizeWatermarks}}]),n}(s["c"]);nc=Object(a["a"])([Object(s["a"])({name:"OtherSettings"})],nc);var rc=nc,ic=rc,oc=Object(R["a"])(ic,Gs,Xs,!1,null,null,null),ac=oc.exports,sc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dropdown",on:{keydown:t.onKeydown}},[t.label?n("div",{staticClass:"dropdown__label",domProps:{innerHTML:t._s(t.label)},on:{click:t.toggle}}):t._e(),n("button",{staticClass:"dropdown__selected btn",class:t.selectionClass,on:{click:t.toggle}},[t._t("selection",(function(){return[n("span",[t._v(t._s(t.alwaysShowPlaceholder&&t.selection||t.placeholder))])]}),{item:t.selection,placeholder:t.placeholder})],2),n("transition",{attrs:{name:"dropdown"}},[t.isOpen?n("div",{ref:"options",staticClass:"dropdown__options"},[n("div",{staticClass:"dropdown__scroller hide-scrollbar"},t._l(t.options,(function(e,r){return n("a",{key:r,staticClass:"dropdown__option",class:[!t.alwaysShowPlaceholder&&r===t.selected&&"active",e.color&&"text-"+e.color],attrs:{href:"javascript:void(0)"}},[e.id&&t.$slots["option-"+e.id]?t._t("option-"+e.id,(function(){return[t._v(" "+t._s(e)+" ")]})):t._t("option",(function(){return[t._v(" "+t._s(e)+" ")]}),{value:e,index:r})],2)})),0)]):t._e()])],1)},cc=[];function lc(t){return lc="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lc(t)}function uc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hc(t,e,n){return e&&dc(t.prototype,e),n&&dc(t,n),t}function pc(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fc(t,e)}function fc(t,e){return fc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},fc(t,e)}function mc(t){var e=bc();return function(){var n,r=gc(t);if(e){var i=gc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return vc(this,n)}}function vc(t,e){if(e&&("object"===lc(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return yc(t)}function yc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bc(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function gc(t){return gc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},gc(t)}var Sc=function(t){pc(n,t);var e=mc(n);function n(){var t;return uc(this,n),t=e.apply(this,arguments),t.isOpen=!1,t}return hc(n,[{key:"selection",get:function(){return this.returnValue?this.selected:this.options[this.selected]}},{key:"toggle",value:function(){this.isOpen?this.hide():this.show()}},{key:"show",value:function(){var t=this;this.isOpen=!0,this.$nextTick((function(){t.ajustPlacement()})),this.bindClickOutside(),this.$emit("open")}},{key:"hide",value:function(){this.isOpen=!1,this.unbindClickOutside(),this.$emit("close")}},{key:"bindClickOutside",value:function(){var t=this;this._clickOutsideHandler||(this._clickOutsideHandler=function(e){if(t.$el.contains(e.target)){var n=e.target;while(n){if(n.classList.contains("dropdown__option")){t.set(e,n);break}n=n.parentElement}}else t.hide()}.bind(this),document.addEventListener("mousedown",this._clickOutsideHandler))}},{key:"unbindClickOutside",value:function(){this._clickOutsideHandler&&(document.removeEventListener("mousedown",this._clickOutsideHandler),delete this._clickOutsideHandler)}},{key:"ajustPlacement",value:function(){if(this.$refs.options){var t=this.$refs.options,e=this.$el.getBoundingClientRect(),n=Yt(t)||document.getElementById("app"),r=n.getBoundingClientRect(),i=e.y-r.y,o=t.children[0];i>r.height/2?(t.classList.add("-upside-down"),o.style.maxHeight=Math.min(.886*r.height,i-e.height)+"px"):o.style.maxHeight=Math.min(.886*r.height,r.height-i)+"px"}}},{key:"set",value:function(t,e){var n=Array.prototype.indexOf.call(e.parentElement.children,e);Array.isArray(this.options)||(n=Object.keys(this.options)[n]),this.options&&this.options[n]&&"function"===typeof this.options[n].click&&this.options[n].click(t,this.options[n]),t.defaultPrevented||(this.$emit("output",this.returnValue?this.options[n]:n),this.autoClose&&this.hide())}},{key:"onKeydown",value:function(t){13===t.which&&this.hide()}}]),n}(s["c"]);Sc=Object(a["a"])([Object(s["a"])({name:"Dropdown",props:{options:{required:!0},label:{required:!1},selected:{required:!1},placeholder:{required:!1,default:"Selection"},alwaysShowPlaceholder:{default:!0},autoClose:{default:!0},selectionClass:{required:!1,default:"-arrow"},returnValue:{type:Boolean,default:!1}}})],Sc);var _c=Sc,Cc=_c,wc=Object(R["a"])(Cc,sc,cc,!1,null,null,null),Tc=wc.exports,kc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{on:{clickOutside:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{staticClass:"title"},[t._v("Import settings")])]},proxy:!0}])},[n("div",{staticClass:"form-group mb16"},[n("label",[t._v("Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.workspace.name,expression:"workspace.name"}],staticClass:"form-control w-100",attrs:{type:"text"},domProps:{value:t.workspace.name},on:{input:function(e){e.target.composing||t.$set(t.workspace,"name",e.target.value)}}})]),n("div",{staticClass:"d-flex flex-middle"},[n("i",{staticClass:"icon-info mr16"}),n("div",{staticClass:"mr16"},[n("small",{staticClass:"text-muted"},[t._v("Version")]),n("div",[t._v("v"+t._s(t.workspace.version||0))])]),n("div",{staticClass:"mr16"},[n("small",{staticClass:"text-muted"},[t._v("Created at")]),n("div",[t._v(t._s(t.createdAt)+" ago")])]),n("div",[n("small",{staticClass:"text-muted"},[t._v("Updated at")]),n("div",[t._v(t._s(t.updatedAt)+" ago")])])]),t.panes.length?n("div",{staticClass:"form-group mt16"},[n("label",[t._v("Panels")]),t._l(t.panes,(function(e){return n("div",{key:e.id,staticClass:"column flex-middle"},[n("i",{staticClass:"icon-plus mr8 -small"}),n("span",[t._v(t._s(e.type.toUpperCase()))]),n("small",{staticClass:"ml4"},[n("code",[t._v(t._s(e.id))])])])}))],2):t._e(),t.panes.length?n("div",{staticClass:"form-group mt16"},[n("label",[t._v("Markets")]),t._l(t.markets,(function(e,r){return n("button",{key:r,staticClass:"btn -accent -small mr4 mb4",attrs:{type:"button",disabled:""}},[t._v(" "+t._s(e)+" ")])}))],2):t._e(),n("footer",[n("a",{staticClass:"btn -text mr8",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.close(!1)}}},[t._v("Cancel")]),n("button",{staticClass:"btn -large -green",on:{click:function(e){return t.close(t.workspace)}}},[t._v("IMPORT")])])])},Ec=[];function Ic(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Oc(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Oc(t,e){if(t){if("string"===typeof t)return Ac(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ac(t,e):void 0}}function Ac(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Pc={props:{workspace:{required:!0,type:Object}},mixins:[Et],computed:{createdAt:function(){return Rt(this.workspace.createdAt)},updatedAt:function(){return Rt(this.workspace.updatedAt)},panes:function(){var t=this;return this.workspace.states.panes&&this.workspace.states.panes.panes?Object.keys(this.workspace.states.panes.panes).map((function(e){return{id:e,name:t.workspace.states.panes.panes[e].name,type:t.workspace.states.panes.panes[e].type,markets:t.workspace.states.panes.panes[e].markets}})):[]},markets:function(){return this.panes.reduce((function(t,e){var n,r=Ic(e.markets);try{for(r.s();!(n=r.n()).done;){var i=n.value;-1===t.indexOf(i)&&t.push(i)}}catch(o){r.e(o)}finally{r.f()}return t}),[])}},components:{Dialog:kt},data:function(){return{}},methods:{}},xc=Pc,Rc=Object(R["a"])(xc,kc,Ec,!1,null,null,null),Dc=Rc.exports,Uc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{staticClass:"indicator-dialog -auto -sticky-footer -mobile-fs",attrs:{mask:!1},on:{clickOutside:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",[n("div",{staticClass:"title"},[n("div",{on:{dblclick:t.renameIndicator}},[t._v(t._s(t.name))])]),t.description?n("div",{staticClass:"subtitle pl0",domProps:{textContent:t._s(t.description)},on:{dblclick:t.editDescription}}):n("code",{staticClass:"subtitle -filled",domProps:{textContent:t._s(t.indicatorId)},on:{click:t.copyIndicatorId,dblclick:t.editDescription}})]),n("a",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn -text -white mlauto -center -no-grab",attrs:{href:"https://github.com/Tucsky/aggr/wiki/introduction-to-scripting",target:"_blank",title:"Scripting documentation"}},[n("i",{staticClass:"icon-info"}),n("span",{staticClass:"ml8"},[t._v("Wiki")])]),t.unsavedChanges?n("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn ml8 -text -no-grab",attrs:{title:"Rollback changes"},on:{click:t.undoIndicator}},[n("i",{staticClass:"icon-trash"}),n("span",{staticClass:"ml8"},[t._v("Discard")])]):t._e(),n("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn ml8 -no-grab",class:[!t.unsavedChanges&&"-text -accent",t.unsavedChanges&&"-green"],attrs:{title:"Save changes"},on:{click:t.saveIndicator}},[n("i",{staticClass:"icon-save"}),n("span",{staticClass:"ml8"},[t._v("Save")])])]},proxy:!0}])},[t.error?n("p",{staticClass:"form-feedback ml16"},[n("i",{staticClass:"icon-warning mr4"}),t._v(" "+t._s(t.error))]):t._e(),n("div",{ref:"containerElement",staticClass:"d-flex indicator-dialog__wrapper"},[n("tabs",{ref:"tabsComponent",staticClass:"indicator-tabs",model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("tab",{staticClass:"d-flex p-relative editor",style:{fontSize:t.fontSize+"em"},attrs:{name:"Script"}},[n("prism-editor",{ref:"editor",staticClass:"editor__prism hide-scrollbar",attrs:{highlight:t.highlighter},on:{blur:function(e){return t.updateScript(e.target.value)}},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),n("code-minimap",{ref:"editorMinimap",staticClass:"editor__minimap"}),n("div",{staticClass:"editor__zoom"},[n("div",{staticClass:"btn -text -small",on:{click:function(e){return t.scaleEditor(1.1)}}},[n("i",{staticClass:"icon-plus"})]),n("div",{staticClass:"btn -text -small",on:{click:function(e){return t.scaleEditor(.9)}}},[n("i",{staticClass:"icon-minus"})])]),n("i",{staticClass:"icon-up-thin editor__resize",on:{mousedown:t.handleResize,touchstart:t.handleResize}})],1),n("tab",{staticClass:"indicator-options indicator-options--tab hide-scrollbar",attrs:{name:"Options"}},[t.scriptOptionsKeys.length?n("section",{staticClass:"section"},[t.sections.indexOf("scriptOptions")>-1?n("div",{staticClass:"section__content"},t._l(t.scriptOptionsKeys,(function(e){return n("indicator-option",{key:e,staticClass:"indicator-options__option",attrs:{name:e,"pane-id":t.paneId,"indicator-id":t.indicatorId,"plot-types":t.plotTypes}})})),1):t._e(),n("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("scriptOptions",e)}}},[t._v("Script options "),n("i",{staticClass:"icon-up-thin"})])]):t._e(),t.colorOptionsKeys.length?n("section",{staticClass:"section"},[t.sections.indexOf("colors")>-1?n("div",{staticClass:"section__content"},t._l(t.colorOptionsKeys,(function(e){return n("indicator-option",{key:e,staticClass:"indicator-options__option",attrs:{name:e,"pane-id":t.paneId,"indicator-id":t.indicatorId,"plot-types":t.plotTypes}})})),1):t._e(),n("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("colors",e)}}},[t._v("Colors "),n("i",{staticClass:"icon-up-thin"})])]):t._e(),n("section",{staticClass:"section"},[t.sections.indexOf("defaultOptions")>-1?n("div",{staticClass:"section__content"},t._l(t.defaultOptionsKeys,(function(e){return n("indicator-option",{key:e,staticClass:"indicator-options__option",attrs:{name:e,"pane-id":t.paneId,"indicator-id":t.indicatorId,"plot-types":t.plotTypes}})})),1):t._e(),n("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("defaultOptions",e)}}},[t._v("Other options "),n("i",{staticClass:"icon-up-thin"})])])])],1),n("hr",{staticClass:"-vertical"}),n("div",{staticClass:"indicator-options"},[n("section",{staticClass:"indicator-options__search section"},[n("div",[n("div",{staticClass:"input-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.optionsQuery,expression:"optionsQuery"}],staticClass:"form-control",attrs:{type:"text",placeholder:"search..."},domProps:{value:t.optionsQuery},on:{input:function(e){e.target.composing||(t.optionsQuery=e.target.value)}}}),n("button",{staticClass:"btn -text -small",attrs:{type:"button"},on:{click:function(e){t.optionsQuery=""}}},[n("i",{staticClass:"icon-cross"})])]),t._l(t.queryOptionsKeys,(function(e){return n("indicator-option",{key:e,attrs:{name:e,"pane-id":t.paneId,"indicator-id":t.indicatorId,"plot-types":t.plotTypes}})}))],2)]),t.optionsQuery.length?t._e():n("div",{staticClass:"indicator-options__options-scroller hide-scrollbar"},[t.colorOptionsKeys.length?n("section",{staticClass:"section"},[t.sections.indexOf("colors")>-1?n("div",{staticClass:"section__content"},t._l(t.colorOptionsKeys,(function(e){return n("indicator-option",{key:e,attrs:{name:e,"pane-id":t.paneId,"indicator-id":t.indicatorId,"plot-types":t.plotTypes}})})),1):t._e(),n("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("colors",e)}}},[t._v("Colors "),n("i",{staticClass:"icon-up-thin"})])]):t._e(),t.scriptOptionsKeys.length?n("section",{staticClass:"section"},[t.sections.indexOf("scriptOptions")>-1?n("div",{staticClass:"section__content"},t._l(t.scriptOptionsKeys,(function(e){return n("indicator-option",{key:e,attrs:{name:e,"pane-id":t.paneId,"indicator-id":t.indicatorId,"plot-types":t.plotTypes}})})),1):t._e(),n("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("scriptOptions",e)}}},[t._v("Script "),n("i",{staticClass:"icon-up-thin"})])]):t._e(),n("section",{staticClass:"section"},[t.sections.indexOf("defaultOptions")>-1?n("div",{staticClass:"section__content"},t._l(t.defaultOptionsKeys,(function(e){return n("indicator-option",{key:e,attrs:{name:e,"pane-id":t.paneId,"indicator-id":t.indicatorId,"plot-types":t.plotTypes}})})),1):t._e(),n("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("defaultOptions",e)}}},[t._v("Other "),n("i",{staticClass:"icon-up-thin"})])]),n("section",{staticClass:"section"},[t.sections.indexOf("position")>-1?n("div",{staticClass:"section__content"},[n("div",{staticClass:"form-group"},[n("label",[t._v("Scale with "),n("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:t.helps.priceScaleId}})]),n("dropdown",{staticClass:"-left -center w-100",attrs:{selected:t.indicator.options.priceScaleId,options:t.availableScales,placeholder:"Default scale",selectionClass:"-outline form-control -arrow w-100"},on:{output:function(e){return t.setPriceScale(e)}}})],1)]):t._e(),n("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("position",e)}}},[t._v("Position in chart "),n("i",{staticClass:"icon-up-thin"})])]),n("section",{staticClass:"section"},[t.sections.indexOf("format")>-1?n("div",{staticClass:"section__content"},[n("div",{staticClass:"d-flex"},[n("dropdown",{staticClass:"mr8",attrs:{selected:t.priceFormat,options:["price","volume"],selectionClass:"-outline form-control -arrow w-100","return-value":""},on:{output:function(e){return t.setPriceFormat(e,t.precision)}}}),n("editable",{staticClass:"form-control -fill",attrs:{content:t.precision},on:{output:function(e){return t.setPriceFormat(t.priceFormat,e)}}})],1)]):t._e(),n("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("format",e)}}},[t._v("Price format "),n("i",{staticClass:"icon-up-thin"})])])])])],1),n("footer",[n("presets",{staticClass:"mr8 -left",attrs:{type:"indicator:"+t.indicatorId,adapter:t.getIndicatorPreset,label:"Presets"},on:{apply:function(e){return t.applyIndicatorPreset(e)}}}),n("dropdown",{staticClass:"mlauto",attrs:{options:t.indicatorMenu,selectionClass:"-text -arrow"},scopedSlots:t._u([{key:"option-use-as-default",fn:function(){return[n("label",{staticClass:"checkbox-control -small",on:{mousedown:function(t){t.preventDefault()}}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.indicator.enabled},on:{change:t.toggleIndicatorAsDefault}}),n("div"),n("span",[t._v("Use as default")])])]},proxy:!0},{key:"option",fn:function(e){var r=e.value;return[n("i",{staticClass:"-lower",class:"icon-"+r.icon}),n("span",[t._v(t._s(r.label))])]}},{key:"selection",fn:function(){return[t._v(" Options ")]},proxy:!0}])})],1)])},Nc=[],Bc=n("e57a"),Lc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tabs"},[n("div",{staticClass:"tabs__header",attrs:{role:"tablist"}},t._l(t.tabs,(function(e,r){return n(t.useUrlFragment?"a":"button",{key:r,tag:"component",staticClass:"tabs__item tab btn",class:[e.isActive&&"tab--active",e.isDisabled&&"tab--disabled"],attrs:{type:t.useUrlFragment?null:"button",href:t.useUrlFragment?e.hash:null,role:"tab","aria-controls":e.hash,"aria-selected":e.isActive},on:{click:function(n){return t.selectTab(e.hash,n)}}},[n("span",{staticClass:"tab__name"},[t._v(t._s(e.name))]),e.badge?n("span",{staticClass:"badge -compact ml8"},[t._v(t._s(e.badge))]):t._e()])})),1),t._t("default")],2)},jc=[];function Mc(t){return Mc="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mc(t)}function $c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hc(t,e,n){return e&&Fc(t.prototype,e),n&&Fc(t,n),t}function Gc(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xc(t,e)}function Xc(t,e){return Xc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Xc(t,e)}function Vc(t){var e=zc();return function(){var n,r=Wc(t);if(e){var i=Wc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qc(this,n)}}function qc(t,e){if(e&&("object"===Mc(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Kc(t)}function Kc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zc(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Wc(t){return Wc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Wc(t)}var Yc=function(t){Gc(n,t);var e=Vc(n);function n(){var t;return $c(this,n),t=e.apply(this,arguments),t.tabs=[],t}return Hc(n,[{key:"onTabChange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!==t){var n=this.findTab(t);n&&(n.isDisabled||(n.isActive=!0))}if(null!==e){var r=this.findTab(e);r&&(r.isActive=!1)}}},{key:"created",value:function(){this.tabs=this.$children}},{key:"mounted",value:function(){this.selectDefaultTab()}},{key:"beforeDestroy",value:function(){this.unbindHashChange()}},{key:"bindHashChange",value:function(){var t=this;this.hashChangeHandler||(this.hashChangeHandler=function(){return t.selectTab(window.location.hash)},window.addEventListener("hashchange",this.hashChangeHandler))}},{key:"unbindHashChange",value:function(){this.hashChangeHandler&&window.addEventListener("hashchange",this.hashChangeHandler)}},{key:"findTab",value:function(t){return"number"===typeof t?this.tabs[t]:this.tabs.find((function(e){return e.hash===t}))}},{key:"selectDefaultTab",value:function(){var t=null;this.useUrlFragment&&(this.bindHashChange(),this.findTab(window.location.hash)&&(t=window.location.hash)),null===t&&null!==this.value&&(t=this.value),null===t&&this.tabs.length&&(t=this.tabs[0].hash),null!==t&&this.onTabChange(t)}},{key:"selectTab",value:function(t,e){e&&!this.useUrlFragment&&e.preventDefault(),this.$emit("input",t)}}]),n}(s["c"]);Object(a["a"])([Object(s["d"])("value")],Yc.prototype,"onTabChange",null),Yc=Object(a["a"])([Object(s["a"])({name:"Tabs",props:{value:{default:null},useUrlFragment:{type:Boolean,default:!1}}})],Yc);var Jc=Yc,Qc=Jc,Zc=(n("473d"),Object(R["a"])(Qc,Lc,jc,!1,null,"edb1f478",null)),tl=Zc.exports,el=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isActive?n("div",{staticClass:"tab__content"},[t._t("default")],2):t._e()},nl=[];function rl(t){return rl="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rl(t)}function il(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ol(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function al(t,e,n){return e&&ol(t.prototype,e),n&&ol(t,n),t}function sl(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cl(t,e)}function cl(t,e){return cl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},cl(t,e)}function ll(t){var e=hl();return function(){var n,r=pl(t);if(e){var i=pl(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ul(this,n)}}function ul(t,e){if(e&&("object"===rl(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return dl(t)}function dl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hl(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function pl(t){return pl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},pl(t)}var fl=function(t){sl(n,t);var e=ll(n);function n(){var t;return il(this,n),t=e.apply(this,arguments),t.isActive=!1,t}return al(n,[{key:"hash",get:function(){return this.isDisabled?"#":this.id?"#"+this.id:this.name?"#"+Lt(this.name):"#"+this._uid}}]),n}(s["c"]);fl=Object(a["a"])([Object(s["a"])({props:{id:{default:null},name:{required:!0},badge:{type:Number,required:!1,default:null},isDisabled:{default:!1}}})],fl);var ml=fl,vl=ml,yl=Object(R["a"])(vl,el,nl,!1,null,null,null),bl=yl.exports,gl=n("8192");function Sl(t){return Sl="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sl(t)}function _l(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Cl(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Cl(t,e){if(t){if("string"===typeof t)return wl(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wl(t,e):void 0}}function wl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tl(Object(n),!0).forEach((function(e){El(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function El(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Il={crosshair:{vertLine:{color:"rgba(255, 255, 255, .5)",width:.5,style:2,visible:!0,labelVisible:!0},horzLine:{color:"rgba(255, 255, 255, .5)",width:.5,style:2,visible:!0,labelBackgroundColor:"white",labelVisible:!0},mode:0},watermark:{color:"rgba(255,255,255, 0.1)",visible:!1,text:"Loading",horzAlign:"center",vertAlign:"center"},layout:{backgroundColor:"transparent",textColor:"white",fontFamily:"Barlow Semi Condensed"},grid:{horzLines:{visible:!1},vertLines:{visible:!1}},timeScale:{barSpacing:4,minBarSpacing:0,rightOffset:12,lockVisibleTimeRangeOnResize:!1,borderVisible:!0,borderColor:"rgba(255, 255, 255, .2)",visible:!0,timeVisible:!0,secondsVisible:!0},rightPriceScale:{borderColor:"rgba(255, 255, 255, .2)"}},Ol={crosshairMarkerVisible:!1,lastValueVisible:!1,priceLineVisible:!1,priceFormat:{type:"price",minMove:"0.01",precision:2}},Al={priceLineStyle:1,color:"white",lineWidth:1,lineStyle:0,lineType:0},Pl={priceLineColor:"rgba(255, 255, 255, .5)",borderVisible:!1,upColor:"#c3a87a",downColor:"#e53935",borderUpColor:"#c3a87a",borderDownColor:"#e53935",wickUpColor:"rgba(223, 195, 148, .8)",wickDownColor:"rgba(224, 91, 95, .8)"},xl={topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:1},Rl={color:"#c3a87a"},Dl={topColor:"rgba(21, 146, 230, 0.4)",bottomColor:"rgba(21, 146, 230, 0)",lineColor:"rgba(21, 146, 230, 1)",lineStyle:0,lineWidth:2},Ul={positiveColor:"rgba(76,175,80,0.1)",negativeColor:"rgba(255,82,82,0.1)",higherLineColor:"#4CAF50",higherLineStyle:gl["a"].Simple,higherLineWidth:1,lowerLineColor:"#FF5252",lowerLineStyle:gl["a"].Simple,lowerLineWidth:1},Nl={color:"rgba(76,175,80,0.1)"},Bl={thinBars:!1,upColor:"#a5d6a7",downColor:"#e57373",openVisible:!0},Ll=kl(kl({},Il),{},{rightPriceScale:{position:"none",mode:0},timeScale:{barSpacing:3,rightOffset:5,lockVisibleTimeRangeOnResize:!0,rightBarStaysOnScroll:!0,borderColor:"rgba(255, 255, 255, .2)",timeVisible:!0}}),jl={cloudarea:"cloud-area",brokenarea:"broken-area"},Ml={line:Al,area:Dl,candlestick:Pl,baseline:xl,"cloud-area":Ul,"broken-area":Nl,bar:Bl,histogram:Rl};function $l(t){var e=t;e||(e=ta.state.settings.textColor?ta.state.settings.textColor:"light"===ta.state.settings.theme?"#111111":"#f6f6f6");var n=Object(p["c"])(kl(kl({},Object(p["k"])(e)),{},{alpha:.2})),r="light"===ta.state.settings.theme?"rgba(0, 0, 0, .25)":"rgba(255, 255, 255, .25)",i={crosshair:{vertLine:{color:r},horzLine:{color:r}},layout:{textColor:e,borderColor:n},rightPriceScale:{borderColor:n},timeScale:{borderColor:n}};return i}function Fl(t){var e=Object.assign({},t),n=$l();for(var r in n)Object.assign(e[r],n[r]);return e}function Hl(t,e){var n;if(e){var r,i=_l(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;if("undefined"!==typeof Ml[o][t])return Ml[o][t]}}catch(a){i.e(a)}finally{i.f()}}return"undefined"===typeof n&&"undefined"!==typeof Ol[t]?Ol[t]:"undefined"===typeof n&&/length$/i.test(t)?14:"undefined"===typeof n&&/color$/i.test(t)?"#c3a87a":"undefined"===typeof n&&/width$/i.test(t)?1:n}function Gl(t,e,n,r){var i;"undefined"!==typeof ta.state[t].indicators[e].options[n]&&(i=ta.state[t].indicators[e].options[n]);var o=Hl(n,r);return"undefined"!==typeof i?i&&"object"===Sl(i)&&o&&"object"===Sl(o)?Object.assign({},o,i):i:"undefined"!==typeof o?o:null}var Xl=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{on:{clickOutside:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{staticClass:"title"},[t._v("Configure preset")])]},proxy:!0}])},[n("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[n("div",{staticClass:"form-group mb8"},[n("label",[t._v("Choose what to include in preset")]),n("label",{staticClass:"checkbox-control mt16"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.includeColors,expression:"includeColors"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.includeColors)?t._i(t.includeColors,null)>-1:t.includeColors},on:{change:function(e){var n=t.includeColors,r=e.target,i=!!r.checked;if(Array.isArray(n)){var o=null,a=t._i(n,o);r.checked?a<0&&(t.includeColors=n.concat([o])):a>-1&&(t.includeColors=n.slice(0,a).concat(n.slice(a+1)))}else t.includeColors=i}}}),n("div"),n("span",[t._v("Colors")])])]),n("div",{staticClass:"form-group mb8"},[n("label",{staticClass:"checkbox-control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.includeValues,expression:"includeValues"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.includeValues)?t._i(t.includeValues,null)>-1:t.includeValues},on:{change:function(e){var n=t.includeValues,r=e.target,i=!!r.checked;if(Array.isArray(n)){var o=null,a=t._i(n,o);r.checked?a<0&&(t.includeValues=n.concat([o])):a>-1&&(t.includeValues=n.slice(0,a).concat(n.slice(a+1)))}else t.includeValues=i}}}),n("div"),n("span",[t._v("Options")])])]),n("div",{staticClass:"form-group mb8"},[n("label",{staticClass:"checkbox-control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.includeScript,expression:"includeScript"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.includeScript)?t._i(t.includeScript,null)>-1:t.includeScript},on:{change:function(e){var n=t.includeScript,r=e.target,i=!!r.checked;if(Array.isArray(n)){var o=null,a=t._i(n,o);r.checked?a<0&&(t.includeScript=n.concat([o])):a>-1&&(t.includeScript=n.slice(0,a).concat(n.slice(a+1)))}else t.includeScript=i}}}),n("div"),n("span",[t._v("Script")])])]),n("footer",[n("a",{staticClass:"btn -text mr8",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.close(!1)}}},[t._v("Cancel")]),n("button",{staticClass:"btn -large -green",attrs:{type:"submit"}},[n("i",{staticClass:"icon-check mr8"}),t._v(" Submit")])])])])},Vl=[],ql={mixins:[Et],data:function(){return{includeColors:!0,includeValues:!1,includeScript:!1}},methods:{submit:function(){this.close({colors:this.includeColors,values:this.includeValues,script:this.includeScript})}}},Kl=ql,zl=Object(R["a"])(Kl,Xl,Vl,!1,null,null,null),Wl=zl.exports,Yl=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.totalHeight>t.visibleHeight?n("div",{staticClass:"code-minimap"},[n("canvas",{ref:"canvas",staticClass:"code-minimap"}),null!==t.visibleHeight?n("div",{staticClass:"code-minimap__bounds",style:{top:t.top+"%",bottom:t.bottom+"%"},on:{mousedown:t.handleMove,touchstart:t.handleMove}}):t._e()]):t._e()},Jl=[];function Ql(t){return Ql="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ql(t)}function Zl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function eu(t,e,n){return e&&tu(t.prototype,e),n&&tu(t,n),t}function nu(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ru(t,e)}function ru(t,e){return ru=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ru(t,e)}function iu(t){var e=su();return function(){var n,r=cu(t);if(e){var i=cu(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ou(this,n)}}function ou(t,e){if(e&&("object"===Ql(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return au(t)}function au(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function su(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function cu(t){return cu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},cu(t)}var lu=function(t){nu(n,t);var e=iu(n);function n(){var t;return Zl(this,n),t=e.apply(this,arguments),t.totalHeight=null,t.offsetTop=null,t.visibleHeight=null,t}return eu(n,[{key:"top",get:function(){return this.offsetTop/this.totalHeight*100}},{key:"bottom",get:function(){return(this.totalHeight-(this.offsetTop+this.visibleHeight))/this.totalHeight*100}},{key:"mounted",value:function(){var t=this;this.$nextTick((function(){t.bindEditor(),t.updateContent()}))}},{key:"beforeDestroy",value:function(){this.editorElement.removeEventListener("scroll",this.handleScroll),this.textareaElement.removeEventListener("blur",this.updateContent)}},{key:"bindEditor",value:function(){this.editorElement=this.$el.previousElementSibling,this.textareaElement=this.editorElement.querySelector("textarea"),this.editorElement.addEventListener("scroll",this.handleScroll),this.textareaElement.addEventListener("blur",this.updateContent)}},{key:"handleScroll",value:function(t){this.offsetTop=t.currentTarget.scrollTop}},{key:"updateContent",value:function(){this.content=this.textareaElement.value.split("\n"),this.updateSize()}},{key:"updateSize",value:function(){var t=this;this.totalHeight=this.editorElement.scrollHeight,this.visibleHeight=this.editorElement.clientHeight,this.offsetTop=this.editorElement.scrollTop,this.totalHeight<=this.visibleHeight||this.$nextTick((function(){var e=t.$refs.canvas;e.width=t.$el.clientWidth,e.height=t.$el.parentElement.clientHeight;var n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),t.renderMinimap()}))}},{key:"renderMinimap",value:function(){var t=this.$refs.canvas,e=t.getContext("2d");e.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--theme-color-200"),e.font="monospace";for(var n=4,r=8,i=t.height/this.content.length,o=0;o<this.content.length;o++)e.fillText(this.content[o].replace(/\b\w+\b/g,String.fromCharCode(8210)).replace(/[^\u2012\s]/g,""),n,r+o*i)}},{key:"handleMove",value:function(t){this.y=w(t).y,document.addEventListener("mousemove",this.move),document.addEventListener("mouseup",this.release),document.addEventListener("touchmove",this.move),document.addEventListener("touchend",this.release),document.body.classList.add("-unselectable")}},{key:"move",value:function(t){var e=w(t).y,n=this.y-w(t).y,r=n/this.$refs.canvas.height;this.editorElement.scrollTop-=r*this.totalHeight,this.y=e}},{key:"release",value:function(){document.removeEventListener("mousemove",this.move),document.removeEventListener("mouseup",this.release),document.removeEventListener("touchmove",this.move),document.removeEventListener("touchend",this.release),document.body.classList.remove("-unselectable"),this.$emit("move",{top:this.top,bottom:this.bottom})}}]),n}(s["c"]);lu=Object(a["a"])([Object(s["a"])({name:"CodeMinimap"})],lu);var uu=lu,du=uu,hu=(n("248d"),Object(R["a"])(du,Yl,Jl,!1,null,"45b4cacc",null)),pu=hu.exports,fu=n("8c7a"),mu=(n("cb55"),n("416b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"indicator-option form-group",class:["-"+t.type]},[n("label",[t._v(" "+t._s(t.label)+" ")]),"lineType"===t.name?n("dropdown",{staticClass:"-left -center",attrs:{selected:t.value,options:{0:"Simple",1:"with steps"},selectionClass:"-outline form-control -arrow",placeholder:"lineType"},on:{output:function(e){return t.setValue(e)}}}):/linestyle$/i.test(t.name)?n("dropdown",{staticClass:"-left -center",attrs:{selected:t.value,options:{0:"Solid",1:"Dotted",2:"Dashed",3:"LargeDashed",4:"SparseDotted"},selectionClass:"-outline form-control -arrow",placeholder:"lineStyle"},on:{output:function(e){return t.setValue(e)}}}):"color"===t.type?n("verte",{attrs:{picker:"square",menuPosition:"left",label:t.label,model:"rgb",value:t.value},on:{input:function(e){return t.setValue(e)},close:t.reloadIndicator}}):"string"===t.type||"number"===t.type?n("editable",{staticClass:"form-control",attrs:{content:t.value},on:{output:function(e){return t.setValue(e)}}}):"boolean"===t.type?n("label",{staticClass:"checkbox-control"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.value},on:{change:function(e){return t.setValue(e.target.checked)}}}),n("span",[t._v(t._s(t.label))]),n("div")]):t._e()],1)}),vu=[];function yu(t){return yu="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yu(t)}function bu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Su(t,e,n){return e&&gu(t.prototype,e),n&&gu(t,n),t}function _u(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Cu(t,e)}function Cu(t,e){return Cu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Cu(t,e)}function wu(t){var e=Eu();return function(){var n,r=Iu(t);if(e){var i=Iu(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Tu(this,n)}}function Tu(t,e){if(e&&("object"===yu(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ku(t)}function ku(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Eu(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Iu(t){return Iu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Iu(t)}var Ou=function(t){_u(n,t);var e=wu(n);function n(){var t;return bu(this,n),t=e.apply(this,arguments),t.value=null,t}return Su(n,[{key:"currentIndicatorValue",get:function(){return this.$store.state[this.paneId].indicators[this.indicatorId].options[this.name]}},{key:"label",get:function(){return this.name}},{key:"type",get:function(){var t,e="string";try{t=JSON.parse(this.value)}catch(n){t=this.value}return"boolean"===typeof t||/^(show|toggle|set|use)[A-Z]/.test(this.name)?e="boolean":/color/i.test(this.name)||/^rgba?/.test(t)||/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(t)?e="color":"number"===typeof t&&(e="number"),e}},{key:"onIndicatorValueChange",value:function(){var t=this.getValue();(+this.value!==+t||isNaN(+this.value)&&t!==this.value)&&(this.value=t)}},{key:"created",value:function(){this.value=this.getValue()}},{key:"getValue",value:function(){var t;"undefined"!==typeof this.currentIndicatorValue&&(t=this.currentIndicatorValue);var e=Hl(this.name,this.plotTypes);return"undefined"!==typeof t?t&&"object"===yu(t)&&e&&"object"===yu(e)?Object.assign({},e,t):t:"undefined"!==typeof e?e:null}},{key:"setValue",value:function(t){this.$store.dispatch(this.paneId+"/setIndicatorOption",{id:this.indicatorId,key:this.name,value:t}),this.value=t}},{key:"reloadIndicator",value:function(){this.$store.commit(this.paneId+"/SET_INDICATOR_SCRIPT",{id:this.indicatorId,value:this.$store.state[this.paneId].indicators[this.indicatorId].script})}}]),n}(s["c"]);Object(a["a"])([Object(s["d"])("currentIndicatorValue")],Ou.prototype,"onIndicatorValueChange",null),Ou=Object(a["a"])([Object(s["a"])({name:"IndicatorOption",props:{indicatorId:{type:String,required:!0},paneId:{type:String,required:!0},plotTypes:{required:!0},name:{type:String,required:!0}}})],Ou);var Au=Ou,Pu=Au,xu=(n("4aaa"),Object(R["a"])(Pu,mu,vu,!1,null,null,null)),Ru=xu.exports;function Du(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Bu(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Uu(t){return ju(t)||Lu(t)||Bu(t)||Nu()}function Nu(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Bu(t,e){if(t){if("string"===typeof t)return Mu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mu(t,e):void 0}}function Lu(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function ju(t){if(Array.isArray(t))return Mu(t)}function Mu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Fu=["crosshairMarkerVisible","minLength","visible","priceScaleId","priceFormat"],Hu={components:{CodeMinimap:pu,PrismEditor:Bc["a"],IndicatorOption:Ru,Tabs:tl,Tab:bl},props:["paneId","indicatorId"],mixins:[Et],data:function(){return{code:"",plotTypes:[],sections:["position","colors"],optionsQuery:"",fontSize:1,tab:0,defaultOptionsKeys:[],scriptOptionsKeys:[],colorOptionsKeys:[],indicatorMenu:null,helps:{priceScaleId:"Use <u>right</u> for binding indicator to main price scale. Otherwise use it as an id to align multiple indicator on same scale (as overlay)",lastValueVisible:"Show last value on right axis",priceLineVisible:"Show horizontal line at current value",borderVisible:"Only for candlestick series, enable borders of candles",lineWidth:"Only for line and area series",lineStyle:"Only for line and area series",lineType:"Only for line and area series"}}},computed:{indicator:function(){return ta.state[this.paneId].indicators[this.indicatorId]},displayName:function(){return this.indicator.displayName},description:function(){return this.indicator.description},unsavedChanges:function(){return this.indicator.unsavedChanges},error:function(){return ta.state[this.paneId].indicatorsErrors[this.indicatorId]},name:function(){return this.indicator.displayName||this.indicator.name},script:function(){return this.indicator.script},precision:function(){return!this.indicator.options.priceFormat||this.indicator.options.priceFormat.auto?"auto":"number"===typeof this.indicator.options.priceFormat.precision?this.indicator.options.priceFormat.precision:2},priceFormat:function(){return this.indicator.options.priceFormat?this.indicator.options.priceFormat.type:"price"},availableScales:function(){var t,e=this;return Object.values(this.$store.state[this.paneId].indicators).reduce((function(t,n){return n.id!==e.indicatorId&&n.options&&n.options.priceScaleId&&!t[n.options.priceScaleId]&&(t[n.options.priceScaleId]=n.name||n.id),t}),(t={},$u(t,this.indicatorId,"Own scale"),$u(t,"right","Right scale (main)"),t))},queryOptionsKeys:function(){if(!this.optionsQuery.length)return[];var t=new RegExp(this.optionsQuery,"i");return[].concat(Uu(this.scriptOptionsKeys),Uu(this.defaultOptionsKeys),Uu(this.colorOptionsKeys)).filter((function(e){return t.test(e)}))}},watch:{script:{handler:function(t){this.code=t},immediate:!0}},created:function(){var t=this;this.initIndicatorMenu(),this.restoreNavigationState(),this.$nextTick((function(){t.getPlotTypes(),t.getOptionsKeys()}))},beforeDestroy:function(){this.saveNavigationState()},methods:{restoreNavigationState:function(){this.indicator.navigationState&&(this.sections=this.indicator.navigationState.sections.slice(),this.tab=this.indicator.navigationState.tab,this.optionsQuery=this.indicator.navigationState.optionsQuery,this.fontSize=this.indicator.navigationState.fontSize)},saveNavigationState:function(){this.$store.dispatch(this.paneId+"/setIndicatorNavigationState",{id:this.indicatorId,navigationState:{sections:this.sections,tab:this.tab,optionsQuery:this.optionsQuery,fontSize:this.fontSize}})},initIndicatorMenu:function(){this.indicatorMenu=[{id:"use-as-default"},{label:"Resize",icon:"resize-height",click:this.resizeIndicator},{label:"Download",icon:"download",click:this.downloadIndicator},{label:"Clone",icon:"copy-paste",click:this.duplicateIndicator},{label:"Unload",icon:"cross",color:"danger",click:this.removeIndicator}]},setPriceScale:function(t){ta.dispatch(this.paneId+"/setIndicatorOption",{id:this.indicatorId,key:"priceScaleId",value:t})},updateScript:function(t){t=t.trim(),this.$store.commit(this.paneId+"/SET_INDICATOR_SCRIPT",{id:this.indicatorId,value:t}),this.getPlotTypes(),this.getOptionsKeys()},getScriptOptions:function(t){var e,n=[],r=/options\.([a-zA-Z0-9_]+)/g;do{(e=r.exec(t))&&n.push(e[1])}while(e);return n},getPlotTypes:function(){var t=Object.keys(Ml).map((function(t){return t.replace(/[^\w]/g,"")}));this.plotTypes=(this.script.match(new RegExp("(?:\\n|\\s|^)(?:plot)?(".concat(t.join("|"),")\\("),"g"))||[]).map((function(t){var e=t.replace(/[^\w]/g,"").replace(/^plot/,"");return jl[e]||e})).filter((function(t,e,n){return n.indexOf(t)===e&&Ml[t]}))},removeIndicator:async function(){await this.close(),ta.dispatch(this.paneId+"/removeIndicator",{id:this.indicatorId})},resizeIndicator:async function(){await this.close(),ta.commit(this.paneId+"/TOGGLE_LAYOUTING",this.indicatorId)},renameIndicator:async function(){var t=await Un.prompt({action:"Rename",input:ta.state[this.paneId].indicators[this.indicatorId].name});t&&t!==this.name&&(await this.close(),await ta.dispatch(this.paneId+"/renameIndicator",{id:this.indicatorId,name:t}))},editDescription:async function(){var t=await Un.prompt({action:"Description",input:this.description});null!==t&&t!==this.description&&await ta.commit(this.paneId+"/UPDATE_DESCRIPTION",{id:this.indicatorId,description:t})},downloadIndicator:async function(){var t=ta.state[this.paneId].priceScales[this.indicator.options.priceScaleId]||{},e=Object.assign({},ta.state[this.paneId].indicators[this.indicatorId].options,t?{scaleMargins:t.scaleMargins}:{});await jt({type:"indicator",name:"indicator:"+this.indicator.name,data:{options:e,description:this.description,script:this.script}},"indicator_"+this.indicatorId)},duplicateIndicator:async function(){var t=u()({},ta.state[this.paneId].indicators[this.indicatorId]);t.id+="-copy",t.name+=" copy",delete t.updatedAt,delete t.createdAt,delete t.enabled,this.$store.dispatch(this.paneId+"/addIndicator",t),await this.close(),Un.open(Vu,{paneId:this.paneId,indicatorId:t.id},"serie")},saveIndicator:async function(){this.$store.dispatch(this.paneId+"/saveIndicator",this.indicatorId)},undoIndicator:async function(){await Un.confirm("Undo changes ?")&&(this.$store.dispatch(this.paneId+"/undoIndicator",this.indicatorId),this.$refs.editorMinimap.updateSize())},toggleSection:function(t,e){var n=this.sections.indexOf(t);-1===n?this.sections.push(t):this.sections.splice(n,1),this.$nextTick((function(){var t=e.target.parentElement;t&&t.scrollIntoView&&t.scrollIntoView()}))},getIndicatorPreset:async function(){var t=await Un.openAsPromise(Wl);if(t){if(!t.colors&&!t.script&&!t.values)return void this.$store.dispatch("app/showNotice",{title:"You did not select anything to save in the preset !",type:"error"});var e={options:{}};if(t.values){var n,r=Du(this.scriptOptionsKeys);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.options[i]=Gl(this.paneId,this.indicatorId,i,this.plotTypes)}}catch(d){r.e(d)}finally{r.f()}var o,a=Du(this.defaultOptionsKeys);try{for(a.s();!(o=a.n()).done;){var s=o.value;e.options[s]=Gl(this.paneId,this.indicatorId,s,this.plotTypes)}}catch(d){a.e(d)}finally{a.f()}}if(t.colors){var c,l=Du(this.colorOptionsKeys);try{for(l.s();!(c=l.n()).done;){var u=c.value;e.options[u]=Gl(this.paneId,this.indicatorId,u,this.plotTypes)}}catch(d){l.e(d)}finally{l.f()}}return t.script&&(e.script=this.script),e}},getOptionsKeys:function(){var t=Object.keys(Ol),e=this.plotTypes.reduce((function(t,e){return[].concat(Uu(t),Uu(Object.keys(Ml[e]||{})))}),[]),n=this.getScriptOptions(this.script),r=[].concat(Uu(t),Uu(e),Uu(n)).filter((function(t,e,n){return-1===Fu.indexOf(t)&&n.indexOf(t)==e}));this.scriptOptionsKeys=r.filter((function(t){return!/color/i.test(t)&&-1!==n.indexOf(t)})).sort((function(t,e){return t>e?1:t<e?-1:0})),this.defaultOptionsKeys=r.filter((function(t){return!/color/i.test(t)&&-1===n.indexOf(t)})).sort((function(t,e){return t>e?1:t<e?-1:0})),this.colorOptionsKeys=r.filter((function(t){return/color/i.test(t)}))},applyIndicatorPreset:function(t){var e=this,n=this.$store.state[this.paneId].indicators[this.indicatorId];if(t)u()(n,t);else{var r,i=this.scriptOptionsKeys.concat(this.defaultOptionsKeys,this.colorOptionsKeys),o=Du(i);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=this.getDefaultValue(a);"undefined"!==typeof s&&(n.options[a]=s)}}catch(c){o.e(c)}finally{o.f()}}this.otherOptionsKeys=this.colorOptionsKeys=[],this.$nextTick((function(){e.$store.commit(e.paneId+"/SET_INDICATOR_SCRIPT",{id:e.indicatorId}),e.getPlotTypes(),e.getOptionsKeys(),e.$store.commit(e.paneId+"/FLAG_INDICATOR_AS_UNSAVED",e.indicatorId)}))},toggleIndicatorAsDefault:async function(){if(!this.unsavedChanges||await Un.confirm("Indicator has unsaved changes, save it and turn "+(this.indicator.enabled?"off":"on")+" default ?"))return this.indicator.enabled=!this.indicator.enabled,this.saveIndicator()},highlighter:function(t){return Object(fu["highlight"])(t,fu["languages"].js,"js")},handleResize:function(t){this._resizeOrigin=w(t),this.$refs.tabsComponent.$el.style.width=this.$refs.tabsComponent.$el.clientWidth+"px",this.$refs.containerElement.style.height=this.$refs.containerElement.clientHeight+"px",document.addEventListener("mousemove",this.resize),document.addEventListener("mouseup",this.release),document.addEventListener("touchmove",this.resize),document.addEventListener("touchend",this.release),document.body.classList.add("-unselectable")},resize:function(t){var e=w(t),n=parseInt(this.$refs.tabsComponent.$el.style.width)+2*(e.x-this._resizeOrigin.x),r=parseInt(this.$refs.containerElement.style.height)+2*(e.y-this._resizeOrigin.y);this.$refs.tabsComponent.$el.style.width=n+"px",this.$refs.containerElement.style.height=r+"px",this._resizeOrigin=e},release:function(){var t=this;document.removeEventListener("mousemove",this.resize),document.removeEventListener("mouseup",this.release),document.removeEventListener("touchmove",this.resize),document.removeEventListener("touchend",this.release),document.body.classList.remove("-unselectable"),this.$refs.editor.setLineNumbersHeight(),setTimeout((function(){t.$refs.editorMinimap.updateSize()}))},scaleEditor:function(t){var e=this;isNaN(this.fontSize)&&(this.fontSize=1),this.fontSize*=t,setTimeout((function(){e.$refs.editorMinimap.updateSize()}))},setPriceFormat:function(t,e){var n=!1,r=Math.round(e);(""===e||isNaN(r))&&(n=!0,r=2),this.$store.dispatch(this.paneId+"/setIndicatorOption",{id:this.indicatorId,key:"priceFormat",value:{type:t,precision:r,minMove:1/Math.pow(10,r),auto:n}})},copyIndicatorId:function(){zt(this.indicatorId),this.$store.dispatch("app/showNotice",{title:"Copied indicator id to clipboard"})}}},Gu=Hu,Xu=(n("1433"),Object(R["a"])(Gu,Uc,Nc,!1,null,"4c801315",null)),Vu=Xu.exports;function qu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ku(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zu(t,e,n){return e&&Ku(t.prototype,e),n&&Ku(t,n),t}var Wu=function(){function t(){qu(this,t)}return zu(t,[{key:"getJSON",value:function(t){return new Promise((function(e,n){var r=new FileReader;r.onload=function(t){try{var r=JSON.parse(t.target.result);e(r)}catch(i){n(i)}},r.readAsText(t)})).catch((function(){throw new Error("Unable to read file")}))}},{key:"importSound",value:async function(t){if(0!==t.type.indexOf("audio"))throw new Error("File must be audio file");var e=await pn.getSound(t.name);if(!e)return e={name:t.name,data:new Blob([t],{type:t.type})},await pn.saveSound(e),ta.dispatch("app/showNotice",{title:"Successfully imported sound ".concat(t.name),type:"info"}),e}},{key:"importPreset",value:async function(t,e){var n=await this.getJSON(t);if(!n.data)throw new Error("Preset is empty");return await pn.savePreset(n,e),ta.dispatch("app/showNotice",{title:"Successfully imported preset ".concat(n.name),type:"info"}),n}},{key:"importWorkspace",value:async function(t){var e=await this.getJSON(t);if(!e.id||!e.name||!e.states)throw new Error("Unrecognized workspace file");if(0===Object.keys(e.states).length)throw new Error("Workspace seems empty");for(var n in e.states){var r=e.states[n];"website"===r.type&&(r.locked=!0)}if(!await pn.getWorkspace(e.id)||await Un.confirm({message:"Workspace ".concat(e.id," already exists"),ok:"Import anyway",cancel:"Annuler"}))return await Un.openAsPromise(Dc,{workspace:e})?(await pn.addAndSetWorkspace(e),ta.dispatch("app/showNotice",{title:"Successfully imported workspace ".concat(e.name),type:"info"}),e):null}},{key:"importIndicator",value:function(t){var e;if(ta.state.app.focusedPaneId&&"chart"===ta.state.panes.panes[ta.state.app.focusedPaneId].type)e=ta.state.app.focusedPaneId;else for(var n in ta.state.panes.panes)if("chart"===ta.state.panes.panes[n].type){e=n;break}if(!e)throw new Error("No chart found");var r=t.name.split(":").slice(1).join(":"),i={id:Lt(r),name:r,script:t.data.script||"",options:t.data.options||{},description:t.data.description||null,unsavedChanges:!0};ta.dispatch(e+"/addIndicator",i),Un.open(Vu,{paneId:e,indicatorId:i.id},"indicator")}},{key:"importAnything",value:async function(t){if("application/json"===t.type||"text/plain"===t.type){var e=await this.getJSON(t);e.formatName?await this.importDatabase(t):e.type&&e.data?"indicator"===e.type&&e.name.split(":").length<3?this.importIndicator(e):await this.importPreset(t):await this.importWorkspace(t)}else/^audio\//.test(t.type)&&await this.importSound(t)}},{key:"importDatabase",value:async function(t){if(await Un.confirm({message:"This action will override ALL your aggr data.",ok:"Yes override please",cancel:"Cancel"})&&await Un.confirm({message:"Are you sure ?",ok:"Proceed with import",cancel:"Cancel"})){await n.e("chunk-2d0cc844").then(n.bind(null,"4dec"));var e,r=await n.e("chunk-85145916").then(n.bind(null,"9e91")),i=r.importDB,o=pn.workspace.id;await pn.reset();var a=t.name.match(/aggr-(\w{4})/);a&&a[1]&&(e=a[1]),await i(t),setTimeout((function(){e?(localStorage.setItem("workspace",e),window.location.href=window.location.href.replace(o,"")):window.location.reload()}),250)}}}]),t}(),Yu=new Wu;function Ju(t,e){return nd(t)||ed(t,e)||Zu(t,e)||Qu()}function Qu(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zu(t,e){if(t){if("string"===typeof t)return td(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?td(t,e):void 0}}function td(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ed(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function nd(t){if(Array.isArray(t))return t}var rd={mixins:[Et],components:{Dialog:kt,Exchange:cs,AudioSettings:Hs,OtherSettings:ac,DonoDropdown:Ts,Dropdown:Tc},data:function(){return{workspace:null,workspaces:[],hits:null}},computed:{exchanges:function(){return this.$store.getters["exchanges/getExchanges"]},version:function(){return this.$store.state.app.version},buildDate:function(){return this.$store.state.app.buildDate},settings:function(){return this.$store.state.settings.settings},timezoneOffset:function(){return this.$store.state.settings.timezoneOffset},backgroundColor:function(){return this.$store.state.settings.backgroundColor},textColor:function(){return this.$store.state.settings.textColor},aggregationLength:function(){return this.$store.state.settings.aggregationLength},preferQuoteCurrencySize:function(){return this.$store.state.settings.preferQuoteCurrencySize},calculateSlippage:function(){return this.$store.state.settings.calculateSlippage}},created:async function(){this.createMenus(),await this.getWorkspaces()},beforeDestroy:function(){this._hitsTimeout&&clearTimeout(this._hitsTimeout)},methods:{createMenus:function(){this.databaseMenu=[{icon:"warning",color:"danger",label:"Reset to default",click:this.reset},{icon:"upload",label:"Export database",click:this.exportDatabase}],this.activeWorkspaceMenu=[{icon:"trash",label:"Remove",click:this.removeWorkspace},{icon:"edit",label:"Rename",click:this.renameWorkspace},{icon:"download",label:"Download",click:this.exportWorkspace},{icon:"copy-paste",label:"Duplicate",click:this.duplicateWorkspace}],this.workspacesToolsMenu=[{icon:"upload",label:"Upload template",click:this.uploadWorkspace},{icon:"plus",label:"New workspace",click:this.createBlankWorkspace}]},getHits:function(){var t=this;null===this.hits&&(this.hits="..."),this._hitsTimeout=setTimeout((async function(){var e=await Ca.dispatchAsync({op:"getHits"}),n=Date.now()-re;t.hits=(e/(n/1e3)).toFixed(),t.getHits()}),1e3)},getWorkspaces:async function(){var t=(await pn.getWorkspaces()).filter((function(t){return t.id!==pn.workspace.id}));this.workspaces=t;var e=pn.workspace;this.workspace={name:e.name,id:e.id,updatedAt:Rt(e.updatedAt),createdAt:Rt(e.createdAt),states:null}},loadWorkspace:async function(t){await this.close();var e=await pn.getWorkspace(t);await pn.setCurrentWorkspace(e),this.getWorkspaces()},openWorkspace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=window.location.href.replace(this.workspace.id,t);e?window.open(n):window.location.href=n},removeWorkspace:async function(t){var e;e="string"===typeof t?await pn.getWorkspace(t):this.workspace;var n=this.workspace&&this.workspace.id===e.id;if(n&&await this.close(),await Un.confirm("Delete workspace ".concat(e.name," ?"))){if(await pn.removeWorkspace(e.id),n){var r=this.workspaces.find((function(t){return t.id!==e.id}));r||(r=await pn.createWorkspace()),await pn.setCurrentWorkspace(r)}return n?void 0:this.getWorkspaces()}},exportWorkspace:async function(){pn.downloadWorkspace()},duplicateWorkspace:async function(){pn.duplicateWorkspace()},createBlankWorkspace:async function(){await this.close();var t=await pn.createWorkspace();await pn.setCurrentWorkspace(t)},uploadWorkspace:async function(){try{var t=await Kt();if(!t)return;await Yu.importWorkspace(t)}catch(e){this.$store.dispatch("app/showNotice",{title:e.message,type:"error",timeout:6e4})}},renameWorkspace:async function(){var t=await Un.prompt({action:"Rename",input:this.workspace.name});t&&await pn.renameWorkspace(t),this.getWorkspaces()},exportDatabase:async function(){return pn.exportDatabase()},reset:async function(){var t=await pn.db.getAllKeys("sounds"),e=await pn.db.getAllKeys("indicators"),n=await pn.db.getAllKeys("presets"),r=await pn.db.getAllKeys("alerts"),i=[];this.workspaces.length&&i.push(["workspace",this.workspaces.length]),e.length&&i.push(["indicator",e.length]),t.length&&i.push(["sound",t.length]),n.length&&i.push(["preset",n.length]),r.length&&i.push(["alert",r.length]),await Un.confirm({title:"Reset everything ?",html:!0,ok:"Reset & reload",message:"Everything will be removed".concat(i.length?" including : \n\t - "+i.map((function(t){var e=Ju(t,2),n=e[0],r=e[1];return r+" "+n+(r>1?"s":"")})).join("\n\t - ")+"\n\n...and everything else!":".")})&&(await pn.reset(),window.location.reload())},ago:function(t){return Rt(t)}}},id=rd,od=(n("5a81"),Object(R["a"])(id,Ga,Xa,!1,null,null,null)),ad=od.exports;function sd(t){return sd="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sd(t)}function cd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ld(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ud(t,e,n){return e&&ld(t.prototype,e),n&&ld(t,n),t}function dd(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hd(t,e)}function hd(t,e){return hd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},hd(t,e)}function pd(t){var e=vd();return function(){var n,r=yd(t);if(e){var i=yd(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fd(this,n)}}function fd(t,e){if(e&&("object"===sd(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return md(t)}function md(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vd(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function yd(t){return yd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},yd(t)}var bd=function(t){dd(n,t);var e=pd(n);function n(){var t;return cd(this,n),t=e.apply(this,arguments),t.isFullscreen=!1,t.open=!1,t.paneTypes={chart:{title:"Chart",description:"Live chart"},trades:{title:"Trades",description:"Trades feed"},stats:{title:"Stats",description:"Custom rolling metrics"},counters:{title:"Counters",description:"Buys/sells by intervals"},prices:{title:"Markets",description:"Price change & volume"},website:{title:"Website",description:"Embed website"}},t}return ud(n,[{key:"useAudio",get:function(){return this.$store.state.settings.useAudio}},{key:"audioVolume",get:function(){return this.$store.state.settings.audioVolume}},{key:"showSettings",value:function(){Un.open(ad)}},{key:"toggleFullscreen",value:function(){var t=document.body;event instanceof HTMLElement&&(t=event),t.requestFullScreen=t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||function(){return!1},document.cancelFullScreen=document.cancelFullScreen||document.webkitCancelFullScreen||document.mozCancelFullScreen||function(){return!1},this.isFullscreen?document.cancelFullScreen():t.requestFullScreen()}},{key:"toggleMenu",value:function(){this.open=!this.open,this.open&&(this.isFullscreen=!(!document.webkitIsFullScreen&&!document.mozFullScreen))}},{key:"addPane",value:function(t){this.$store.dispatch("panes/addPane",{type:t}),this.toggleMenu()}},{key:"onClickItem",value:function(t){t.target.classList.contains("dropdown__selected")||t.target.parentElement.classList.contains("dropdown__selected")||this.toggleMenu()}},{key:"toggleAudio",value:function(){this.$store.commit("settings/TOGGLE_AUDIO",!this.useAudio)}}]),n}(s["c"]);bd=Object(a["a"])([Object(s["a"])({name:"Header",components:{Slider:U}})],bd);var gd=bd,Sd=gd,_d=(n("bb78"),Object(R["a"])(Sd,Fa,Ha,!1,null,null,null)),Cd=_d.exports,wd=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("grid-layout",{ref:"grid",attrs:{layout:t.layout,"col-num":t.cols,"row-height":t.rowHeight,margin:[0,0],"is-resizable":t.unlocked,"is-draggable":t.unlocked,"vertical-compact":!0,"use-css-transforms":!0,"use-style-cursor":!1},on:{"layout-ready":function(e){t.layoutReady=!0},"layout-updated":t.onLayoutUpdated}},t._l(t.layout,(function(e){return n("grid-item",{key:e.i,attrs:{type:e.type,"drag-allow-from":".pane-header","drag-ignore-from":"a, button, .-no-grab",x:e.x,y:e.y,w:e.w,h:e.h,i:e.i},on:{"container-resized":t.onContainerResized,resized:t.onItemResized}},[t.layoutReady?n(e.type,{ref:"panes",refInFor:!0,tag:"component",staticClass:"pane",attrs:{paneId:e.i}}):t._e()],1)})),1)},Td=[],kd=n("2fe1"),Ed=n("7be8"),Id=n.n(Ed),Od=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pane-chart"},[n("pane-header",{attrs:{paneId:t.paneId,controls:t.paneControls}},[t._l(t.favoriteTimeframes,(function(e,r){return n("button",{key:r,staticClass:"timeframe",attrs:{title:"Maintain shift key to change timeframe on all panes"},on:{click:function(e){return t.changeTimeframe(r)}}},[n("span",{domProps:{textContent:t._s(e)}})])})),n("dropdown",{staticClass:"dropdown--squished",attrs:{options:t.orderedTimeframes,selected:t.timeframe,placeholder:"tf.",selectionClass:"-text -arrow","return-value":""},on:{output:function(e){e.value&&t.changeTimeframe(e.value)}},scopedSlots:t._u([{key:"option-custom",fn:function(){return[n("div",{staticClass:"w-100",on:{mousedown:function(t){t.stopPropagation()}}},[n("timeframe-input",{staticClass:"text-center",attrs:{placeholder:"enter tf."},on:{submit:function(e){return t.$store.commit(t.paneId+"/SET_TIMEFRAME",e)}}}),n("span")],1)]},proxy:!0},{key:"selection",fn:function(){return[n("span",[t._v(t._s(t.timeframeForHuman))])]},proxy:!0},{key:"option",fn:function(e){var r=e.value;return[r.title?n("div",{staticClass:"timeframe__title"},[t._v(" "+t._s(r.title)+" ")]):[n("i",{staticClass:"-fill icon-star mr8 timeframe__favorite",class:{"icon-star-filled":t.favoriteTimeframes[r.value]},on:{mousedown:function(t){t.preventDefault()},click:function(e){return t.toggleFavoriteTimeframe(r.value)}}}),n("span",{staticClass:"mlauto"},[t._v(t._s(r.label))])]]}}])})],2),n("div",{staticClass:"chart-overlay -left hide-scrollbar"},[n("div",{staticClass:"chart-overlay__panel"},[t.showIndicatorsOverlay?n("div",{staticClass:"chart-overlay__content chart__indicators"},[t._l(t.indicators,(function(e,r){return n("IndicatorControl",{key:r,attrs:{indicatorId:r,paneId:t.paneId}})})),n("a",{staticClass:"btn mt8 mb8 -text",attrs:{href:"javascript:void(0);"},on:{click:t.addIndicator}},[t._v(" Add "),n("i",{staticClass:"icon-plus ml8"})])],2):t._e(),n("div",{staticClass:"chart-overlay__title pane-overlay",on:{click:t.toggleIndicatorOverlay}},[t._v("Indicators "),n("i",{staticClass:"icon-up-thin"})])]),n("div",{staticClass:"chart-overlay__panel chart__markets"},[t.showMarketsOverlay?n("div",{staticClass:"chart-overlay__content pane-overlay"},[n("div",{staticClass:"column"},[n("a",{staticClass:"btn -text",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.toggleMarkets("perp")}}},[t._v("perp")]),n("i",{staticClass:"pipe -center"},[t._v("|")]),n("a",{staticClass:"btn -text",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.toggleMarkets("spot")}}},[t._v("spot")]),n("i",{staticClass:"pipe -center"},[t._v("|")]),n("a",{staticClass:"btn -text",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.toggleMarkets("all")}}},[t._v("all")])]),t._l(t.markets,(function(e){return n("div",{key:e,on:{click:function(n){return t.toggleMarket(n,e)}}},[n("label",{staticClass:"checkbox-control -small mb4"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:!t.hiddenMarkets[e]},on:{click:function(t){t.stopPropagation(),t.preventDefault()}}}),n("div"),n("span",[t._v(t._s(e))])])])}))],2):t._e(),n("div",{staticClass:"chart-overlay__title pane-overlay",on:{click:function(e){t.showMarketsOverlay=!t.showMarketsOverlay}}},[t._v(" Markets "),n("button",{staticClass:"btn badge -outline",attrs:{type:"button"},on:{click:t.toggleMarketOverlay}},[t._v(" "+t._s(t.markets.length?t.visibleMarkets:"Search markets")+" ")]),n("i",{staticClass:"icon-up-thin"})])])]),n("div",{ref:"chartContainer",staticClass:"chart__container"},[t.layouting?n("chart-layout",{attrs:{"pane-id":t.paneId,layouting:t.layouting,axis:t.axis}}):t._e()],1)],1)},Ad=[];function Pd(t){t.state.open=t.state.close,t.state.high=t.state.close,t.state.low=t.state.close}function xd(t){t.state.point={open:t.state.open,high:t.state.high,low:t.state.low,close:t.state.close}}function Rd(t){t.state.open=null,t.state.high=null,t.state.low=null}function Dd(t){t.state.points.push(t.state.output),t.state.count++,t.state.count>t.length-1&&(t.state.points.shift(),t.state.count--)}function Ud(t){t.state.points.push(t.state.output),t.state.sum+=t.state.output,t.state.count++,t.state.count>t.length-1&&(t.state.sum-=t.state.points.shift(),t.state.count--)}var Nd={avg_ohlc:{state:{open:null,high:null,low:null,close:null},next:Pd,update:function(t,e){var n,r=0,i=!1,o=0,a=0,s=0;for(var c in null===t.open&&(i=!0,n=0),e.sources)e.sources[c].active&&null!==e.sources[c].open&&(i&&(n+=e.sources[c].open),o+=e.sources[c].high,a+=e.sources[c].low,s+=e.sources[c].close,r++);return r?(i&&(t.open=n/r),t.high=Math.max(t.open,o/r),t.low=Math.min(t.open,a/r),t.close=s/r,{time:e.localTimestamp,open:t.open,high:t.high,low:t.low,close:t.close}):{time:e.localTimestamp}}},avg_heikinashi:{state:{open:null,high:null,low:null,close:null},next:xd,update:function(t,e){var n=0;for(var r in t.open=0,t.high=0,t.low=0,t.close=0,e.sources)e.sources[r].active&&null!==e.sources[r].open&&(t.open+=e.sources[r].open,t.high+=e.sources[r].high,t.low+=e.sources[r].low,t.close+=e.sources[r].close,n++);return n||(n=1),t.high/=n,t.low/=n,t.open/=n,t.close=(t.open+t.high+t.low+t.close/n)/4,"undefined"!==typeof t.point?t.open=(t.point.open+t.point.close)/2:t.open=(t.open+t.close)/2,t.low=Math.min(t.open,t.low,t.close),t.high=Math.max(t.open,t.high,t.close),{time:e.localTimestamp,open:t.open,high:t.high,low:t.low,close:t.close}}},avg_ohlc_with_gaps:{state:{open:null,high:null,low:null,close:null},next:Rd,update:function(t,e){var n=0,r=0,i=0,o=0,a=0;for(var s in e.sources)e.sources[s].active&&null!==e.sources[s].open&&(r+=e.sources[s].open,i+=e.sources[s].high,o+=e.sources[s].low,a+=e.sources[s].close,n++);return n?(t.open=r/n,t.high=Math.max(null===t.high?-1/0:t.high,i/n),t.low=Math.min(null===t.low?1/0:t.low,o/n),t.close=a/n,{time:e.localTimestamp,open:t.open,high:t.high,low:t.low,close:t.close}):{time:e.localTimestamp}}},avg_close:{update:function(t,e){var n=0;for(var r in t.close=0,e.sources)null!==e.sources[r].open&&(t.close+=e.sources[r].close,n++);return n||(n=1),t.close/=n,t.close}},ohlc:{args:[{instruction:"renderer.localTimestamp",injected:!0}],next:Pd,update:function(t,e,n){return"undefined"===typeof t.open&&(t.open=n,t.high=n,t.low=n),t.high=Math.max(t.high,n),t.low=Math.min(t.low,n),t.close=n,{time:e,open:t.open,high:t.high,low:t.low,close:t.close}}},cum_ohlc:{args:[{instruction:"renderer.localTimestamp",injected:!0}],next:Pd,update:function(t,e,n){return"undefined"===typeof t.open?(t.open=n,t.high=n,t.low=n):n=t.open+n,t.high=Math.max(t.high,n),t.low=Math.min(t.low,n),t.close=n,{time:e,open:t.open,high:t.high,low:t.low,close:t.close}}},cum:{next:Pd,update:function(t,e){return"undefined"===typeof t.open&&(t.open=e),t.close=t.open+e,t.close}},pivot_high:{args:[{},{length:!0},{length:!0}],state:{points:[],count:0},next:Dd,update:function(t,e,n,r){t.output=e;var i=t.points[n];"undefined"===typeof i&&(i=e);for(var o=n+r,a=0;a<=o;a++){var s=a<o-1?t.points[a]:e;if(s>i)return null}return i}},pivot_low:{args:[{},{length:!0},{length:!0}],state:{points:[],count:0},next:Dd,update:function(t,e,n,r){t.output=e;var i=t.points[n];"undefined"===typeof i&&(i=e);for(var o=n+r,a=0;a<=o;a++){var s=a<o-1?t.points[a]:e;if(s<i)return null}return i}},highest:{args:[{},{length:!0}],state:{points:[],count:0},next:Dd,update:function(t,e,n){return t.output=e,t.count?Math.max.apply(null,t.points):e}},lowest:{args:[{},{length:!0}],state:{points:[],count:0},next:Dd,update:function(t,e,n){return t.output=e,t.count?Math.min.apply(null,t.points):e}},linreg:{args:[{},{length:!0}],state:{points:[],count:0},next:Dd,update:function(t,e,n){if(t.output=e,t.count<1)return null;for(var r=0,i=0,o=0,a=0,s=0,c=0,l=0;l<=t.points.length;l++){var u=l===t.points.length?e:t.points[l];i=l+1,o+=i,a+=u,s+=i*i,c+=u*i,r++}var d=(r*c-o*a)/(r*s-o*o),h=a/r,p=h-d*o/n+d;return p+d*(r-1)}},avg:{update:function(t,e){for(var n=0,r=0,i=0;i<e.length;i++)null!==e[i]&&(r+=e[i],n++);return r/n}},sum:{args:[{},{length:!0}],state:{count:0,sum:0,points:[]},next:Ud,update:function(t,e){return t.output=e,t.sum+e}},sma:{args:[{},{length:!0}],state:{count:0,sum:0,points:[]},next:Ud,update:function(t,e){var n=(t.sum+e)/(t.count+1);return t.output=e,n}},cma:{args:[{},{length:!0}],state:{count:0,sum:0,points:[]},next:Ud,update:function(t,e){return t.output=(t.sum+e)/(t.count+1),t.output}},ema:{args:[{},{length:!0}],state:{count:0,sum:0,points:[]},next:Ud,update:function(t,e,n){var r=2/(n+1);if(t.count){var i=t.points[t.points.length-1];t.output=(e-i)*r+i}else t.output=e;return t.output}},last:{args:[{},{length:!0}],state:{points:[],count:0},next:Dd,update:function(t,e){return t.output=e,t.count?t.points[0]:e}},rma:{args:[{},{length:!0}],state:{count:0,sum:0,points:[]},next:Ud,update:function(t,e,n){var r=1/n;if(t.count){var i=t.points[t.points.length-1];t.output=r*e+(1-r)*i}else t.output=1;return t.output}},merge_overlapping_intervals:{update:function(t,e){return e.sort((function(t,e){return t[0]-e[0]})).reduce((function(t,e){var n=t.length-1,r=t[n],i=r[1],o=e[0];return i>=o?t[n][1]=Math.max(i,e[1]):t.push(e),t}),[e[0]])}},reverse_intervals:{update:function(t,e){return e.reduce((function(t,e,n,r){return n>0&&(t[n-1][1]=e[0]),n<r.length-1&&t.push([e[1]]),t}),[])}}};function Bd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ld(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jd(t,e,n){return e&&Ld(t.prototype,e),n&&Ld(t,n),t}var Md=function(){function t(){Bd(this,t),this.chunks=[],this.cacheRange={from:null,to:null},this.initialPrices={}}return jd(t,[{key:"saveChunk",value:function(t){var e;if(!this.chunks.length||this.chunks[this.chunks.length-1].to<t.from)e=this.chunks.push(t)-1;else{if(!(this.chunks[0].from>t.to))return;this.chunks.unshift(t),e=0}return 0===e&&(this.cacheRange.from=t.from),e===this.chunks.length-1&&(this.cacheRange.to=t.to),t}},{key:"clear",value:function(){this.chunks.splice(0,this.chunks.length),this.cacheRange.from=this.cacheRange.to=null,this.initialPrices={}}},{key:"trim",value:function(t){if(this.chunks.length){var e=!1;while(this.chunks[0]&&this.chunks[0].to<t)this.chunks.splice(0,1),e=!0;return this.cacheRange.from=this.chunks[0].from,e}}}]),t}();function $d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Fd(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$d(Object(n),!0).forEach((function(e){Hd(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Hd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gd(t,e){return qd(t)||Vd(t,e)||Wd(t,e)||Xd()}function Xd(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vd(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function qd(t){if(Array.isArray(t))return t}function Kd(t){return Kd="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kd(t)}function zd(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Wd(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Wd(t,e){if(t){if("string"===typeof t)return Yd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yd(t,e):void 0}}function Yd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Jd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zd(t,e,n){return e&&Qd(t.prototype,e),n&&Qd(t,n),t}var th=/series\[[a-zA-Z0-9+\-$ ]+\]\.update\(/,eh="vars",nh="fns",rh={candlestick:"ohlc",bar:"ohlc",line:"number",histogram:"number",area:"number",cloudarea:"range",brokenarea:"range",baseline:"number"},ih=function(){function t(){Jd(this,t)}return Zd(t,[{key:"build",value:function(t,e,n){this.paneId=n,this.indicatorId=t.id,this.serieIndicatorsMap=e,this.markets=[];var r,i=zd(ta.state.panes.panes[this.paneId].markets);try{for(i.s();!(r=i.n()).done;){var o=r.value;-1===this.markets.indexOf(o)&&this.markets.push(o)}}catch(p){i.e(p)}finally{i.f()}var a,s=this.parse(t.script),c=zd(s.functions);try{for(c.s();!(a=c.n()).done;){var l=a.value;this.determineFunctionState(l)}}catch(p){c.e(p)}finally{c.f()}var u,d=zd(s.variables);try{for(d.s();!(u=d.n()).done;){var h=u.value;this.determineVariableState(h)}}catch(p){d.e(p)}finally{d.f()}return{output:s.output,silentOutput:s.silentOutput,functions:s.functions,variables:s.variables,references:s.references,markets:s.markets,plots:s.plots}}},{key:"normalizeInput",value:function(t,e){t=t.replace(/([^.])?\b(indicatorId)\b/gi,"$1'".concat(this.indicatorId,"'")),t=t.replace(/([^.])?\b(bar)\b/gi,"$1renderer"),t=t.replace(/([^.]|^)\b(vbuy|vsell|cbuy|csell|lbuy|lsell)\b/gi,"$1renderer.bar.$2"),t=t.replace(/([^.]|^)\b(time)\b([^:])/gi,"$1renderer.localTimestamp$3"),t=t.replace(/(\n|^)\s*?\/\/.*/g,"");var n=/'([^']*)'|"([^"]*)"/,r=null,i=0;do{if(r=n.exec(t)){var o=e.indexOf(r[0]);-1===o&&(o=e.push(r[0])-1),t=t.slice(0,r.index)+"#STRING_"+o+"#"+t.slice(r.index+r[0].length)}}while(r&&++i<1e3);var a,s=/\(/g;i=0;do{if(a=s.exec(t)){var c=Ht(t,a.index,/\(|{|\[/,/\)|}|\]/);if(-1!==c){var l=t.slice(a.index+1,c).replace(/\n/g," ");t=t.slice(0,a.index)+t.slice(a.index,a.index+1)+l.replace(/\n/g,"")+t.slice(c,c+1)+"\n"+t.slice(c+1,t.length),s.lastIndex=c}}}while(a&&++i<1e3);return t}},{key:"determineFunctionState",value:function(t){if(Kd(Nd[t.name])&&"object"===Kd(Nd[t.name].state))for(var e in t.state={},Nd[t.name].state)try{t.state[e]=JSON.parse(JSON.stringify(Nd[t.name].state[e]))}catch(n){t.state[e]=Nd[t.name].state[e]}else t.state={}}},{key:"determineVariableState",value:function(t){t.length>1?t.state=[0]:t.state=0}},{key:"getSilentOutput",value:function(t){var e=t,n=null,r=0;do{if(n=th.exec(e)){var i=n.index+n[0].length-1,o=Ht(e,i);e=e.replace(n[0]+e.slice(i+1,o+1),1)}}while(n&&++r<1e3);return e}},{key:"parse",value:function(t){var e=[],n=[],r=[],i={},o=[],a=[],s=this.normalizeInput(t,a);s=this.parseVariables(s,n),s=this.parseMarkets(s,i);for(var c=0;c<a.length;c++)s=s.replace(new RegExp("#STRING_"+c+"#","g"),a[c].replace(/\$/g,"$$$"));s=this.parseFunctions(s,e,r),s=this.parseReferences(s,o,r),s=this.formatOutput(s);var l=this.getSilentOutput(s);return{output:s,silentOutput:l,functions:e,variables:n,plots:r,markets:i,references:o}}},{key:"formatOutput",value:function(t){var e,n=/\(|{|\[/g,r=0;do{if(e=n.exec(t)){var i="("===e[0],o=Ht(t,e.index,/\(|{|\[/,/\)|}|\]/),a=t.slice(e.index+1,o).replace(/\n/g," ");/if|for|else/.test(t.slice(e.index-2,2))&&(t=t.slice(0,e.index)+t.slice(e.index,e.index+1)+a+t.slice(o,o+1)+(i?"\n":"")+t.slice(o+1,t.length)),n.lastIndex=o}}while(e&&++r<1e3);for(var s=t.trim().split(/\n/),c=0;c<s.length;c++){var l=s[c].match(/renderer.sources\['[\w/:_-]+']\.\w+/g);l&&1===l.length&&(s[c]="if (".concat(l[0],") {\n          ").concat(s[c],"\n        }"))}return s.join("\n").replace(/\n\n/g,"\n")}},{key:"parseVariables",value:function(t,e){var n=/(?:^|\n)\s*((?:var )?[a-zA-Z0-9_]+)\(?(\d*)\)?\s*=\s*([^\n;,]*)?/,r=null,i=0,o=[];do{if(r=n.exec(t)){var a=r[1],s=/^var/.test(a);if(-1!==o.indexOf(a)||s){s&&(a=a.replace(/var\s*/,""),t=t.replace(r[0],"\nvar "+a+"="+r[3]),o.push(a)),t=t.replace(new RegExp("([^.$]|^)\\b("+a+")\\b(?!:)(?!\\()(?!\\$)","ig"),"$1".concat(a,"$"));continue}var c=+r[2]||1;t=t.replace(new RegExp("([^.]|^)\\b("+a+")\\b(?!:)","ig"),"$1".concat(eh,"[").concat(e.length,"]"));var l={length:c};e.push(l),t=t.replace(new RegExp("(".concat(eh,"\\[").concat(e.length-1,"\\])\\(").concat(l.length,"\\)\\s*=\\s*")),"$1=")}}while(r&&++i<1e3);return t=this.determineVariablesType(t,e),t}},{key:"parseSerie",value:function(t,e,n){for(var r=e[1].replace(/^plot/,""),i=Ht(t,e.index+e[1].length),o=t.slice(e.index+e[1].length+1,i),a=e[1]+"("+o+")",s=Gt(o),c={},l=1;l<s.length;l++)try{var u=s[l].match(/^(\w+)\s*=(.*)/),d=Gd(u,3),h=d[1],p=d[2];if(!h||!p.length)continue;var f=p.trim();try{f=JSON.parse(f)}catch(w){}c[h.trim()]=f,s.splice(l,1),l--}catch(w){continue}var m="renderer.indicators['".concat(this.indicatorId,"'].series[").concat(n.length,"]"),v="".concat(m," = "),y=rh[r],b="renderer.localTimestamp";if(c.offset&&(b+="+renderer.timeframe*".concat(c.offset)),"line"!==r&&1===s.length&&(/{/.test(s[0])&&/}/.test(s[0])||/^[\w_]+\$/.test(s[0])))v+=s[0];else if("ohlc"===y)if(4===s.length)v+="{ time: ".concat(b,", open: ").concat(s[0],", high: ").concat(s[1],", low: ").concat(s[2],", close: ").concat(s[3]," }");else{if(1!==s.length)throw new Error("Invalid input for function ".concat(e[1],", expected a ohlc object or 4 number"));/^[A-Z_]+:\w+/.test(s[0])?v+="".concat(s[0],".close === null ? { time: ").concat(b," } : { time: ").concat(b,", open: ").concat(s[0],".open, high: ").concat(s[0],".high, low: ").concat(s[0],".low, close: ").concat(s[0],".close }"):v+=s[0]}else if("range"===y){if(2!==s.length)throw new Error("Invalid input for function ".concat(e[1],", expected 2 arguments (lowerValue and higherValue)"));v+="{ time: ".concat(b,", lowerValue: ").concat(s[0],", higherValue: ").concat(s[1]," }")}else if("number"===y){if(1!==s.length)throw new Error("Invalid input for function ".concat(e[1],", expected 1 value (number)"));v+="{ time: ".concat(b,", value: ").concat(s[0]," }")}var g,S="series[".concat(n.length,"].update(renderer.indicators['").concat(this.indicatorId,"'].series[").concat(n.length,"])"),_=v+",";"histogram"===r?_+=m+".value&&":"line"===r?_+=m+".value !== null&&":"cloudarea"!==r&&"brokenarea"!==r||(_+=m+".lowerValue !== null&&"),_+=S,t=t.replace(a,_),"string"===typeof c.id&&c.id.length?(g=c.id,delete c.id):g=0===n.length?this.indicatorId:Nt(8);var C=Object.keys(this.serieIndicatorsMap).concat(n.map((function(t){return t.id})));return n.push({id:Bt(g,C),type:jl[r]||r,expectedInput:y,options:c}),t}},{key:"parseFunctions",value:function(t,e,n){var r=new RegExp("([a-zA-Z0_9_]+)\\(","g"),i=null,o=0;do{if(i=r.exec(t)){var a=i[1],s=Object.prototype.hasOwnProperty.call(Math,a),c=rh[a.replace(/^plot/,"")],l="."===t[i.index-1];if(s||c||l){r.lastIndex=i.index+i[0].length,"string"===typeof c&&(t=this.parseSerie(t,i,n));continue}var u=Nd[a];if(!u){if(/for|if|rgba/i.test(a)){r.lastIndex=i.index+i[0].length;continue}throw new Error("Function ".concat(a," doesn't exists"))}for(var d={name:a,args:[]},h=0,p=i.index,f=Ht(t,p+i[1].length),m=Gt(t.slice(p+i[1].length+1,f)),v=(u.args?u.args.length:0)+m.length,y=0;y<v;y++){var b=u.args&&u.args[y]?u.args[y]:{},g=Fd({},b);if(b.injected)h++,d.args.push(g);else{v--;var S=m[y-h];"undefined"!==typeof S&&(g.instruction=S),d.args.push(g)}}t="".concat(t.slice(0,p),"utils.").concat(a,".update(").concat(nh,"[").concat(e.length,"].state,").concat(d.args.map((function(t){return t.instruction})).join(","),")").concat(t.slice(f+1,t.length)),e.push(d)}}while(i&&++o<1e3);return t}},{key:"parseMarkets",value:function(t,e){var n=/\b([A-Z_]{3,}:[a-zA-Z0-9/_-]{5,})(:[\w]{4,})?\.?([a-z]{3,})?\b/g,r=null,i=0;do{if(r=n.exec(t)){var o=r[1]+(r[2]?r[2]:""),a=r[3];e[o]||(e[o]=[]),a&&-1===e[o].indexOf(a)&&e[o].push(a);var s="renderer.sources['".concat(o,"']").concat(a?"."+a:"");n.lastIndex=r.index+s.length,t=t.slice(0,r.index)+s+t.slice(r.index+r[0].length)}}while(r&&++i<1e3);return t}},{key:"parseReferences",value:function(t,e,n){var r=this,i=new RegExp("\\$(\\w+[a-z_\\-0-9]+)\\b"),o=null,a=0;do{if(o=i.exec(t)){var s=o[1];try{(function(){var i=r.getSeriePath(s,n),o=Gd(i,2),a=o[0],c=o[1];e.find((function(t){return t.indicatorId===a&&t.plotIndex===c}))||e.push({indicatorId:a,serieId:s,plotIndex:c}),t=t.replace(new RegExp("\\$("+s+")\\b","ig"),"renderer.indicators['".concat(a,"'].series[").concat(c,"]"))})()}catch(c){throw{message:'The serie "'.concat(s,'" was not found in the current indicators'),status:"indicator-required",serieId:s}}}}while(o&&++a<1e3);return t}},{key:"getSeriePath",value:function(t,e){var n,r,i=e.find((function(e){return e.id===t||e.id.replace(/\W/g,"")===t.replace(/\W/g,"")}));if(i&&(n=this.indicatorId,r=e.indexOf(i)),!n&&this.serieIndicatorsMap[t]){var o=this.serieIndicatorsMap[t];n=o.indicatorId,r=o.plotIndex}if(n||-1===Object.values(this.serieIndicatorsMap).map((function(t){return t.indicatorId})).indexOf(t)||(n=t,r=0),n)return[n,r]}},{key:"determineVariablesType",value:function(t,e){var n,r=zd(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=e.indexOf(i),a=new RegExp("".concat(eh,"\\[").concat(o,"\\](?:\\[(\\d+)\\])?"),"g"),s=null,c=0;do{if(s=a.exec(t)){var l=s[1],u=s.index+s[0].length;if("undefined"===typeof l){var d="["===t[u];t=t.substring(0,u)+".state"+(d?"":"[0]")+t.substring(u)}else{var h=t.substring(0,s.index),p="".concat(eh,"[").concat(o,"].state[Math.min(").concat(eh,"[").concat(o,"].state.length-1,").concat(l,")]"),f=t.substring(s.index+s[0].length);t="".concat(h).concat(p).concat(f),a.lastIndex=h.length+p.length}i.length=Math.max(i.length,(+l||0)+1)}}while(s&&++c<1e3);if(!i.length)throw new Error("Unexpected no length on var");1===i.length&&(t=t.replace(new RegExp("".concat(eh,"\\[").concat(o,"\\]\\.state\\[\\d+\\]"),"g"),"".concat(eh,"[").concat(o,"].state"))),t=t.replace(new RegExp("#".concat(eh,"\\[").concat(o,"\\]\\.state\\[\\d+\\]"),"g"),"".concat(eh,"[").concat(o,"].state"))}}catch(m){r.e(m)}finally{r.f()}return t}},{key:"getAdapter",value:function(t){return function(){return new Function("renderer",nh,eh,"series","options","utils",'"use strict"; '+t)}()}},{key:"getRendererIndicatorData",value:function(t){var e=JSON.parse(JSON.stringify(t.model)),n=e.functions,r=e.variables,i=e.plots;t.options.minLength=0;var o,a=zd(n);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.length=0;for(var c=0;c<s.args.length;c++)if("undefined"!==typeof s.args[c].instruction&&""!==s.args[c].instruction)try{s.args[c].instruction=new Function("options","'use strict'; return ".concat(s.args[c].instruction))(t.options),s.state.points&&s.args[c].length&&!isNaN(s.args[c].instruction)&&(s.length+=s.args[c].instruction)}catch(p){}s.state.points&&(t.options.minLength=Math.max(t.options.minLength,s.length))}}catch(f){a.e(f)}finally{a.f()}var l,u=[],d=zd(i);try{for(d.s();!(l=d.n()).done;){var h=l.value;u.push(this.getCustomPlotOptions(t,h))}}catch(f){d.e(f)}finally{d.f()}return{canRender:t.options.minLength<=1,series:[],functions:n,variables:r,plotsOptions:u,minLength:t.options.minLength}}},{key:"getCustomPlotOptions",value:function(t,e){var n={};for(var r in e.options)try{n[r]=new Function("options","'use strict'; return ".concat(e.options[r]))(t.options)}catch(i){n[r]=e.options[r]}return n}}]),t}();function oh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ah(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oh(Object(n),!0).forEach((function(e){dh(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function sh(t){return uh(t)||lh(t)||yh(t)||ch()}function ch(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function lh(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function uh(t){if(Array.isArray(t))return bh(t)}function dh(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hh(t,e){return mh(t)||fh(t,e)||yh(t,e)||ph()}function ph(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fh(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function mh(t){if(Array.isArray(t))return t}function vh(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=yh(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function yh(t,e){if(t){if("string"===typeof t)return bh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bh(t,e):void 0}}function bh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _h(t,e,n){return e&&Sh(t.prototype,e),n&&Sh(t,n),t}var Ch=function(){function t(e){gh(this,t),this.loadedIndicators=[],this.renderedRange={from:null,to:null},this.markets={},this.alerts={},this.timezoneOffset=0,this.fillGapsWithEmpty=!0,this.propagateInitialPrices=!0,this.priceScales=[],this.queuedTrades=[],this.seriesIndicatorsMap={},this._queueHandler=this.releaseQueue.bind(this),this._refreshDecimalsHandler=this.refreshAutoDecimals.bind(this),this.paneId=e,this.chartCache=new Md,this.serieBuilder=new ih,this.setTimeframe(ta.state[this.paneId].timeframe),this.setTimezoneOffset(ta.state.settings.timezoneOffset),this.refreshMarkets(),Ca.on("decimals",this._refreshDecimalsHandler),this.fillGapsWithEmpty=Boolean(ta.state[this.paneId].fillGapsWithEmpty)}return _h(t,[{key:"refreshMarkets",value:async function(){if(ta.state.app.isExchangesReady)this._promiseOfMarkets&&(this._promiseOfMarkets=null);else{if(this._promiseOfMarkets)return this._promiseOfMarkets;this._promiseOfMarkets=Fr((function(t){return t.app.isExchangesReady})).then(this.refreshMarkets.bind(this))}var t,e=ta.state.panes.panes[this.paneId].markets,n=ta.state.app.historicalMarkets,r=ta.state.settings.normalizeWatermarks,i=[],o={},a=vh(e);try{for(a.s();!(t=a.n()).done;){var s=t.value,c=s.split(":"),l=hh(c,1),u=l[0],d=ta.state.panes.marketsListeners[s],h=s;d&&(h=ke(d.local)),o[s]={active:ta.state.exchanges[u]&&!ta.state.exchanges[u].disabled&&!ta.state[this.paneId].hiddenMarkets[s],index:h,historical:-1!==n.indexOf(s)},o[s].active&&-1===i.indexOf(h)&&i.push((!r&&d?d.exchange+":":"")+h)}}catch(p){a.e(p)}finally{a.f()}this.markets=o,ta.state.app.isExchangesReady&&await this.retrieveAlerts(),this.updateWatermark(i),this.resetPriceScales()}},{key:"setTimeframe",value:function(t){/t$/.test(t)?this.type="tick":this.type="time",this.timeframe=parseFloat(t),this.isOddTimeframe=Qt(this.timeframe),this.updateWatermark()}},{key:"setTimezoneOffset",value:function(t){var e=this.timezoneOffset;this.timezoneOffset=t/1e3;var n=this.timezoneOffset-e;this.activeRenderer&&(this.activeRenderer.localTimestamp+=n)}},{key:"createChart",value:function(t){var e=Fl(Il);ta.state[this.paneId].showVerticalGridlines&&(e.grid.vertLines.visible=ta.state[this.paneId].showVerticalGridlines,e.grid.vertLines.color=ta.state[this.paneId].verticalGridlinesColor),ta.state[this.paneId].showHorizontalGridlines&&(e.grid.horzLines.visible=ta.state[this.paneId].showHorizontalGridlines,e.grid.horzLines.color=ta.state[this.paneId].horizontalGridlinesColor),ta.state[this.paneId].showWatermark&&(e.watermark.visible=ta.state[this.paneId].showWatermark,e.watermark.color=ta.state[this.paneId].watermarkColor);var n=ta.state[this.paneId].barSpacing;n&&(e.timeScale.barSpacing=ta.state[this.paneId].barSpacing,e.timeScale.rightOffset=Math.ceil(.05*t.clientWidth/e.timeScale.barSpacing)),this.chartInstance=gl["b"](t,e),this.chartElement=t,this.addEnabledSeries(),this.updateWatermark(),this.updateFontSize()}},{key:"removeChart",value:function(){if(this.chartInstance){while(this.loadedIndicators.length)this.removeIndicator(this.loadedIndicators[0]);this.chartInstance.remove(),this.priceScales.splice(0,this.priceScales.length),this.chartInstance=null}}},{key:"getLoadedIndicator",value:function(t){for(var e=0;e<this.loadedIndicators.length;e++)if(this.loadedIndicators[e].id===t)return this.loadedIndicators[e]}},{key:"setIndicatorOption",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.getLoadedIndicator(t);if(i&&(i.options[e]=n,!r))if("visible"!==e){"priceFormat"===e&&n.auto&&this.refreshAutoDecimals(t);for(var o=0;o<i.apis.length;o++)"priceFormat"!==e||n.auto||(i.apis[o].precision=n.precision),i.apis[o].applyOptions(dh({},e,n));this.optionRequiresRedraw(e)&&this.redrawIndicator(t)}else this.toggleIndicatorVisibility(i,n)}},{key:"toggleIndicatorVisibility",value:function(t,e){e?(t.model?this.createIndicatorSeries(t):this.prepareIndicator(t),this.redrawIndicator(t.id)):this.removeIndicatorSeries(t)}},{key:"optionRequiresRedraw",value:function(t){var e=/upColor|downColor|wickDownColor|wickUpColor|borderDownColor|borderUpColor|compositeOperation/i;if(e.test(t))return!0;var n=/color|priceFormat|linetype|width|style/i;return!n.test(t)}},{key:"rebuildIndicator",value:function(t){this.removeIndicator(this.getLoadedIndicator(t)),this.addIndicator(t)&&this.redrawIndicator(t)}},{key:"getReferencedIndicators",value:function(t){return t.model.references.slice().map((function(t){return t.indicatorId})).filter((function(t,e,n){return n.indexOf(t)===e}))}},{key:"redrawIndicator",value:function(t){var e=this.getLoadedIndicator(t);this.clearIndicatorSeries(e);var n,r=[],i=vh(this.chartCache.chunks);try{for(i.s();!(n=i.n()).done;){var o=n.value;r=r.concat(o.bars)}}catch(s){i.e(s)}finally{i.f()}var a=this.getReferencedIndicators(e);this.ensureIndicatorVisible(a),this.renderBars(r,[].concat(sh(a),[t]))}},{key:"ensureIndicatorVisible",value:function(t){var e,n=vh(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.loadedIndicators[r]&&!1===this.loadedIndicators[r].options.visible&&this.setIndicatorOption(r,"visible",!0,!0)}}catch(i){n.e(i)}finally{n.f()}}},{key:"getVisibleRange",value:function(){var t=this.chartInstance.timeScale().getVisibleRange();return t?(t.from-=this.timezoneOffset,t.to-=this.timezoneOffset,t):t}},{key:"addEnabledSeries",value:function(){for(var t in ta.state[this.paneId].indicators)this.addIndicator(t)}},{key:"updateWatermark",value:function(t){if(t)if(ta.state.settings.normalizeWatermarks)this.watermark=t.join(" | ");else{var e=t.length-3;this.watermark=t.slice(0,3).join(" + ")+(e>0?" + "+e+" other"+(e>1?"s":""):"")}this.chartInstance&&this.chartInstance.applyOptions({watermark:{text:"    ".concat(this.watermark+" | "+Wt(ta.state[this.paneId].timeframe),"    "),visible:ta.state[this.paneId].showWatermark,color:ta.state[this.paneId].watermarkColor}})}},{key:"updateFontSize",value:function(){var t=ta.state.panes.panes[this.paneId].zoom||1,e=ta.state.settings.normalizeWatermarks?72:48;this.chartInstance.applyOptions({layout:{fontSize:14*t},watermark:{fontSize:e*t}})}},{key:"addIndicator",value:function(t,e){if(this.getLoadedIndicator(t))return!0;if(e>5)return!1;var n=ta.state[this.paneId].indicators[t],r=n.options||{},i={id:t,options:JSON.parse(JSON.stringify(r)),script:n.script,model:null,adapter:null,silentAdapter:null,apis:[]};try{this.prepareIndicator(i)}catch(o){return"indicator-required"!==o.status||this.resolveDependency(i.id,o.serieId,e||0)||Un.confirm({message:'"'.concat(i.id,'" indicator need the "').concat(o.serieId,'" serie but that one WAS NOT found anywhere in the current indicators.'),ok:"I see",cancel:!1}),o.status||Un.isDialogOpened("indicator")||Un.open(Vu,{paneId:this.paneId,indicatorId:i.id},"indicator"),!1}return this.loadedIndicators.push(i),!0}},{key:"resolveDependency",value:function(t,e,n){var r=ta.state[this.paneId].indicators;for(var i in r)if(i!==t&&r[i].series&&-1!==r[i].series.indexOf(e))return!!this.addIndicator(i,n+1)&&(0===n&&this.addIndicator(t,n+1),!0);return!(!r[e]||!this.addIndicator(r[e].id,n+1))&&(0===n&&this.addIndicator(t,n+1),!0)}},{key:"prepareIndicator",value:function(t){try{var e=this.serieBuilder.build(t,this.seriesIndicatorsMap,this.paneId);ta.state[this.paneId].indicatorsErrors[t.id]&&ta.commit(this.paneId+"/SET_INDICATOR_ERROR",{id:t.id,error:null}),t.model=e,!1!==t.options.visible&&this.createIndicatorSeries(t)}catch(n){if(!1!==t.options.visible)throw ta.commit(this.paneId+"/SET_INDICATOR_ERROR",{id:t.id,error:n.message}),n}}},{key:"bindIndicator",value:function(t,e){if(e&&"undefined"===typeof e.indicators[t.id]&&t.model){if(e.indicators[t.id]=this.serieBuilder.getRendererIndicatorData(t),!this.activeRenderer||e===this.activeRenderer){for(var n=0;n<e.indicators[t.id].plotsOptions.length;n++)t.apis[n].applyOptions(e.indicators[t.id].plotsOptions[n]);t.adapter=this.serieBuilder.getAdapter(t.model.output),t.silentAdapter=this.serieBuilder.getAdapter(t.model.silentOutput)}return this.prepareRendererForIndicators(t,e),t}}},{key:"unbindIndicator",value:function(t,e){e&&"undefined"!==typeof e.indicators[t.id]&&delete e.indicators[t.id]}},{key:"ensurePriceScale",value:function(t,e){if(-1===this.priceScales.indexOf(t)){this.priceScales.push(t);var n=ta.state[this.paneId].priceScales[t];n||(n={},e&&e.options.scaleMargins?n.scaleMargins=e.options.scaleMargins:n.scaleMargins={top:.1,bottom:.2},ta.commit(this.paneId+"/SET_PRICE_SCALE",{id:t,priceScale:n})),this.refreshPriceScale(t)}}},{key:"resetPriceScales",value:function(){for(var t=0;t<this.priceScales.length;t++)this.chartInstance.priceScale(this.priceScales[t]).applyOptions({autoScale:!0})}},{key:"removeIndicator",value:function(t){"string"===typeof t&&(t=this.getLoadedIndicator(t)),t&&(this.removeIndicatorSeries(t),this.loadedIndicators.splice(this.loadedIndicators.indexOf(t),1))}},{key:"clearChart",value:function(t){t||this.preventPan();var e,n=vh(this.loadedIndicators);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.clearIndicatorSeries(r)}}catch(i){n.e(i)}finally{n.f()}this.renderedRange.from=this.renderedRange.to=null}},{key:"clearData",value:function(){this.activeRenderer=null,this.activeChunk=null,this.queuedTrades.splice(0,this.queuedTrades.length)}},{key:"clearPriceLines",value:function(t){for(var e=0;e<this.loadedIndicators.length;e++)if(!t||-1!==t.indexOf(this.loadedIndicators[e].id)){this._priceIndicatorId===this.loadedIndicators[e].id&&(this._alertsRendered=!1);for(var n=0;n<this.loadedIndicators[e].apis.length;n++)this.loadedIndicators[e].apis[n].removeAllPriceLines()}}},{key:"clear",value:function(){this.chartCache.clear(),this.clearData(),this.clearChart(),this.setTimeframe(ta.state[this.paneId].timeframe),this.propagateInitialPrices=!0}},{key:"resample",value:function(t){var e=Zt(this.activeRenderer.timestamp,t),n=this.getActiveChunk();if(n)for(var r in this.activeRenderer.sources)!1===this.activeRenderer.sources[r].empty&&n.bars.push(this.cloneSourceBar(this.activeRenderer.sources[r],e));if(this.setTimeframe(t),this.chartCache.chunks.length){for(var i=function(t,e,n){return"number"===typeof t.close?e.open=e.high=e.low=e.close=t.close:"undefined"!==typeof e.close&&null!==e.close||(e.open=e.high=e.low=e.close=null,e.vbuy=0,e.vsell=0,e.cbuy=0,e.csell=0,e.lbuy=0,e.lsell=0),e.timestamp=n,e},o={},a=0;a<this.chartCache.chunks.length;a++){for(var s=0;s<this.chartCache.chunks[a].bars.length;s++){var c=this.chartCache.chunks[a].bars[s],l=c.exchange+":"+c.pair,u=Zt(c.timestamp,this.timeframe,this.isOddTimeframe);!o[l]||o[l].timestamp<u?o[l]?o[l]=i(o[l],c,u):o[l]=i({},c,u):(null===typeof o[l].open&&(o[l].open=c.open,o[l].high=c.high,o[l].low=c.low,o[l].close=c.close),o[l].vbuy+=c.vbuy,o[l].vsell+=c.vsell,o[l].cbuy+=c.cbuy,o[l].csell+=c.csell,o[l].lbuy+=c.lbuy,o[l].lsell+=c.lsell,o[l].close=c.close,o[l].high=Math.max(o[l].high,c.high,c.open,c.close),o[l].low=Math.min(o[l].low,c.low,c.open,c.close),this.chartCache.chunks[a].bars.splice(s--,1))}if(a&&this.chartCache.chunks[a].bars.length<ie){if(this.chartCache.chunks[a].bars.length){var d=ie-this.chartCache.chunks[a-1].bars.length;d&&(this.chartCache.chunks[a-1].bars=this.chartCache.chunks[a-1].bars.concat(this.chartCache.chunks[a].bars.splice(0,d)))}this.chartCache.chunks[a].bars.length||(this.chartCache.chunks.splice(a,1),a--)}}this.activeRenderer=null,this.renderAll()}}},{key:"getActiveChunk",value:function(){return this.activeChunk||this.chartCache.cacheRange.to!==this.activeRenderer.timestamp?(this.activeChunk&&(this.activeChunk.active=!1),this.activeChunk=this.chartCache.saveChunk({from:this.activeRenderer.timestamp,to:this.activeRenderer.timestamp,active:!0,rendered:!0,bars:[]})):(this.activeChunk=this.chartCache.chunks[this.chartCache.chunks.length-1],this.activeChunk.active=!0),this.activeChunk}},{key:"destroy",value:function(){this.chartCache.clear(),this.clearData(),this.clearChart(),this.removeChart(),this.clearQueue(),Ca.off("decimals",this._refreshDecimalsHandler)}},{key:"clearIndicatorSeries",value:function(t){for(var e=0;e<t.apis.length;e++)t.apis[e].removeAllPriceLines(),t.apis[e].setData([])}},{key:"setupQueue",value:function(){this._releaseQueueInterval||(ta.state[this.paneId].refreshRate?this._releaseQueueInterval=setInterval(this._queueHandler,ta.state[this.paneId].refreshRate):this._releaseQueueInterval=requestAnimationFrame(this._queueHandler))}},{key:"clearQueue",value:function(){this._releaseQueueInterval&&(clearInterval(this._releaseQueueInterval),cancelAnimationFrame(this._releaseQueueInterval),delete this._releaseQueueInterval,this.releaseQueue())}},{key:"releaseQueue",value:function(){this.queuedTrades.length&&(this.renderRealtimeTrades(this.queuedTrades),this.queuedTrades.splice(0,this.queuedTrades.length))}},{key:"queueTrades",value:function(t){Array.prototype.push.apply(this.queuedTrades,t),ta.state[this.paneId].refreshRate||(this._releaseQueueInterval=requestAnimationFrame(this._queueHandler))}},{key:"renderRealtimeTrades",value:function(t){if(t.length){for(var e=!1,n=0;n<t.length;n++){var r=t[n],i=r.exchange+":"+r.pair;if("undefined"!==typeof this.markets[i]){var o=void 0;if(o=this.activeRenderer?"time"===this.activeRenderer.type?Zt(r.timestamp/1e3,this.timeframe,this.isOddTimeframe):this.activeRenderer.bar.cbuy+this.activeRenderer.bar.csell>=this.timeframe?Math.max(this.activeRenderer.timestamp+.001,Math.round(r.timestamp/1e3)):this.activeRenderer.timestamp:r.timestamp/1e3,!this.activeRenderer||this.activeRenderer.timestamp<o)if(this.activeRenderer){for(var a in(!this.activeChunk||this.activeChunk.to<this.activeRenderer.timestamp&&this.activeChunk.bars.length>=ie)&&this.getActiveChunk(),this.activeRenderer.bar.empty||this.updateBar(this.activeRenderer),this.activeRenderer.sources)!1===this.activeRenderer.sources[a].empty&&this.activeChunk.bars.push(this.cloneSourceBar(this.activeRenderer.sources[a],this.activeRenderer.timestamp));this.activeChunk.to=this.chartCache.cacheRange.to=this.activeRenderer.timestamp,this.renderedRange.to<this.activeRenderer.timestamp&&(this.renderedRange.to=this.activeRenderer.timestamp),this.nextBar(o,this.activeRenderer)}else this.activeRenderer=this.createRenderer(o);var s=r.price*r.size;this.activeRenderer.sources[i]&&"undefined"!==typeof this.activeRenderer.sources[i].pair||(this.propagateInitialPrices&&(this.chartCache.initialPrices[i]={exchange:r.exchange,pair:r.pair,price:r.price},e||(e=!0)),this.activeRenderer.sources[i]={pair:r.pair,exchange:r.exchange,close:+r.price,active:this.markets[i].active},this.resetBar(this.activeRenderer.sources[i]));var c=this.markets[i].active;r.liquidation?(this.activeRenderer.sources[i]["l"+r.side]+=s,this.activeRenderer.bar.empty=!1,c&&(this.activeRenderer.bar["l"+r.side]+=s)):(this.activeRenderer.sources[i].close=+r.price,this.activeRenderer.sources[i].empty?this.activeRenderer.sources[i].open=this.activeRenderer.sources[i].high=this.activeRenderer.sources[i].low=this.activeRenderer.sources[i].close:(this.activeRenderer.sources[i].high=Math.max(this.activeRenderer.sources[i].high,this.activeRenderer.sources[i].close),this.activeRenderer.sources[i].low=Math.min(this.activeRenderer.sources[i].low,this.activeRenderer.sources[i].close)),this.activeRenderer.sources[i]["c"+r.side]+=r.count,this.activeRenderer.sources[i]["v"+r.side]+=s,this.activeRenderer.sources[i].empty=!1,c&&(this.activeRenderer.bar["v"+r.side]+=s,this.activeRenderer.bar["c"+r.side]+=r.count,this.activeRenderer.bar.empty=!1))}}this.activeRenderer&&(e?this.renderAll():this.activeRenderer.bar.empty||(this.updateBar(this.activeRenderer),this.renderedRange.to<this.activeRenderer.timestamp&&(this.renderedRange.to=this.activeRenderer.timestamp)))}}},{key:"cloneSourceBar",value:function(t,e){return{pair:t.pair,exchange:t.exchange,timestamp:e||t.timestamp,open:t.open,high:t.high,low:t.low,close:t.close,vbuy:t.vbuy,vsell:t.vsell,cbuy:t.cbuy,csell:t.csell,lbuy:t.lbuy,lsell:t.lsell}}},{key:"renderBars",value:function(t,e,n,r){t.length&&this.prependInitialPrices(t,n),this.clearPriceLines(e);var i,o,a={},s=null,c=null;if(t.length){if(this.activeRenderer&&this.activeRenderer.timestamp>t[t.length-1].timestamp)for(var l=Object.values(this.activeRenderer.sources).filter((function(t){return!1===t.empty})),u=0;u<l.length;u++){var d=l[u];d.timestamp=this.activeRenderer.timestamp;for(var h=t.length-1;h>=0;h--){var p=t[h];if(p.timestamp<this.activeRenderer.timestamp){t.splice(h+1,0,d),l.splice(u,1),u--;break}if(p.exchange===d.exchange&&p.pair===d.pair){p.vbuy+=d.vbuy,p.vsell+=d.vsell,p.cbuy+=d.cbuy,p.csell+=d.csell,p.lbuy+=d.lbuy,p.lsell+=d.lsell,p.open=d.open,p.high=d.high,p.low=d.low,p.close=d.close,l.splice(u,1),u--;break}}}}else if(this.activeRenderer&&this.activeRenderer.bar&&!this.activeRenderer.bar.empty&&(t=Object.values(this.activeRenderer.sources).filter((function(t){return!1===t.empty}))),!t.length)return;for(var f,m=0,v=0;v<=t.length;v++){var y=t[v];if(!y||!i||y.timestamp>i.timestamp){if(i){if(i.bar.empty&&!this.fillGapsWithEmpty&&y){this.nextBar(y.timestamp,i);continue}for(var b in null===s&&(s=i.timestamp),c=i.timestamp,o=this.computeBar(i,e),o)"undefined"===typeof a[b]&&(a[b]=[]),a[b].push(o[b])}if(!y)break;if(m++,i){if(this.fillGapsWithEmpty&&"time"===i.type){var g=(y.timestamp-i.timeframe-i.timestamp)/i.timeframe;if(g>0)for(var S=0;S<g;S++)for(var _ in this.incrementRendererBar(i),o)"undefined"===typeof a[_]&&(a[_]=[]),a[_].push({time:i.localTimestamp})}this.nextBar(y.timestamp,i)}else i=this.createRenderer(y.timestamp||this.activeRenderer.timestamp,e)}var C=y.exchange+":"+y.pair,w=this.markets[C].active;w&&!y.empty&&(i.bar.empty=!1,i.bar.vbuy+=y.vbuy,i.bar.vsell+=y.vsell,i.bar.cbuy+=y.cbuy,i.bar.csell+=y.csell,i.bar.lbuy+=y.lbuy,i.bar.lsell+=y.lsell),i.sources[C]=this.cloneSourceBar(y),i.sources[C].empty=!1,i.sources[C].active=w}if(this.activeRenderer){for(var T in this.activeRenderer.bar=i.bar,i.indicators)this.activeRenderer.indicators[T]=i.indicators[T];for(var k in i.sources)this.activeRenderer.sources[k]=i.sources[k]}else this.activeRenderer=i;e&&e.length||(this.activeRenderer.length=m,f=this.chartInstance.timeScale().scrollPosition(),t.length?(this.renderedRange.from=s,this.renderedRange.to=c):this.renderedRange.from=this.renderedRange.to=null),this.replaceData(a,r),f&&this.chartInstance.timeScale().scrollToPosition(f,!1),this.renderAlerts()}},{key:"prependInitialPrices",value:function(t,e){var n=this,r=Object.keys(this.markets).filter((function(t){return n.markets[t].historical})),i=100*r.length;if(this.propagateInitialPrices){var o=t[0].timestamp;if(e)for(var a=0;a<t.length;a++){var s=t[a].exchange+":"+t[a].pair,c=void 0;if(e){if(t[a].timestamp<=o){-1!==(c=r.indexOf(s))&&r.splice(c,1);continue}if(-1!==(c=r.indexOf(s)))this.chartCache.initialPrices[s]={exchange:t[a].exchange,pair:t[a].pair,price:t[a].close},r.splice(c,1);else if(!r.length||a>i)break}}for(var l in this.chartCache.initialPrices){var u=this.chartCache.initialPrices[l].price,d=this.chartCache.initialPrices[l].exchange,h=this.chartCache.initialPrices[l].pair,p=this.resetBar({timestamp:o,exchange:d,pair:h,open:u,high:u,low:u,close:u});t.unshift(p)}}}},{key:"removeIndicatorSeries",value:function(t){for(var e=0;e<t.apis.length;e++)this.chartInstance.removeSeries(t.apis[e]),t.apis.splice(e--,1);this.unbindIndicator(t,this.activeRenderer);var n="undefined"===typeof this.loadedIndicators.find((function(e){return e.id!==t.id&&!1!==e.options.visible&&e.options.priceScaleId===t.options.priceScaleId}));n&&this.priceScales.splice(this.priceScales.indexOf(t.options.priceScaleId),1)}},{key:"createIndicatorSeries",value:function(t){for(var e=[],n=0;n<t.model.plots.length;n++){var r=t.model.plots[n],i=Xt("add-"+r.type+"-series"),o=this.serieBuilder.getCustomPlotOptions(t,r),a=ah(ah(ah(ah({},Ol),Ml[r.type]||{}),t.options),o);a.scaleMargins&&delete a.scaleMargins;var s=this.chartInstance[i](a);s.id=r.id,a.priceFormat&&"number"===typeof a.priceFormat.precision&&(s.precision=a.priceFormat.precision),this.seriesIndicatorsMap[r.id]={indicatorId:t.id,plotIndex:n},e.push(r.id),t.apis.push(s)}ta.commit(this.paneId+"/SET_INDICATOR_SERIES",{id:t.id,series:e}),this.ensurePriceScale(t.options.priceScaleId,t),this.bindIndicator(t,this.activeRenderer)}},{key:"refreshPriceScale",value:function(t){var e=ta.state[this.paneId].priceScales[t];this.chartInstance.priceScale(t).applyOptions(ah({},e))}},{key:"preventPan",value:function(){var t=this;if(!this.panPrevented){var e=100;"undefined"!==typeof this._releasePanTimeout&&clearTimeout(this._releasePanTimeout),this.panPrevented=!0,this._releasePanTimeout=window.setTimeout((function(){t.panPrevented=!1}),e)}}},{key:"renderAll",value:function(t,e){var n=this;if(this.chartInstance){if(this._promiseOfMarkets)return this._promiseOfMarketsRender||(this._promiseOfMarketsRender=this._promiseOfMarkets.then((function(){n._promiseOfMarketsRender=null,n.renderAll(!1,!0)}))),this._promiseOfMarketsRender;this.clearChart(e),this.renderBars(this.chartCache.chunks.length?this.chartCache.chunks.reduce((function(t,e){return t.concat(e.bars)}),[]):[],null,t,e)}}},{key:"retrieveAlerts",value:async function(){for(var t=this,e=Object.values(this.markets).reduce((function(t,e){return-1===t.indexOf(e.index)&&t.push(e.index),t}),[]),n=0,r=Object.keys(this.alerts);n<r.length;n++){var i=r[n];-1===e.indexOf(i)&&delete this.alerts[i]}var o,a=vh(e);try{var s=async function(){var e=o.value;if(t.alerts[e])return"continue";t.alerts[e]=[],await pn.getAlerts(e).then((function(n){for(var r=0;r<n.length;r++)t.alerts[e].push(n[r])}))};for(a.s();!(o=a.n()).done;)await s()}catch(c){a.e(c)}finally{a.f()}}},{key:"renderAlerts",value:function(){if(!this._alertsRendered&&ta.state.settings.alerts){var t=this.getPriceApi();if(t){for(var e in this.alerts)for(var n=0;n<this.alerts[e].length;n++)this.renderAlert(this.alerts[e][n],t);this._alertsRendered=!0}}}},{key:"triggerAlert",value:function(t,e){if(this.alerts[t]){var n=this.alerts[t].find((function(t){return t.price===e}));if(n){ta.state.settings.alertSound&&mo.playOnce(ta.state.settings.alertSound),n.triggered=!0;var r=this.getPriceApi(),i=r.getPriceLine(e);i&&r.removePriceLine(i),this.renderAlert(n,r)}}}},{key:"renderAlert",value:function(t,e,n){var r,i;if(t.timestamp){var o=Zt(t.timestamp,this.timeframe);r=this.chartInstance.timeScale().coordinateToLogical(this.chartInstance.timeScale().timeToCoordinate(o))}return t.triggered&&(i="✔"),e.createPriceLine({market:t.market,index:r,price:t.price,color:n||ta.state.settings.alertsColor,lineWidth:ta.state.settings.alertsLineWidth,lineStyle:ta.state.settings.alertsLineStyle,title:i})}},{key:"replaceData",value:function(t,e){e||this.preventPan();for(var n=this.loadedIndicators.length-1;n>=0;n--)if(!1!==this.loadedIndicators[n].options.visible)for(var r=0;r<this.loadedIndicators[n].apis.length;r++){var i=this.loadedIndicators[n].apis[r].id;if(t[i])try{this.loadedIndicators[n].apis[r].setData(t[i])}catch(o){ta.commit(this.paneId+"/SET_INDICATOR_ERROR",{id:this.loadedIndicators[n].id,error:o.message}),this.setIndicatorOption(this.loadedIndicators[n].id,"visible",!1)}}}},{key:"updateBar",value:function(t){this.preventPan();for(var e=0;e<this.loadedIndicators.length;e++)if(!1!==this.loadedIndicators[e].options.visible){var n=this.loadedIndicators[e],r=t.indicators[n.id];r.canRender?this.loadedIndicators[e].adapter(t,r.functions,r.variables,n.apis,n.options,Nd):this.loadedIndicators[e].silentAdapter(t,r.functions,r.variables,n.apis,n.options,Nd)}}},{key:"computeBar",value:function(t,e){for(var n={},r=0;r<this.loadedIndicators.length;r++)if(!(e&&-1===e.indexOf(this.loadedIndicators[r].id)||!1===this.loadedIndicators[r].options.visible)){var i=this.loadedIndicators[r],o=t.indicators[i.id];o.series=[];try{i.silentAdapter(t,o.functions,o.variables,i.apis,i.options,Nd)}catch(s){ta.commit(this.paneId+"/SET_INDICATOR_ERROR",{id:i.id,error:s.message});continue}for(var a=0;a<o.series.length;a++){if(!i.model.plots[a])break;t.length<o.minLength||!o.series[a]||"undefined"!==typeof o.series[a].value&&null===o.series[a].value||"undefined"!==typeof o.series[a].lowerValue&&null===o.series[a].lowerValue||"histogram"===i.model.plots[a].type&&0===o.series[a].value||(n[i.apis[a].id]=o.series[a])}}return n}},{key:"getPriceApi",value:function(){for(var t=0;t<this.loadedIndicators.length;t++)for(var e=0;e<this.loadedIndicators[t].apis.length;e++){var n=this.loadedIndicators[t].apis[e];if("right"===n.options().priceScaleId)return this._priceIndicatorId=this.loadedIndicators[t].id,n}}},{key:"createRenderer",value:function(t,e){t=Zt(t,this.timeframe);var n={timestamp:t,localTimestamp:t+this.timezoneOffset,timeframe:this.timeframe,type:this.type,length:1,indicators:{},sources:{},bar:{vbuy:0,vsell:0,cbuy:0,csell:0,lbuy:0,lsell:0,empty:!0}};this.loadedIndicators=this.loadedIndicators.sort((function(t,e){var n=t.model?t.model.references.length:0,r=e.model?e.model.references.length:0;return n-r}));var r,i=vh(this.loadedIndicators);try{for(i.s();!(r=i.n()).done;){var o=r.value;e&&-1===e.indexOf(o.id)||!1===o.options.visible||this.bindIndicator(o,n)}}catch(a){i.e(a)}finally{i.f()}return n}},{key:"nextBar",value:function(t,e){if(this.fillGapsWithEmpty&&e===this.activeRenderer&&"time"===this.activeRenderer.type&&this.activeRenderer.timestamp<t-this.activeRenderer.timeframe)for(var n=(t-this.activeRenderer.timeframe-this.activeRenderer.timestamp)/this.activeRenderer.timeframe,r=0;r<this.loadedIndicators.length;r++)for(var i=0;i<this.loadedIndicators[r].apis.length;i++)for(var o=0;o<n;o++)0===r&&0===i&&this.incrementRendererBar(e),this.loadedIndicators[r].apis[i].update({time:e.localTimestamp});this.incrementRendererBar(e),this.resetRendererBar(e),e.timestamp=t,e.localTimestamp=t+this.timezoneOffset}},{key:"incrementRendererBar",value:function(t){t.length++,t.timestamp+=t.timeframe,t.localTimestamp+=t.timeframe;for(var e=0;e<this.loadedIndicators.length;e++){var n=t.indicators[this.loadedIndicators[e].id];if(n){n.canRender=t.length>=n.minLength;for(var r=0;r<n.functions.length;r++){var i=n.functions[r];"function"===typeof Nd[i.name].next&&Nd[i.name].next(i)}for(var o=0;o<n.variables.length;o++){var a=n.variables[o];a.length>1&&(a.state.unshift(a.state[0]),a.state.length>a.length&&a.state.pop())}}}}},{key:"resetRendererBar",value:function(t){if(t.bar={vbuy:0,vsell:0,cbuy:0,csell:0,lbuy:0,lsell:0,empty:!0},"undefined"!==typeof t.sources)for(var e in t.sources)this.resetBar(t.sources[e])}},{key:"resetBar",value:function(t){return null!==t.close&&(t.open=t.close,t.high=t.close,t.low=t.close),t.vbuy=0,t.vsell=0,t.cbuy=0,t.csell=0,t.lbuy=0,t.lsell=0,t.empty=!0,t}},{key:"prepareRendererForIndicators",value:function(t,e){for(var n=Object.keys(t.model.markets),r=0;r<n.length;r++){e.sources[n[r]]||(e.sources[n[r]]={open:null,high:null,low:null,close:null});var i=t.model.markets[n[r]];if(i.length)for(var o=0;o<i.length;o++)"undefined"===typeof e.sources[n[r]][i[o]]&&"open"!==i[o]&&"high"!==i[o]&&"low"!==i[o]&&"close"!==i[o]&&(e.sources[n[r]][i[o]]=0)}}},{key:"toggleFillGapsWithEmpty",value:function(){this.fillGapsWithEmpty=!this.fillGapsWithEmpty,this.renderAll()}},{key:"refreshAutoDecimals",value:function(t){var e=Object.keys(this.markets),n=Object.keys(ge).find((function(t){return-1!==e.indexOf(t)}));if(n)for(var r=ge[n],i=0;i<this.loadedIndicators.length;i++)if(!t||t===this.loadedIndicators[i].id){var o=this.loadedIndicators[i].options.priceFormat||{type:"price"};if(o.auto&&"volume"!==o.type&&o.precision!==r){o=ah(ah({},o),{},{precision:r,minMove:1/Math.pow(10,r)}),ta.dispatch(this.paneId+"/setIndicatorOption",{id:this.loadedIndicators[i].id,key:"priceFormat",value:o,silent:!0});for(var a=0;a<this.loadedIndicators[i].apis.length;a++)this.loadedIndicators[i].apis[a].applyOptions({priceFormat:o}),this.loadedIndicators[i].apis[a].precision=r}}}},{key:"getPricelineAtPoint",value:function(t){var e=Ai(t),n={x:e.x,y:e.y},r=this.getPriceApi();if(r){var i=r.coordinateToPrice(e.y);if(i){var o,a=r.getPriceLine(i,this.chartInstance.timeScale().coordinateToLogical(e.x));if(a){var s=a.options();o=s.market,s.market?(o=s.market,i=s.price):a=null}if(!o){for(var c in this.markets)if(this.markets[c].active&&this.markets[c].historical){o=this.markets[c].index;break}o||(o=Object.values(this.markets)[0].index),o=o.replace(/PERP$/,"")}a||(i=+Re(i,r.options().priceFormat.precision));var l=ta.state.settings.alerts&&(t.shiftKey||ta.state.settings.alertsClick);return{api:r,price:i,market:o,priceline:a,canCreate:l,originalOffset:e,offset:n}}}}},{key:"disableCrosshair",value:function(){this.chartInstance.applyOptions({crosshair:{vertLine:{color:"transparent",labelVisible:!1},horzLine:{color:"transparent",labelVisible:!1}}})}},{key:"enableCrosshair",value:function(){var t=$l();this.chartInstance.applyOptions({crosshair:{vertLine:{color:t.crosshair.vertLine.color,labelVisible:!0},horzLine:{color:t.crosshair.horzLine.color,labelVisible:!0}}})}}]),t}();function wh(t){return wh="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wh(t)}function Th(t,e){return Ih(t)||Eh(t,e)||Ph(t,e)||kh()}function kh(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Eh(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function Ih(t){if(Array.isArray(t))return t}function Oh(t){return Rh(t)||xh(t)||Ph(t)||Ah()}function Ah(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ph(t,e){if(t){if("string"===typeof t)return Dh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dh(t,e):void 0}}function xh(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Rh(t){if(Array.isArray(t))return Dh(t)}function Dh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Uh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bh(t,e,n){return e&&Nh(t.prototype,e),n&&Nh(t,n),t}function Lh(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jh(t,e)}function jh(t,e){return jh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},jh(t,e)}function Mh(t){var e=Hh();return function(){var n,r=Gh(t);if(e){var i=Gh(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $h(this,n)}}function $h(t,e){if(e&&("object"===wh(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Fh(t)}function Fh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hh(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Gh(t){return Gh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Gh(t)}var Xh=function(t){Lh(n,t);var e=Mh(n);function n(){var t;return Uh(this,n),t=e.apply(this,arguments),t.promisesOfData={},t}return Bh(n,[{key:"getHistoricalMarktets",value:function(t){return t.filter((function(t){return-1!==ta.state.app.historicalMarkets.indexOf(t)}))}},{key:"getApiUrl",value:function(t,e,n,r){var i=ta.state.app.apiUrl;return i=i.replace(/\{from\}/,t),i=i.replace(/\{to\}/,e),i=i.replace(/\{timeframe\}/,(1e3*n).toString()),i=i.replace(/\{markets\}/,encodeURIComponent(r.join("+"))),i}},{key:"fetch",value:function(t){function e(e,n,r,i){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e,n,r){var i=this,o=this.getApiUrl(t,e,n,r);return this.promisesOfData[o]||(ta.commit("app/TOGGLE_LOADING",!0),this.promisesOfData[o]=fetch(o).then((function(t){return t.json().then((function(e){return e.status=t.status,e}))})).then((function(t){if(!t||t.error)throw new Error(t&&t.error?t.error:"empty-response");if(!t.results.length)throw new Error("No more data");if("point"!==t.format)throw new Error("Bad data");return i.normalizePoints(t.results,t.columns,n,r)})).catch((function(t){throw ee(t),t})).then((function(t){return ta.commit("app/TOGGLE_LOADING",!1),delete i.promisesOfData[o],t}))),this.promisesOfData[o]}))},{key:"normalizePoints",value:function(t,e,n,r){var i,o={};if(r=r.slice(),!t||!t.length)return t;i=Array.isArray(t[0])?t[0][0]:+new Date(t[0].time)/1e3,r=Oh(r);for(var a={},s=Qt(n),c=0;c<t.length;c++){if(!t[c].time&&t[c][0])t[c]={time:"undefined"!==typeof e["time"]?t[c][e["time"]]:0,cbuy:"undefined"!==typeof e["cbuy"]?t[c][e["cbuy"]]:0,close:"undefined"!==typeof e["close"]?t[c][e["close"]]:0,csell:"undefined"!==typeof e["csell"]?t[c][e["csell"]]:0,high:"undefined"!==typeof e["high"]?t[c][e["high"]]:0,lbuy:"undefined"!==typeof e["lbuy"]?t[c][e["lbuy"]]:0,low:"undefined"!==typeof e["low"]?t[c][e["low"]]:0,lsell:"undefined"!==typeof e["lsell"]?t[c][e["lsell"]]:0,market:"undefined"!==typeof e["market"]?t[c][e["market"]]:0,open:"undefined"!==typeof e["open"]?t[c][e["open"]]:0,vbuy:"undefined"!==typeof e["vbuy"]?t[c][e["vbuy"]]:0,vsell:"undefined"!==typeof e["vsell"]?t[c][e["vsell"]]:0},t[c].timestamp=t[c].time;else{if(!o[t[c].market])for(var l=c-1;l>=0;l--)if(t[l].market===t[c].market){o[t[c].market]=t[l];break}if(t[c].timestamp=Zt(t[c].time/1e3,n,s),!o[t[c].market]||o[t[c].market].timestamp<t[c].timestamp)o[t[c].market]=t[c];else if(o[t[c].market]!==t[c]){o[t[c].market].vbuy+=t[c].vbuy,o[t[c].market].vsell+=t[c].vsell,o[t[c].market].cbuy+=t[c].cbuy,o[t[c].market].csell+=t[c].csell,o[t[c].market].lbuy+=t[c].lbuy,o[t[c].market].lsell+=t[c].lsell,o[t[c].market].high=Math.max(t[c].high,o[t[c].market].high),o[t[c].market].low=Math.min(t[c].low,o[t[c].market].low),o[t[c].market].close=t[c].close,t.splice(c,1),c--;continue}}if("number"!==typeof a[t[c].market]&&(a[t[c].market]=t[c].open),t[c].timestamp===i){var u=r.indexOf(t[c].market);r.splice(u,1)}var d=Ie(t[c].market),h=Th(d,2),p=h[0],f=h[1];t[c].exchange=p,t[c].pair=f,delete t[c].time}return{data:t,markets:r,from:t[0].timestamp,to:t[t.length-1].timestamp}}}]),n}(na.a),Vh=new Xh;function qh(t){return qh="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qh(t)}function Kh(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wh(t,e,n){return e&&zh(t.prototype,e),n&&zh(t,n),t}function Yh(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jh(t,e)}function Jh(t,e){return Jh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Jh(t,e)}function Qh(t){var e=ep();return function(){var n,r=np(t);if(e){var i=np(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Zh(this,n)}}function Zh(t,e){if(e&&("object"===qh(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return tp(t)}function tp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ep(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function np(t){return np=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},np(t)}var rp=function(t){Yh(n,t);var e=Qh(n);function n(){return Kh(this,n),e.apply(this,arguments)}return Wh(n,[{key:"pane",get:function(){return this.$store.state.panes.panes[this.paneId]}},{key:"mounted",value:function(){var t=this;this.$el.id=this.paneId,this.refreshZoom(),this.$nextTick((function(){var e=t.$el.clientWidth;"function"===typeof t.onResize&&t.onResize(e,t.$el.clientHeight)})),this.$el.addEventListener("mousedown",this.focusPane)}},{key:"beforeDestroy",value:function(){this.$el.removeEventListener("mousedown",this.focusPane),this._onStoreMutation&&this._onStoreMutation()}},{key:"refreshZoom",value:function(){this.$store.dispatch("panes/refreshZoom",this.paneId)}},{key:"focusPane",value:function(){this.$store.commit("app/SET_FOCUSED_PANE",this.paneId)}}]),n}(r["default"]);rp=Object(a["a"])([Object(kd["b"])({props:{paneId:{required:!0,type:String}}})],rp);var ip=rp,op=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pane-header hide-scrollbar pane-overlay d-flex",class:{"-loading":t.loading}},[n("div",{staticClass:"pane-header__loader"}),n("span",{staticClass:"pane-header__name ml4 mrauto",attrs:{"data-hide-header":""},on:{dblclick:t.renamePane}},[t._v(t._s(t.name))]),n("div",{staticClass:"toolbar flex-grow-1",on:{dblclick:t.maximizePane}},[t._t("default"),n("button",{attrs:{type:"button"},on:{click:t.openSearch}},[n("i",{staticClass:"icon-search"})]),n("button",{attrs:{type:"button"},on:{click:t.openSettings}},[n("i",{staticClass:"icon-cog"})]),n("dropdown",{staticClass:"-text-left",attrs:{options:t.menu,selectionClass:"-text"},on:{open:function(e){return t.highlightPane(!0)},close:function(e){return t.highlightPane(!1)}},scopedSlots:t._u([{key:"option-zoom",fn:function(){return[n("div",{staticClass:"column",on:{mousedown:function(t){t.preventDefault()}}},[n("div",{staticClass:"btn -green",on:{click:function(e){return t.changeZoom(e,-1)}}},[n("i",{staticClass:"icon-minus"})]),n("div",{staticClass:"btn -text text-monospace",staticStyle:{display:"block"},on:{click:function(e){return t.$store.dispatch("panes/setZoom",{id:t.paneId,zoom:1})}}},[t._v(" × "+t._s(t.zoom.toFixed(2))+" ")]),n("div",{staticClass:"btn -green",on:{click:function(e){return t.changeZoom(e,1)}}},[n("i",{staticClass:"icon-plus"})])])]},proxy:!0},{key:"option",fn:function(e){var r=e.value;return[n("i",{staticClass:"-lower",class:"icon-"+r.icon}),n("span",[t._v(t._s(r.label))])]}},{key:"selection",fn:function(){return[n("i",{staticClass:"icon-more"})]},proxy:!0}])})],2)])},ap=[],sp=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{staticClass:"pane-dialog -medium -mobile-fs",on:{clickOutside:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{staticClass:"title -editable",domProps:{textContent:t._s(t.name)},on:{dblclick:t.renamePane}}),n("div",{staticClass:"column -center"})]},proxy:!0}])},[n("trades-settings",{attrs:{paneId:t.paneId}}),n("footer",[n("presets",{staticClass:"-left -top",attrs:{type:"trades",adapter:t.getPreset},on:{apply:function(e){return t.resetPane(e)}}})],1)],1)},cp=[];function lp(t){return lp="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lp(t)}function up(t,e){return mp(t)||fp(t,e)||hp(t,e)||dp()}function dp(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function hp(t,e){if(t){if("string"===typeof t)return pp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pp(t,e):void 0}}function pp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fp(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function mp(t){if(Array.isArray(t))return t}function vp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bp(t,e,n){return e&&yp(t.prototype,e),n&&yp(t,n),t}function gp(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sp(t,e)}function Sp(t,e){return Sp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Sp(t,e)}function _p(t){var e=Tp();return function(){var n,r=kp(t);if(e){var i=kp(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Cp(this,n)}}function Cp(t,e){if(e&&("object"===lp(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return wp(t)}function wp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tp(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function kp(t){return kp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},kp(t)}var Ep=function(t){gp(n,t);var e=_p(n);function n(){return vp(this,n),e.apply(this,arguments)}return bp(n,[{key:"pane",get:function(){return this.$store.state.panes.panes[this.paneId]}},{key:"name",get:function(){var t=this.$store.state.panes.panes[this.paneId].name;if(!t){if(!t&&this.$store.state.panes.panes[this.paneId].markets.length){var e=Ie(this.$store.state.panes.panes[this.paneId].markets[0]),n=up(e,2),r=n[1];return r+" - "+this.$store.state.panes.panes[this.paneId].type}return this.paneId}return t},set:function(t){this.$store.commit("panes/SET_PANE_NAME",{id:this.paneId,name:t})}},{key:"renamePane",value:async function(){var t=await Un.prompt({action:"Rename",input:this.name});t!==this.name&&(this.name=t)}},{key:"resetPane",value:async function(t){await this.close(),t||(t=JSON.parse(JSON.stringify(Pr[this.$store.state.panes.panes[this.paneId].type].state))),await this.$store.dispatch("panes/resetPane",{id:this.paneId,data:t})}},{key:"getPreset",value:async function(){return await pn.getState(this.paneId)}}]),n}(r["default"]);Ep=Object(a["a"])([Object(kd["b"])({props:{paneId:{required:!0,type:String}}})],Ep);var Ip=Ep,Op=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",{staticClass:"section"},[t.sections.indexOf("display")>-1?n("div",[n("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{boundary:"window",placement:"left"},expression:"{ boundary: 'window', placement: 'left' }"}],staticClass:"form-group column mb8",attrs:{title:"Number of trades rendered"}},[n("label",{staticClass:"-fill -center"},[t._v("Max trades to render")]),n("input",{staticClass:"form-control",attrs:{id:"trades-limit",type:"number",min:"0",max:"1000",step:"1"},domProps:{value:t.maxRows},on:{change:function(e){return t.$store.commit(t.paneId+"/SET_MAX_ROWS",e.target.value)}}})]),n("div",{staticClass:"form-group column mb8",on:{click:function(e){return e.stopPropagation(),t.$store.commit(t.paneId+"/TOGGLE_TRADE_TYPE")}}},[n("label",{staticClass:"-fill -center"},[t._v("Type of feed")]),n("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"checkbox-control -auto checkbox-control-input -unshrinkable",attrs:{title:"Filter trade / liquidation"}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:"both"!==t.tradeType}}),n("div",{attrs:{on:"liquidations"===t.tradeType?"Liq. only":"Trades only",off:"All"}})])]),n("div",{staticClass:"form-group column mb8",on:{click:function(e){return e.stopPropagation(),t.$store.commit(t.paneId+"/TOGGLE_TRADES_PAIRS")}}},[n("label",{staticClass:"-fill -center"},[t._v("Show trade's symbols")]),n("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"checkbox-control -auto checkbox-control-input -unshrinkable",attrs:{title:"Show symbol's names (ex: BTC-USD)"}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.showTradesPairs}}),n("div",{attrs:{on:"Visible",off:"Hidden"}})])]),n("div",{staticClass:"form-group column mb8",on:{click:function(e){return e.stopPropagation(),t.$store.commit(t.paneId+"/TOGGLE_LOGOS")}}},[n("label",{staticClass:"-fill -center"},[t._v("Show exchange's logos")]),n("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"checkbox-control -auto checkbox-control-input -unshrinkable",attrs:{title:"Show exchange's logo when available"}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.showLogos}}),n("div",{attrs:{on:t.monochromeLogos?"Monochrome ":"Color",off:"No logo"}})])]),n("div",{staticClass:"form-group column mb8",on:{click:function(e){return e.stopPropagation(),t.$store.commit(t.paneId+"/TOGGLE_PRICE")}}},[n("label",{staticClass:"-fill -center"},[t._v("Show price")]),n("div",{staticClass:"checkbox-control checkbox-control-input -unshrinkable"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.showPrice}}),n("div")])]),n("div",{staticClass:"form-group column",on:{click:function(e){return e.stopPropagation(),t.$store.commit(t.paneId+"/TOGGLE_TIME_AGO")}}},[n("label",{staticClass:"-fill -center"},[t._v("Time format")]),n("div",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"checkbox-control -auto checkbox-control-input -unshrinkable",attrs:{title:"Time format preference"}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.showTimeAgo}}),n("div",{attrs:{on:"Time since",off:"HH:MM"}})])])]):t._e(),n("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("display")}}},[t._v("DISPLAY "),n("i",{staticClass:"icon-up-thin"})])]),n("section",{staticClass:"section"},[t.sections.indexOf("thresholds")>-1?n("div",[n("div",{staticClass:"column section__controls"},[n("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn -text -nowrap mr4",attrs:{type:"button",title:"Switch thresholds display"},on:{click:function(e){return t.$store.commit(t.paneId+"/TOGGLE_THRESHOLDS_TABLE",!t.showThresholdsAsTable)}}},[t._v(" "+t._s(t.showThresholdsAsTable?"table":"slider")+" ")]),n("presets",{attrs:{type:"threshold",adapter:t.getAudioPreset,label:"Presets"},on:{apply:function(e){return t.applyAudioPreset(e)}}})],1),n("div",{staticClass:"form-group mb16"},[n("div",{staticClass:"column"},[n("div",{staticClass:"text-nowrap"},[t._v("← Faster")]),n("slider",{staticClass:"mt4 -fill",attrs:{min:0,max:2,step:.01,label:"","show-completion":!1,value:t.thresholdsMultipler},on:{input:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLDS_MULTIPLER",{value:e,market:t.markets[0]})},reset:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLDS_MULTIPLER",{value:1,market:t.markets[0]})}},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(t.formatAmount(t.thresholds[0].amount))+" ➜ "+t._s(t.formatAmount(t.thresholds[1].amount))+" ("+t._s(+(100*t.thresholdsMultipler).toFixed(2))+"%) ")]},proxy:!0}],null,!1,2205895483)}),n("div",{staticClass:"text-right text-nowrap mlauto"},[t._v("Slower →")])],1)]),"liquidations"!==t.tradeType?n("div",{key:"liquidations",staticClass:"form-group"},[n("label",{staticClass:"mb8"},[t._v("Trades")]),n("thresholds",{attrs:{paneId:t.paneId,thresholds:t.thresholds}}),n("div",{staticClass:"text-right mt8 mb8"},[n("a",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn ml4 -nowrap -text",attrs:{href:"javascript:void(0);",title:"Add a threshold"},on:{click:function(e){return t.$store.commit(t.paneId+"/ADD_THRESHOLD","thresholds")}}},[t._v(" Add "),n("i",{staticClass:"icon-plus ml4 text-bottom"})])])],1):t._e(),"trades"!==t.tradeType?n("div",{key:"trades",staticClass:"form-group mt16"},[n("label",{staticClass:"mb8"},[t._v("Liquidations")]),n("thresholds",{attrs:{paneId:t.paneId,thresholds:t.liquidations}}),n("div",{staticClass:"text-right mt8 mb8"},[n("a",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn ml4 -nowrap -text",attrs:{href:"javascript:void(0);",title:"Add a threshold"},on:{click:function(e){return t.$store.commit(t.paneId+"/ADD_THRESHOLD","liquidations")}}},[t._v(" Add "),n("i",{staticClass:"icon-plus ml4 text-bottom"})])])],1):t._e(),t.displayGifWarning?n("div",{staticClass:"d-flex help-text"},[n("p",{staticClass:"mt0 mb0 text-danger"},[n("i",{staticClass:"icon-info mr8"}),n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.$store.commit("settings/TOGGLE_ANIMATIONS")}}},[t._v("Enable animations to show gifs")])])]):t._e()]):t._e(),n("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("thresholds")}}},[t._v("THRESHOLDS ("+t._s(t.thresholds.length)+") "),n("i",{staticClass:"icon-up-thin"})])]),n("section",{staticClass:"section"},[t.sections.indexOf("audio")>-1?n("div",{staticClass:"form-group"},[n("div",{staticClass:"column section__controls"}),n("div",{staticClass:"column mb16"},[n("div",{staticClass:"form-group text-nowrap"},[n("label",{staticClass:"checkbox-control"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox",disabled:!t.useAudio},domProps:{checked:t.muted},on:{change:function(e){return t.$store.commit(t.paneId+"/TOGGLE_MUTED")}}}),n("div"),n("span",[t._v("Mute this pane")])])]),n("div",{staticClass:"-fill ml16"},[n("label",{staticClass:"mt8 d-block"},[t._v("Pane volume")]),n("div",{staticClass:"column"},[n("slider",{staticClass:"mrauto -fill mt8 mb8",attrs:{min:0,max:10,step:.1,label:!0,disabled:t.muted,value:t.audioVolume},on:{input:function(e){return t.$store.commit(t.paneId+"/SET_AUDIO_VOLUME",e)},reset:function(e){return t.$store.commit(t.paneId+"/SET_AUDIO_VOLUME",null)}},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v("× "+t._s(t.audioVolume))]},proxy:!0}],null,!1,1549576807)}),n("editable",{staticClass:"-center text-nowrap ml8",staticStyle:{"line-height":"1"},attrs:{content:"× "+t.audioVolume},on:{output:function(e){return t.$store.commit(t.paneId+"/SET_AUDIO_VOLUME",e)}}})],1),n("label",{staticClass:"mt16 d-block"},[t._v("Pitch")]),n("div",{staticClass:"column"},[n("slider",{staticClass:"mrauto -fill mt8 mb8",attrs:{min:.001,max:5,step:.01,showCompletion:!1,disabled:t.muted,value:t.audioPitch},on:{input:function(e){return t.$store.commit(t.paneId+"/SET_AUDIO_PITCH",e)},reset:function(e){return t.$store.commit(t.paneId+"/SET_AUDIO_PITCH",null)}},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v("× "+t._s(t.audioPitch)+" ")]},proxy:!0}],null,!1,3360634946)}),n("editable",{staticClass:"-center text-nowrap ml8",staticStyle:{"line-height":"1"},attrs:{content:"× "+t.audioPitch},on:{output:function(e){return t.$store.commit(t.paneId+"/SET_AUDIO_PITCH",e)}}})],1)])]),t.useAudio&&!t.muted?n("div",{staticClass:"form-group"},[n("label",[t._v(" Minimum for a trade to trigger a sound ")]),n("input",{staticClass:"form-control",attrs:{placeholder:t.audioThresholdPlaceholder},domProps:{value:t.audioThreshold},on:{change:function(e){return t.$store.commit(t.paneId+"/SET_AUDIO_THRESHOLD",e.target.value)}}})]):t._e(),t.useAudio?t._e():n("div",{staticClass:"d-flex help-text"},[n("p",{staticClass:"mt0 mb0 text-danger"},[n("i",{staticClass:"icon-info mr8"}),n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.$store.commit("settings/TOGGLE_AUDIO",!0)}}},[t._v("Enable audio to use this feature")])])])]):t._e(),n("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("audio")}}},[t._v("Audio "),n("i",{staticClass:"icon-up-thin"})])]),n("section",{staticClass:"section"},[t.sections.indexOf("multipliers")>-1?n("div",{staticClass:"form-group"},[t._m(0),t.multipliers.length?n("div",{staticClass:"multipliers"},t._l(t.multipliers,(function(e){return n("div",{key:e.identifier,staticClass:"d-flex multipliers-market",class:{"-disabled":1===e.multiplier}},[n("div",{staticClass:"multipliers-market__id",on:{dblclick:function(n){return t.$store.commit(t.paneId+"/SET_THRESHOLD_MULTIPLIER",{identifier:e.identifier,multiplier:null})}}},[n("div",{staticClass:"text-nowrap market-exchange"},[n("small",[t._v(t._s(e.exchange))])]),n("div",{staticClass:"text-nowrap market-pair"},[t._v(" "+t._s(e.pair)+" ")])]),n("div",{staticClass:"-fill -center ml16"},[n("slider",{staticStyle:{width:"100%","min-width":"150px"},attrs:{min:0,max:2,label:1!==e.multiplier,step:.01,showCompletion:!1,value:e.multiplier,editable:!1},on:{input:function(n){return t.$store.commit(t.paneId+"/SET_THRESHOLD_MULTIPLIER",{identifier:e.identifier,multiplier:n})},reset:function(n){return t.$store.commit(t.paneId+"/SET_THRESHOLD_MULTIPLIER",{identifier:e.identifier,multiplier:1})}},scopedSlots:t._u([{key:"tooltip",fn:function(e){var n=e.value;return[t._v(" "+t._s(t.thresholds[0].amount*n)+" ")]}}],null,!0)})],1)])})),0):n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.$store.dispatch("app/showSearch",t.paneId)}}},[t._v(" Add markets to pane ")])]):t._e(),n("div",{staticClass:"section__title",on:{click:function(e){return t.toggleSection("multipliers")}}},[t._v(" THRESHOLD MULTIPLIER ("+t._s(t.mutipliersCount)+") "),n("i",{staticClass:"icon-up-thin"})])])])},Ap=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",[n("div",{staticClass:"d-flex"},[n("div",[t._v("← Decrease threshold"),n("br"),n("small",[t._v("← Increase visibility")])]),n("div",{staticClass:"text-right mlauto"},[t._v("Increase threshold →"),n("br"),n("small",[t._v("Decrease visibility →")])])])])}],Pp=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"thresholds",class:{"-dragging":t.dragging,"-rendering":t.rendering}},[t.showThresholdsAsTable?n("table",{staticClass:"table thresholds-table"},[n("transition-group",{attrs:{name:"flip-list",tag:"tbody"}},t._l(t.thresholds,(function(e,r){return n("tr",{key:e.id},[n("td",{staticClass:"table-input"},[r===t.thresholds.length-1?n("label",{staticClass:"checkbox-control -small mb4"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:e.max},on:{change:function(n){return t.$store.commit(t.paneId+"/TOGGLE_THRESHOLD_MAX",e.id)}}}),n("div")]):t._e()]),n("td",{staticClass:"table-input"},[n("i",{staticClass:"icon icon-currency"}),n("editable",{staticClass:"pl16 w-100",attrs:{placeholder:"Amount*",content:e.amount},on:{output:function(n){return t.$store.commit(t.paneId+"/SET_THRESHOLD_AMOUNT",{id:e.id,value:n})}}})],1),r===t.thresholds.length-1&&e.max?[n("td",[n("small",{staticClass:"pl8 text-danger"},[n("strong",[t._v("max")])])]),n("td",{attrs:{colspan:t.useAudio?4:3}})]:[n("td",{staticClass:"table-input"},[n("input",{attrs:{type:"text",placeholder:"Giphy"},domProps:{value:e.buyGif},on:{change:function(n){return t.$store.commit(t.paneId+"/SET_THRESHOLD_GIF",{id:e.id,side:"buy",value:n.target.value})}}})]),n("td",{staticClass:"table-input"},[n("input",{attrs:{type:"text",placeholder:"Giphy"},domProps:{value:e.sellGif},on:{change:function(n){return t.$store.commit(t.paneId+"/SET_THRESHOLD_GIF",{id:e.id,side:"sell",value:n.target.value})}}})]),n("td",{staticClass:"table-action"},[n("verte",{attrs:{picker:"square",label:"Buy color",menuPosition:"left",model:"rgb",value:e.buyColor},on:{input:function(n){return t.$store.commit(t.paneId+"/SET_THRESHOLD_COLOR",{id:e.id,side:"buyColor",value:n})}}})],1),n("td",{staticClass:"table-action"},[n("verte",{attrs:{picker:"square",label:"Sell color",menuPosition:"left",model:"rgb",value:e.sellColor},on:{input:function(n){return t.$store.commit(t.paneId+"/SET_THRESHOLD_COLOR",{id:e.id,side:"sellColor",value:n})}}})],1),t.useAudio?n("td",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"thresholds-table__audio table-action",attrs:{title:"Configure threshold audio"},on:{click:function(n){return t.openThresholdAudio(e.id)}}},[n("button",{staticClass:"btn -text"},[n("i",{staticClass:"icon-music-note"})])]):t._e()],t.thresholds.length>2&&"liquidations"!==e.id&&r>1?n("td",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"table-action",attrs:{title:"Remove"},on:{click:function(n){return t.deleteThreshold(e.id)}}},[n("button",{staticClass:"btn -text"},[n("i",{staticClass:"icon-trash"})])]):t._e()],2)})),0)],1):n("div",{staticClass:"thresholds-slider"},[n("div",{staticClass:"thresholds-gradients"},[n("div",{ref:"buysGradient",staticClass:"thresholds-gradients__buys"}),n("div",{ref:"sellsGradient",staticClass:"thresholds-gradients__sells"})]),n("div",{ref:"thresholdContainer",staticClass:"thresholds-slider__bar"},t._l(t.thresholds,(function(e){return n("div",{key:e.id,staticClass:"thresholds-slider__handler",class:{"-selected":t.selectedThresholdId===e.id},attrs:{"data-id":e.id,"data-amount":t.formatAmount(e.amount,2)}})})),0),t.selectedThreshold?n("div",{ref:"thresholdPanel",staticClass:"threshold-panel",class:{"-minimum":0===t.thresholds.indexOf(t.selectedThreshold)},style:{transform:"translateX("+this.panelOffsetPosition+"px)"},on:{click:function(e){t.editing=!0}}},[n("div",{staticClass:"threshold-panel__caret",style:{transform:"translateX("+this.panelCaretPosition+"px)"}}),n("h3",[t._v("@ "+t._s(t.formatAmount(t.selectedThreshold.amount)))]),n("a",{staticClass:"threshold-panel__close icon-cross",attrs:{href:"#"},on:{click:function(e){t.selectedThresholdId=null,t.editing=!1}}}),n("div",{staticClass:"form-group mb8 threshold-panel__gif"},[n("div",{staticClass:"column"},[n("div",{staticClass:"form-group"},[n("label",[t._v("Buy gif")]),n("input",{staticClass:"form-control w-100",attrs:{type:"text",placeholder:"Giphy keyword"},domProps:{value:t.selectedThreshold.buyGif},on:{change:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLD_GIF",{id:t.selectedThreshold.id,side:"buy",value:e.target.value})}}})]),n("div",{staticClass:"form-group"},[n("label",[t._v("Sell gif")]),n("input",{staticClass:"form-control w-100",attrs:{type:"text",placeholder:"Giphy keyword"},domProps:{value:t.selectedThreshold.sellGif},on:{change:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLD_GIF",{id:t.selectedThreshold.id,side:"sell",value:e.target.value})}}})])])]),n("div",{staticClass:"form-group mb8 threshold-panel__colors"},[n("label",[t._v("Custom colors")]),n("div",{staticClass:"column mt8"},[n("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"form-group column flex-center",attrs:{title:"When buy"}},[n("p",{staticClass:"help-text -center mr16 mt0 mb0"},[t._v("Buy")]),n("verte",{attrs:{picker:"square",menuPosition:"left",label:"Buy color",model:"rgb",value:t.selectedThreshold.buyColor},on:{input:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLD_COLOR",{id:t.selectedThreshold.id,side:"buyColor",value:e})}}})],1),n("div",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"form-group column flex-center",attrs:{title:"When sell"}},[n("p",{staticClass:"help-text -center mr16 mt0 mb0"},[t._v("Sell")]),n("verte",{attrs:{picker:"square",menuPosition:"left",label:"Sell color",model:"rgb",value:t.selectedThreshold.sellColor},on:{input:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLD_COLOR",{id:t.selectedThreshold.id,side:"sellColor",value:e})}}})],1)])])]):t._e()])])},xp=[],Rp=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{staticClass:"pane-dialog -auto",on:{clickOutside:t.close,mousedown:function(e){t.clickOutsideClose=!1},mouseup:function(e){t.clickOutsideClose=!0}},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",[n("div",{staticClass:"title"},[n("div",[t._v("Threshold")])]),n("div",{staticClass:"subtitle"},[t._v(t._s(t.thresholdId)+" "+t._s(t.formatAmount(t.threshold.amount)))])])]},proxy:!0}])},[n("div",{staticClass:"form-group mb16"},[n("label",{attrs:{for:""}},[t._v(" When buy ")]),t.liveAnnotation&&"buy"===t.focusedSide?n("div",{staticClass:"live-annotation"},[n("div",{staticClass:"live-annotation__tooltip"},[t._v(t._s(t.liveAnnotation))])]):t._e(),n("div",{staticClass:"d-flex"},[t.buyAudio!==t.threshold.buyAudio?n("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn -green mr8",attrs:{title:"Original"},on:{click:function(e){return t.testOriginal("buy",e)}}},[n("i",{staticClass:"icon-volume-high"})]):t._e(),n("prism-editor",{ref:"editor",staticClass:"editor__prism hide-scrollbar form-control",class:["buy"===t.dropping&&"-dropping"],attrs:{highlight:t.highlighter},on:{blur:function(e){t.liveAnnotation=null},focus:function(e){return t.scheduleLiveAnnotation(e,"buy")},drop:function(e){return t.handleDrop(e,"buy")},dragover:function(e){return t.handleDrop(e,"buy")},dragenter:function(e){return t.handleDropEnter("buy")},dragleave:function(e){t.dropping=null},keyup:function(e){return t.scheduleLiveAnnotation(e,"buy")},click:function(e){return t.scheduleLiveAnnotation(e,"buy")}},model:{value:t.buyAudio,callback:function(e){t.buyAudio=e},expression:"buyAudio"}}),n("button",{staticClass:"btn -green ml8",class:["buy"===t.loopingSide&&"shake-hard"],attrs:{title:"Custom"},on:{click:function(e){return t.testCustom("buy",e)},dblclick:function(e){return t.loopSide("buy")}}},[n("i",{staticClass:"icon-volume-high"})])],1),"buy"===t.focusedSide?n("div",{staticClass:"mt8 d-flex"},[n("button",{staticClass:"btn -small -accent",on:{click:function(e){return t.openSoundAssistant("play","buy")}}},[n("i",{staticClass:"icon-music-note mr8"}),t._v(" Synthetize sound")]),n("button",{staticClass:"btn -small -accent ml8 mr8",on:{click:function(e){return t.openSoundAssistant("playurl","buy")}}},[n("i",{staticClass:"icon-upload mr8"}),t._v(" Import audio")]),n("button",{staticClass:"btn -small -red mlauto -text",on:{click:function(e){return t.reset("buy")}}},[n("i",{staticClass:"icon-eraser mr8"}),t._v(" Reset")])]):t._e(),t.buyError?n("p",{staticClass:"form-feedback"},[n("i",{staticClass:"icon-warning mr4"}),t._v(" "+t._s(t.buyError))]):t._e()]),n("div",{staticClass:"form-group mb16"},[n("label",{attrs:{for:""}},[t._v(" When sell ")]),t.liveAnnotation&&"sell"===t.focusedSide?n("div",{staticClass:"live-annotation"},[n("div",{staticClass:"live-annotation__tooltip"},[t._v(t._s(t.liveAnnotation))])]):t._e(),n("div",{staticClass:"d-flex"},[t.sellAudio!==t.threshold.sellAudio?n("button",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn -red mr8",attrs:{title:"Original"},on:{click:function(e){return t.testOriginal("sell",e)}}},[n("i",{staticClass:"icon-volume-high"})]):t._e(),n("prism-editor",{ref:"editor",staticClass:"editor__prism hide-scrollbar form-control",class:["sell"===t.dropping&&"-dropping"],attrs:{highlight:t.highlighter},on:{blur:function(e){t.liveAnnotation=null},focus:function(e){return t.scheduleLiveAnnotation(e,"sell")},drop:function(e){return t.handleDrop(e,"sell")},dragover:function(e){return t.handleDrop(e,"sell")},dragenter:function(e){return t.handleDropEnter("sell")},dragleave:function(e){t.dropping=null},keyup:function(e){return t.scheduleLiveAnnotation(e,"sell")},click:function(e){return t.scheduleLiveAnnotation(e,"sell")}},model:{value:t.sellAudio,callback:function(e){t.sellAudio=e},expression:"sellAudio"}}),n("button",{staticClass:"btn -red ml8",class:["sell"===t.loopingSide&&"shake-hard"],on:{click:function(e){return t.testCustom("sell",e)},dblclick:function(e){return t.loopSide("sell")}}},[n("i",{staticClass:"icon-volume-high"})])],1),"sell"===t.focusedSide?n("div",{staticClass:"mt8 d-flex"},[n("button",{staticClass:"btn -small -accent",on:{click:function(e){return t.openSoundAssistant("play","sell")}}},[n("i",{staticClass:"icon-music-note mr8"}),t._v(" Synthetize sound")]),n("button",{staticClass:"btn -small -accent ml8 mr8",on:{click:function(e){return t.openSoundAssistant("playurl","sell")}}},[n("i",{staticClass:"icon-upload mr8"}),t._v(" Import audio ")]),n("button",{staticClass:"btn -small -red mlauto -text",on:{click:function(e){return t.reset("sell")}}},[n("i",{staticClass:"icon-eraser mr8"}),t._v(" Reset")])]):t._e(),t.sellError?n("p",{staticClass:"form-feedback"},[n("i",{staticClass:"icon-warning mr4"}),t._v(" "+t._s(t.sellError))]):t._e()]),n("footer",[n("a",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn -text mrauto",attrs:{href:"javascript:void(0);",title:"Restart audio service (clear ALL queue)"},on:{click:function(e){return t.restartWebAudio()}}},[n("i",{staticClass:"icon-refresh mr8"}),t._v(" Restart audio ")]),n("a",{staticClass:"btn -text mr8",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.close(!1)}}},[t._v("Cancel")]),n("button",{staticClass:"btn -large -green",on:{click:function(e){return t.saveInputs()}}},[n("i",{staticClass:"icon-check mr4"}),t._v(" Save")])])])},Dp=[],Up=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{staticClass:"pane-dialog -auto",on:{clickOutside:t.close,mousedown:function(e){t.clickOutsideClose=!1},mouseup:function(e){t.clickOutsideClose=!0}},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{staticClass:"title"},[t._v(t._s(t.title))])]},proxy:!0}])},["play"===t.type?n("div",{staticClass:"form-group mb16"},[n("label",{attrs:{for:"audio-assistant-source"}},[n("i",{staticClass:"icon-music-note mr8"}),t._v(" Frequency "),n("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:t.descriptions.frequency}})]),n("div",{staticClass:"column"},[n("slider",{staticClass:"mrauto -fill mt8 mb8",attrs:{min:0,max:8902,step:1,editable:!1,label:!0,"show-completion":!0,value:t.frequency},on:{input:function(e){t.frequency=e},reset:function(e){return t.reset("frequency")}}}),n("editable",{staticClass:"-center text-nowrap ml8",staticStyle:{"line-height":"1"},attrs:{content:t.frequency},on:{output:function(e){t.frequency=e}}})],1)]):n("div",{staticClass:"form-group mb16"},[n("label",{attrs:{for:"audio-assistant-source"}},[n("i",{staticClass:"icon-music-note mr8"}),t._v(" Source ")]),n("button",{staticClass:"btn -file -blue -large -cases w-100",on:{change:t.handleFile}},[n("i",{staticClass:"icon-upload mr8"}),t._v(" Browse "),n("input",{attrs:{type:"file",accept:"audio/*"}})])]),n("div",{staticClass:"form-group mb16"},[n("label",[t._v("Gain "),n("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:t.descriptions.gain}})]),n("div",{staticClass:"column"},[n("slider",{attrs:{min:0,max:2,step:.01,editable:!1,label:!0,"show-completion":!0,value:t.gain},on:{input:function(e){t.gain=e},reset:function(e){return t.reset("gain")}}}),n("label",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"checkbox-control checkbox-control-input",attrs:{title:"Dynamic"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.dynamicGain,expression:"dynamicGain"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.dynamicGain)?t._i(t.dynamicGain,null)>-1:t.dynamicGain},on:{change:function(e){var n=t.dynamicGain,r=e.target,i=!!r.checked;if(Array.isArray(n)){var o=null,a=t._i(n,o);r.checked?a<0&&(t.dynamicGain=n.concat([o])):a>-1&&(t.dynamicGain=n.slice(0,a).concat(n.slice(a+1)))}else t.dynamicGain=i}}}),n("div")])],1)]),n("div",{staticClass:"form-group mb16"},[n("label",[t._v("Duration "),n("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:t.descriptions.holdDuration}})]),n("div",{staticClass:"column"},[n("slider",{attrs:{min:0,max:10,step:.1,editable:!1,label:!0,"show-completion":!0,value:t.holdDuration},on:{input:function(e){t.holdDuration=e},reset:function(e){return t.reset("holdDuration")}}}),n("label",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"checkbox-control checkbox-control-input",attrs:{title:"Dynamic"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.dynamicLength,expression:"dynamicLength"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.dynamicLength)?t._i(t.dynamicLength,null)>-1:t.dynamicLength},on:{change:function(e){var n=t.dynamicLength,r=e.target,i=!!r.checked;if(Array.isArray(n)){var o=null,a=t._i(n,o);r.checked?a<0&&(t.dynamicLength=n.concat([o])):a>-1&&(t.dynamicLength=n.slice(0,a).concat(n.slice(a+1)))}else t.dynamicLength=i}}}),n("div")])],1)]),n("section",{staticClass:"section"},[t.showAdvanced?n("div",["play"===t.type?n("div",{staticClass:"form-group mb16"},[n("label",[t._v("Wave type ("),n("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/OscillatorNode/type"}},[t._v("learn more")]),t._v(")")]),n("dropdown",{staticClass:"-left",attrs:{selected:t.osc,options:["'triangle'","'square'","'sine'","'sawtooth'"],selectionClass:"-outline form-control -arrow","return-value":""},on:{output:function(e){t.osc=e}},scopedSlots:t._u([{key:"selection",fn:function(){return[t._v(" "+t._s(t.osc.replace(/'/g,""))+" ")]},proxy:!0},{key:"option",fn:function(e){var n=e.value;return[t._v(" "+t._s(n.replace(/'/g,""))+" ")]}}],null,!1,2424831711)})],1):t._e(),n("div",{staticClass:"column mb16"},[n("div",{staticClass:"form-group -fill"},[n("label",[t._v("Fade In "),n("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:t.descriptions.fadeIn}})]),n("slider",{staticClass:"mt8",attrs:{min:0,max:10,step:.1,editable:!1,label:!0,"show-completion":!0,value:t.fadeIn},on:{input:function(e){t.fadeIn=e},reset:function(e){return t.reset("fadeIn")}}})],1),n("div",{staticClass:"ml8 form-group -fill"},[n("label",[t._v("Fade Out "),n("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:t.descriptions.fadeOut}})]),n("slider",{staticClass:"mt8",attrs:{min:0,max:10,step:.1,editable:!1,label:!0,"show-completion":!0,value:t.fadeOut},on:{input:function(e){t.fadeOut=e},reset:function(e){return t.reset("fadeOut")}}})],1)]),n("div",{staticClass:"column mb16"},[n("div",{staticClass:"form-group -fill"},[n("label",[t._v("Start Gain "),n("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:t.descriptions.startGain}})]),n("slider",{staticClass:"mt8",attrs:{min:1e-4,max:1,step:.001,editable:!1,label:!0,"show-completion":!0,value:t.startGain},on:{input:function(e){t.startGain=e},reset:function(e){return t.reset("startGain")}}})],1),n("div",{staticClass:"ml8 form-group -fill"},[n("label",[t._v("End Gain "),n("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:t.descriptions.endGain}})]),n("slider",{staticClass:"mt8",attrs:{min:1e-4,max:1,step:.001,editable:!1,label:!0,"show-completion":!0,value:t.endGain},on:{input:function(e){t.endGain=e},reset:function(e){return t.reset("endGain")}}})],1)]),n("div",{staticClass:"form-group mb16"},[n("label",[t._v("Delay "),n("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:t.descriptions.delay}})]),n("slider",{staticClass:"mt8",attrs:{min:0,max:10,step:.1,editable:!1,label:!0,"show-completion":!0,value:t.delay},on:{input:function(e){t.delay=e},reset:function(e){return t.reset("delay")}}})],1)]):t._e(),n("div",{staticClass:"section__title",on:{click:function(e){t.showAdvanced=!t.showAdvanced}}},[t._v(" Advanced "),n("i",{staticClass:"icon-up-thin"})])]),n("div",{staticClass:"form-group mt16"},[n("label",{attrs:{for:"audio-assistant-output"}},[t._v(" Output ")]),n("div",{staticClass:"d-flex"},[n("textarea",{ref:"output",staticClass:"form-control",attrs:{id:"audio-assistant-output",cols:"20",rows:"4",spellcheck:"false",readonly:""},domProps:{value:t.litteral}}),n("button",{staticClass:"btn -red ml8",on:{click:function(e){return t.$emit("test",{event:e,litteral:t.litteral})}}},[n("i",{staticClass:"icon-volume-high"})])]),t.error?n("p",{staticClass:"form-feedback"},[n("i",{staticClass:"icon-warning mr4"}),t._v(" "+t._s(t.error))]):t._e()]),n("footer",[n("a",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"btn -text mrauto",attrs:{href:"javascript:void(0);",title:"Restart audio service (clear ALL queue)"},on:{click:function(e){return t.$emit("stop")}}},[n("i",{staticClass:"icon-refresh mr8"}),t._v(" Restart audio ")]),n("a",{staticClass:"btn -text mr8",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.close(!1)}}},[t._v("Cancel")]),n("button",{staticClass:"btn -large",on:{click:t.submit}},[n("i",{staticClass:"icon-check mr4"}),t._v(" Ok")])])])},Np=[],Bp=["gain"],Lp=["holdDuration","fadeIn","fadeOut"],jp={components:{Slider:U},props:{type:{required:!0,type:String},error:{required:!1,type:String}},mixins:[Et],data:function(){return{url:null,frequencyHz:null,gain:null,fadeOut:null,delay:null,fadeIn:null,holdDuration:null,osc:null,startGain:null,endGain:null,startTime:null,dynamicGain:!0,dynamicLength:!0,uploadedSound:null,showAdvanced:!1}},computed:{title:function(){return"play"===this.type?"Synthetize sound":"Import your own"},descriptions:function(){return uo},frequency:{get:function(){return this.frequencyHz},set:function(t){isNaN(t)?this.frequencyHz=this.noteToFrequency(t):this.frequencyHz=+t}},litteral:function(){for(var t=this,e=po[this.type],n=Object.keys(e),r=n.map((function(n){return t.dynamicGain&&-1!==Bp.indexOf(n)||t.dynamicLength&&-1!==Lp.indexOf(n)?t[n]?"gain*"+t[n]:0!=e[n]?0:null:t[n]!=e[n]?t[n]:null})),i=r.length-1;i>=0;i--){if(null!==r[i])break;r.splice(i,1)}return"".concat(this.type,"(").concat(r.map((function(t){return null===t?"":t})),")")}},created:function(){this.setDefaultAudioAttributes()},beforeDestroy:function(){var t=this;this.uploadedSound&&pn.removeSound(this.uploadedSound).then((function(){t.$store.dispatch("app/showNotice",{title:"Deleted ".concat(t.uploadedSound," (canceled)"),type:"info"})}))},methods:{setDefaultAudioAttributes:function(){var t=po[this.type];for(var e in t)this[e]=t[e]},noteToFrequency:function(t){var e,n,r=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"];return e=3===t.length?t.charAt(2):t.charAt(1),n=r.indexOf(t.slice(0,-1)),n=n<3?n+12+12*(e-1)+1:n+12*(e-1)+1,+(440*Math.pow(2,(n-49)/12)).toFixed(2)},handleFile:async function(t){var e=t.target.files[0];if(e)try{var n=await Yu.importSound(e);n?(this.uploadedSound&&pn.removeSound(this.uploadedSound),this.uploadedSound=this.url=n.name):this.url=e.name}catch(r){return void this.$store.dispatch("app/showNotice",{title:r.message,type:"error"})}},reset:function(t){var e=po[this.type][t];this[t]=e},submit:function(){this.$emit("append",{litteral:this.litteral,uploadedSound:this.uploadedSound}),this.uploadedSound=null,this.close()}}},Mp=jp,$p=Object(R["a"])(Mp,Up,Np,!1,null,null,null),Fp=$p.exports;function Hp(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Gp(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Gp(t,e){if(t){if("string"===typeof t)return Xp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xp(t,e):void 0}}function Xp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Vp={components:{PrismEditor:Bc["a"]},props:{paneId:{required:!0,type:String},thresholds:{required:!0},thresholdId:{required:!0,type:String}},mixins:[Et],data:function(){return{buyAudio:"",sellAudio:"",buyError:null,sellError:null,showHelp:!1,focusedSide:null,loopingSide:null,dropping:null,liveAnnotation:null,uploadedSounds:[]}},computed:{threshold:function(){var t=this;return this.thresholds.find((function(e){return e.id===t.thresholdId}))},amounts:function(){return this.thresholds.map((function(t){return t.amount}))},audioPitch:function(){return this.$store.state[this.paneId].audioPitch},audioVolume:function(){return this.$store.state[this.paneId].audioVolume},index:function(){return this.amounts.indexOf(this.threshold.amount)},min:function(){return this.threshold.amount},max:function(){return this.amounts[this.index+1]||2*this.amounts[this.index]}},created:function(){var t=this;if(!this.threshold)return this.$nextTick((function(){return t.close(!1)}));this.buyAudio=this.threshold.buyAudio||"",this.sellAudio=this.threshold.sellAudio||""},mounted:function(){},beforeDestroy:function(){var t=this;this._loopingTimeout&&(clearTimeout(this._loopingTimeout),this._loopingTimeout=!1);var e,n=Hp(this.uploadedSounds);try{var r=function(){var n=e.value;pn.removeSound(n).then((function(){t.$store.dispatch("app/showNotice",{title:"Deleted ".concat(n," (canceled)"),type:"info"})}))};for(n.s();!(e=n.n()).done;)r()}catch(i){n.e(i)}finally{n.f()}},methods:{highlighter:function(t){return Object(fu["highlight"])(t,fu["languages"].js,"js")},setInput:function(t,e){this[e+"Audio"]=t,this.liveAnnotation=null},saveInputs:function(){this.validate(!0)&&(this.$store.commit(this.paneId+"/SET_THRESHOLD_AUDIO",{id:this.thresholdId,buyAudio:this.buyAudio,sellAudio:this.sellAudio}),this.uploadedSounds.splice(0,this.uploadedSounds.length),this.close(!0))},validate:function(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=0,n=["buy","sell"];e<n.length;e++){var r=n[e],i=this[r+"Audio"];try{this.emulateAudioFunction(i,r)}catch(o){return t&&Un.confirm({message:"Please check that ".concat(r," audio script is syntactically correct."),ok:"OK",cancel:!1}),!1}}return!0},testCustom:async function(t,e,n){return this._loopingTimeout&&this.stopLoop(),n||(n=this[t+"Audio"]),await this.test(n,t,e)},testOriginal:function(t,e){this._loopingTimeout&&this.stopLoop();var n=this.threshold[t+"Audio"];this.test(n,t,e)},stopLoop:function(){this._loopingTimeout&&(clearTimeout(this._loopingTimeout),this._loopingTimeout=!1,this.loopingSide=null)},loopSide:function(t){var e=this;this._loopingTimeout||(this.loopingSide=t),this._loopingTimeout=setTimeout((function(){e.test(e[t+"Audio"],t),e.loopSide(t)}),100*Math.random())},restartWebAudio:function(){mo.reconnect()},test:async function(t,e,n){var r,i=1,o=this.max-this.min;if(n&&n.shiftKey||!o?r=this.min:(r=this.min+Math.random()*o,i=r/this.amounts[1]),r){var a=await this.emulateAudioFunction(t,e,i);return a&&n&&this.$store.dispatch("app/showNotice",{id:"testing-threshold-audio",type:"buy"===e?"success":"error",title:"NOW PLAYING : "+Ae(r)+" "+e.toUpperCase()+" trade",timeout:1e3}),a}},formatAmount:function(t){return Ae(t)},emulateAudioFunction:async function(t,e,n){try{var r=await mo.buildAudioFunction(t,e,this.audioPitch,this.audioVolume,!0);return"undefined"!==typeof n&&r(mo,n),this[e+"Error"]=null,!0}catch(i){return this[e+"Error"]=i.message,!1}},openSoundAssistant:function(t,e){var n=this,r=Un.open(Fp,{type:t,error:this[e+"Error"]});r.$on("test",(function(t){var r=t.event,i=t.litteral;return n.testCustom(e,r,i)})),r.$on("stop",this.restartWebAudio),r.$on("append",(function(t){var r=t.litteral,i=t.uploadedSound;i&&n.uploadedSounds.push(i),n[e+"Audio"].trim().length?n[e+"Audio"]+="\n".concat(r):n[e+"Audio"]=r}))},handleDropEnter:function(t){this.dropping=t},handleDrop:async function(t,e){if(t.dataTransfer.files&&t.dataTransfer.files.length){if(t.preventDefault(),t.stopPropagation(),"drop"!==t.type)return!1;var n,r=Hp(t.dataTransfer.files);try{for(r.s();!(n=r.n()).done;){var i=n.value;await this.importSound(i,e)}}catch(o){r.e(o)}finally{r.f()}this.dropping=null}},importSound:async function(t,e){try{var n=await Yu.importSound(t);n&&this.uploadedSounds.push(n.name);var r="playurl(".concat(t.name,")");this[e+"Audio"].trim().length?this[e+"Audio"]+="\n".concat(r):this[e+"Audio"]=r}catch(i){return void this.$store.dispatch("app/showNotice",{title:i.message,type:"error"})}},scheduleLiveAnnotation:async function(t,e){this.focusedSide=e,this._liveAnnotationTimeout&&clearTimeout(this._liveAnnotationTimeout),this._liveAnnotationTimeout=setTimeout(this.findCurrentParameter.bind(this,t.currentTarget,e),200)},findCurrentParameter:function(t){if(this._liveAnnotationTimeout=null,"selectionStart"in t&&document.activeElement==t){var e=t.selectionStart-1,n=t.value.slice(),r=e;for(r;r>=0;r--){if(/\n/.test(n[r])){r++;break}0===r&&e--}r>=0&&(n=n.slice(r)),e-=r;var i=n.indexOf("\n");if(i>=0&&(n=n.slice(0,i)),n.length){var o,a=new RegExp("(play(?:url)?)\\(","g");do{if(o=a.exec(n)){var s=o[1],c=o.index,l=Ht(n,c+s.length);if(e<c+s.length||e>=l)continue;for(var u=Gt(n.slice(c+s.length+1,l),!1,5),d=c+s.length+1,h=0;h<u.length;h++){if(e<=d+u[h].length-1)return void this.showParameterAnnotation(s,h);d+=u[h].length+1}}}while(o);this.liveAnnotation&&(this.liveAnnotation=null)}}},showParameterAnnotation:function(t,e){var n,r=ho[t][e];n=r?"".concat(r.toUpperCase()," : ").concat(uo[r]):"Too many parameters on ".concat(t,"() !"),this.liveAnnotation=n},reset:function(t){var e=JSON.parse(JSON.stringify(Pr[this.$store.state.panes.panes[this.paneId].type].state));e.thresholds[Math.min(this.index,3)]&&(this[t+"Audio"]=e.thresholds[Math.min(this.index,3)][t+"Audio"])}}},qp=Vp,Kp=(n("0df9"),Object(R["a"])(qp,Rp,Dp,!1,null,"6dfc13ba",null)),zp=Kp.exports;function Wp(t){return Wp="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wp(t)}function Yp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qp(t,e,n){return e&&Jp(t.prototype,e),n&&Jp(t,n),t}function Zp(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tf(t,e)}function tf(t,e){return tf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},tf(t,e)}function ef(t){var e=of();return function(){var n,r=af(t);if(e){var i=af(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return nf(this,n)}}function nf(t,e){if(e&&("object"===Wp(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return rf(t)}function rf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function of(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function af(t){return af=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},af(t)}var sf=function(t){Zp(n,t);var e=ef(n);function n(){var t;return Yp(this,n),t=e.apply(this,arguments),t.rendering=!0,t.dragging=null,t.editing=null,t.selectedThresholdId=null,t.selectedElement=null,t.panelCaretPosition=0,t.panelOffsetPosition=0,t._dragReference=null,t._minimum=null,t._maximum=null,t._offsetLeft=null,t}return Qp(n,[{key:"selectedThreshold",get:function(){var t=this.$store.getters[this.paneId+"/getThreshold"](this.selectedThresholdId);return t}},{key:"showThresholdsAsTable",get:function(){return this.$store.state[this.paneId].showThresholdsAsTable}},{key:"useAudio",get:function(){return this.$store.state.settings.useAudio}},{key:"created",value:function(){var t=this;this._onStoreMutation=this.$store.subscribe((function(e){switch(e.type){case t.paneId+"/TOGGLE_SETTINGS_PANEL":case t.paneId+"/TOGGLE_THRESHOLDS_TABLE":(e.type===t.paneId+"/TOGGLE_SETTINGS_PANEL"&&"thresholds"===e.payload||e.type===t.paneId+"/TOGGLE_THRESHOLDS_TABLE"&&!1===e.payload)&&(t.rendering=!0,t.refreshHandlers(),t.refreshGradients());break;case t.paneId+"/SET_THRESHOLD_AMOUNT":t.reorderThresholds(),t.refreshHandlers();break;case t.paneId+"/SET_THRESHOLD_COLOR":t.refreshGradients();break;case t.paneId+"/ADD_THRESHOLD":t.refreshHandlers();break}}))}},{key:"mounted",value:function(){this.showThresholdsAsTable||(this.refreshHandlers(),this.refreshGradients()),this._startDrag=this.startDrag.bind(this),this.$el.addEventListener("touchstart",this._startDrag,!1),this.$el.addEventListener("mousedown",this._startDrag,!1),this._doDrag=this.doDrag.bind(this),window.addEventListener("touchmove",this._doDrag,!1),window.addEventListener("mousemove",this._doDrag,!1),this._endDrag=this.endDrag.bind(this),window.addEventListener("touchend",this._endDrag,!1),window.addEventListener("mouseup",this._endDrag,!1),this._doResize=this.refreshHandlers.bind(this),window.addEventListener("resize",this._doResize,!1)}},{key:"beforeDestroy",value:function(){window.removeEventListener("touchmove",this._doDrag),window.removeEventListener("mousemove",this._doDrag),window.removeEventListener("touchend",this._endDrag),window.removeEventListener("mouseup",this._endDrag),window.removeEventListener("resize",this._doResize),this._onStoreMutation()}},{key:"startDrag",value:function(t){var e=this;if(t.target.classList.contains("thresholds-slider__handler")){var n=t.pageX;t.touches&&t.touches.length&&(n=t.touches[0].pageX),this.selectedThresholdId=t.target.getAttribute("data-id"),this.selectedThresholdId&&(this.selectedElement=t.target),this.$nextTick((function(){e.refreshCaretPosition(t.target),e._dragReference={timestamp:Date.now(),position:n}}))}}},{key:"doDrag",value:function(t){var e=t.pageX;if(t.touches&&t.touches.length&&(e=t.touches[0].pageX),null!==this.selectedElement&&this._dragReference&&!(Date.now()-this._dragReference.timestamp<1e3&&Math.abs(this._dragReference.position-e)<3)){this.dragging=!0;var n=Math.max(0,Math.log(this._minimum+1)||0),r=n/Math.log(this._maximum+1)*this._width,i=Math.max(this._width/3*-1,Math.min(1.5*this._width,e-this._offsetLeft)),o=Math.exp((r+i/this._width*(this._width-r))/this._width*Math.log(this._maximum+1))-1;e<this._offsetLeft?(o=this.selectedThreshold.amount-.1*(this.selectedThreshold.amount-o),i=0):e>this._offsetLeft+this._width&&(o=this.selectedThreshold.amount-.1*(this.selectedThreshold.amount-o),i=this._width),o<0&&(o=0),this.selectedElement.style.transform="translateX("+i+"px)",this.refreshCaretPosition(),this.$store.commit(this.paneId+"/SET_THRESHOLD_AMOUNT",{id:this.selectedThresholdId,value:o})}}},{key:"endDrag",value:function(){this.selectedElement&&(this.selectedElement=null,this.reorderThresholds(),this.refreshHandlers(),this.refreshGradients()),this.dragging=!1}},{key:"refreshHandlers",value:async function(){await Mt(100);var t=this.thresholds.map((function(t){return t.amount}));if(this._minimum=this.thresholds[0].amount,this._maximum=Math.max.apply(null,t),!this.showThresholdsAsTable){var e=this.$refs.thresholdContainer.getBoundingClientRect();this._offsetLeft=e.left,this._width=this.$refs.thresholdContainer.clientWidth;for(var n=this.$refs.thresholdContainer.children,r=Math.max(0,Math.log(this._minimum+1)||0),i=Math.log(this._maximum+1)-r,o=0;o<this.thresholds.length;o++){var a=n[o],s=this.thresholds[o],c=Math.log(s.amount+1)-r,l=this._width*(c/i);a.style.transform="translateX("+l+"px)"}this.rendering=!1}}},{key:"refreshCaretPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedElement,e=parseFloat(t.style.transform.replace(/[^\d.]/g,""))||0,n=this.$refs.thresholdPanel.clientWidth,r=24,i=(this._width-n)/2+r;this.panelOffsetPosition=-i+2*i*(e/this._width),this.panelCaretPosition=r+(n-2*r)*(e/this._width)}},{key:"refreshGradients",value:async function(){if(!this.showThresholdsAsTable){await Mt(100);for(var t=Math.max(0,Math.log(this._minimum+1)||0),e=Math.log(this._maximum+1),n=[],r=[],i=0;i<this.thresholds.length;i++){var o=0===i?0:i===this.thresholds.length-1?100:((Math.log(this.thresholds[i].amount+1)-t)/(e-t)*100).toFixed(2);n.push("".concat(this.thresholds[i].buyColor," ").concat(o,"%")),r.push("".concat(this.thresholds[i].sellColor," ").concat(o,"%"))}this.$refs.buysGradient.style.backgroundImage="linear-gradient(to right, ".concat(n.join(", "),")"),this.$refs.sellsGradient.style.backgroundImage="linear-gradient(to right, ".concat(r.join(", "),")")}}},{key:"reorderThresholds",value:function(){this.thresholds.sort((function(t,e){return t.amount-e.amount}))}},{key:"deleteThreshold",value:function(t){this.thresholds.length<=2||this.$store.commit(this.paneId+"/DELETE_THRESHOLD",t)}},{key:"openThresholdAudio",value:function(t){Un.open(zp,{paneId:this.paneId,thresholds:this.thresholds,thresholdId:t})}},{key:"formatAmount",value:function(t){return Ae(t)}}]),n}(s["c"]);sf=Object(a["a"])([Object(s["a"])({name:"Thresholds",props:{paneId:{type:String,required:!0},thresholds:{required:!0}}})],sf);var cf=sf,lf=cf,uf=(n("dd52"),Object(R["a"])(lf,Pp,xp,!1,null,null,null)),df=uf.exports,hf=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{on:{clickOutside:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{staticClass:"title"},[t._v("Configure preset")])]},proxy:!0}])},[n("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[n("div",{staticClass:"form-group mb8"},[n("label",[t._v("Choose type")]),n("label",{staticClass:"checkbox-control mt8"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.includeThresholds,expression:"includeThresholds"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.includeThresholds)?t._i(t.includeThresholds,null)>-1:t.includeThresholds},on:{change:function(e){var n=t.includeThresholds,r=e.target,i=!!r.checked;if(Array.isArray(n)){var o=null,a=t._i(n,o);r.checked?a<0&&(t.includeThresholds=n.concat([o])):a>-1&&(t.includeThresholds=n.slice(0,a).concat(n.slice(a+1)))}else t.includeThresholds=i}}}),n("div"),n("span",[t._v("Trades")])])]),n("div",{staticClass:"form-group mb8"},[n("label",{staticClass:"checkbox-control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.includeLiquidations,expression:"includeLiquidations"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.includeLiquidations)?t._i(t.includeLiquidations,null)>-1:t.includeLiquidations},on:{change:function(e){var n=t.includeLiquidations,r=e.target,i=!!r.checked;if(Array.isArray(n)){var o=null,a=t._i(n,o);r.checked?a<0&&(t.includeLiquidations=n.concat([o])):a>-1&&(t.includeLiquidations=n.slice(0,a).concat(n.slice(a+1)))}else t.includeLiquidations=i}}}),n("div"),n("span",[t._v("Liquidations")])])]),n("div",{staticClass:"form-group mb8 mt16"},[n("label",[t._v("Choose what to include in preset")]),n("label",{staticClass:"checkbox-control mt8"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.includeAmounts,expression:"includeAmounts"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.includeAmounts)?t._i(t.includeAmounts,null)>-1:t.includeAmounts},on:{change:function(e){var n=t.includeAmounts,r=e.target,i=!!r.checked;if(Array.isArray(n)){var o=null,a=t._i(n,o);r.checked?a<0&&(t.includeAmounts=n.concat([o])):a>-1&&(t.includeAmounts=n.slice(0,a).concat(n.slice(a+1)))}else t.includeAmounts=i}}}),n("div"),n("span",[t._v("Amounts")])])]),n("div",{staticClass:"form-group mb8"},[n("label",{staticClass:"checkbox-control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.includeColors,expression:"includeColors"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.includeColors)?t._i(t.includeColors,null)>-1:t.includeColors},on:{change:function(e){var n=t.includeColors,r=e.target,i=!!r.checked;if(Array.isArray(n)){var o=null,a=t._i(n,o);r.checked?a<0&&(t.includeColors=n.concat([o])):a>-1&&(t.includeColors=n.slice(0,a).concat(n.slice(a+1)))}else t.includeColors=i}}}),n("div"),n("span",[t._v("Colors")])])]),n("div",{staticClass:"form-group mb8"},[n("label",{staticClass:"checkbox-control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.includeAudio,expression:"includeAudio"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.includeAudio)?t._i(t.includeAudio,null)>-1:t.includeAudio},on:{change:function(e){var n=t.includeAudio,r=e.target,i=!!r.checked;if(Array.isArray(n)){var o=null,a=t._i(n,o);r.checked?a<0&&(t.includeAudio=n.concat([o])):a>-1&&(t.includeAudio=n.slice(0,a).concat(n.slice(a+1)))}else t.includeAudio=i}}}),n("div"),n("span",[t._v("Audio")])])]),n("footer",[n("a",{staticClass:"btn -text mr8",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.close(!1)}}},[t._v("Cancel")]),n("button",{staticClass:"btn -large -green",attrs:{type:"submit"}},[n("i",{staticClass:"icon-check mr4"}),t._v(" Submit")])])])])},pf=[],ff={mixins:[Et],data:function(){return{includeThresholds:!0,includeLiquidations:!0,includeAmounts:!1,includeColors:!0,includeAudio:!0}},methods:{submit:function(){this.close({thresholds:this.includeThresholds,liquidations:this.includeLiquidations,amounts:this.includeAmounts,colors:this.includeColors,audios:this.includeAudio})}}},mf=ff,vf=Object(R["a"])(mf,hf,pf,!1,null,null,null),yf=vf.exports;function bf(t){return bf="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bf(t)}function gf(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Cf(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Sf(t,e){return kf(t)||Tf(t,e)||Cf(t,e)||_f()}function _f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Cf(t,e){if(t){if("string"===typeof t)return wf(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wf(t,e):void 0}}function wf(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tf(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function kf(t){if(Array.isArray(t))return t}function Ef(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function If(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Of(t,e,n){return e&&If(t.prototype,e),n&&If(t,n),t}function Af(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pf(t,e)}function Pf(t,e){return Pf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Pf(t,e)}function xf(t){var e=Uf();return function(){var n,r=Nf(t);if(e){var i=Nf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Rf(this,n)}}function Rf(t,e){if(e&&("object"===bf(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Df(t)}function Df(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Uf(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Nf(t){return Nf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Nf(t)}var Bf=function(t){Af(n,t);var e=xf(n);function n(){var t;return Ef(this,n),t=e.apply(this,arguments),t.sections=["thresholds"],t}return Of(n,[{key:"useAudio",get:function(){return this.$store.state.settings.useAudio}},{key:"markets",get:function(){return this.$store.state.panes.panes[this.paneId].markets}},{key:"maxRows",get:function(){return this.$store.state[this.paneId].maxRows}},{key:"thresholds",get:function(){return this.$store.state[this.paneId].thresholds}},{key:"liquidations",get:function(){return this.$store.state[this.paneId].liquidations}},{key:"showLogos",get:function(){return this.$store.state[this.paneId].showLogos}},{key:"monochromeLogos",get:function(){return this.$store.state[this.paneId].monochromeLogos}},{key:"showTimeAgo",get:function(){return this.$store.state[this.paneId].showTimeAgo}},{key:"showPrice",get:function(){return this.$store.state[this.paneId].showPrice}},{key:"tradeType",get:function(){return this.$store.state[this.paneId].tradeType}},{key:"showTradesPairs",get:function(){return this.$store.state[this.paneId].showTradesPairs}},{key:"showThresholdsAsTable",get:function(){return this.$store.state[this.paneId].showThresholdsAsTable}},{key:"audioThresholdPlaceholder",get:function(){return"10% of minimum threshold ("+ +(.1*this.thresholds[0].amount).toFixed(2)+")"}},{key:"audioThreshold",get:function(){return this.$store.state[this.paneId].audioThreshold}},{key:"muted",get:function(){return this.$store.state[this.paneId].muted}},{key:"audioPitch",get:function(){return this.$store.state[this.paneId].audioPitch||1}},{key:"audioVolume",get:function(){var t=this.$store.state[this.paneId].audioVolume;return null===t?this.$store.state.settings.audioVolume:t}},{key:"multipliers",get:function(){var t=this;return this.markets.map((function(e){var n=Ie(e),r=Sf(n,2),i=r[0],o=r[1],a=t.$store.state[t.paneId].multipliers[e];return{exchange:i,pair:o,multiplier:isNaN(a)?1:a,identifier:e}}))}},{key:"mutipliersCount",get:function(){return this.multipliers.filter((function(t){return 1!==t.multiplier})).length}},{key:"thresholdsMultipler",get:function(){return this.$store.state[this.paneId].thresholdsMultipler}},{key:"disableAnimations",get:function(){return this.$store.state.settings.disableAnimations}},{key:"displayGifWarning",get:function(){return this.disableAnimations&&(this.thresholds.filter((function(t){return!!t.buyGif&&!!t.sellGif})).length||this.liquidations.filter((function(t){return!!t.buyGif&&!!t.sellGif})).length)}},{key:"formatAmount",value:function(t){return Ae(t)}},{key:"toggleSection",value:function(t){var e=this.sections.indexOf(t);-1===e?this.sections.push(t):this.sections.splice(e,1)}},{key:"getAudioPreset",value:async function(){var t=await Un.openAsPromise(yf);if(t){if(!t.thresholds&&!t.liquidations&&!t.amounts&&!t.audios&&!t.colors)return void this.$store.dispatch("app/showNotice",{title:"You did not select anything to save in the preset !",type:"error"});for(var e={},n=0,r=["thresholds","liquidations"];n<r.length;n++){var i=r[n];if(t[i]){e[i]=[];var o,a=gf(this.$store.state[this.paneId][i]);try{for(a.s();!(o=a.n()).done;){var s=o.value,c={};t.amounts&&(c.amount=s.amount),t.colors&&(c.buyColor=s.buyColor,c.sellColor=s.sellColor),t.audios&&(c.buyAudio=s.buyAudio,c.sellAudio=s.sellAudio),e[i].push(c)}}catch(l){a.e(l)}finally{a.f()}}}return e}}},{key:"applyAudioPreset",value:function(t){var e=this,n=JSON.parse(JSON.stringify(Pr[this.$store.state.panes.panes[this.paneId].type].state)),r=null,i=null,o=null;if(t){var a;if(t[0])t.liquidations&&(a=t.liquidations,delete t.liquidations),t={thresholds:Object.values(t),liquidations:a?[a]:null};for(var s=function(){var a=l[c];if(!t[a])return"continue";o="undefined"!==typeof t[a][0].amount,r="undefined"!==typeof t[a][0].buyColor,i="undefined"!==typeof t[a][0].buyAudio;var s=o&&r&&i,d=n[a].length;if(s)return u()(e.$store.state[e.paneId][a],t[a]),"continue";var h=e.$store.state[e.paneId][a][0].amount;e.$store.state[e.paneId][a]=u()(e.$store.state[e.paneId][a],t[a]).map((function(t,e){return t.id||(t.id=Nt()),"undefined"===typeof t.amount&&(t.amount=h),"undefined"===typeof t.buyColor&&(t.buyColor=n[a][Math.min(e,d)].buyColor,t.sellColor=n[a][Math.min(e,d)].sellColor),"undefined"===typeof t.buyAudio&&(t.buyAudio=n[a][Math.min(e,d)].buyAudio,t.sellAudio=n[a][Math.min(e,d)].sellAudio),h=t.amount,t}))},c=0,l=["thresholds","liquidations"];c<l.length;c++)s()}else o=r=i=!0,this.$store.state[this.paneId].thresholds&&this.$store.state[this.paneId].thresholds.splice(0,this.$store.state[this.paneId].thresholds.length),this.$store.state[this.paneId].liquidations&&this.$store.state[this.paneId].liquidations.splice(0,this.$store.state[this.paneId].liquidations.length),u()(this.$store.state[this.paneId],{thresholds:n.thresholds,liquidations:n.liquidations,thresholdsMultipler:1});var d=this.$store.state[this.paneId].thresholds[0];o&&this.$store.commit(this.paneId+"/SET_THRESHOLD_AMOUNT",{id:d.id,value:d.amount}),r&&this.$store.commit(this.paneId+"/SET_THRESHOLD_COLOR",{id:d.id,side:"buy",value:d.buyColor}),i&&this.$store.commit(this.paneId+"/SET_THRESHOLD_AUDIO",{id:d.id,buyAudio:d.buyAudio,sellAudio:d.sellAudio})}}]),n}(s["c"]);Bf=Object(a["a"])([Object(s["a"])({components:{Thresholds:df,Slider:U},name:"TradesSettings",props:{paneId:{type:String,required:!0}}})],Bf);var Lf=Bf,jf=Lf,Mf=(n("8530"),Object(R["a"])(jf,Op,Ap,!1,null,"5d9315f4",null)),$f=Mf.exports,Ff={components:{TradesSettings:$f},mixins:[Et,Ip],data:function(){return{renaming:!1}},methods:{}},Hf=Ff,Gf=Object(R["a"])(Hf,sp,cp,!1,null,null,null),Xf=Gf.exports,Vf=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{staticClass:"pane-dialog",on:{clickOutside:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{staticClass:"title -editable",domProps:{textContent:t._s(t.name)},on:{dblclick:t.renamePane}}),n("div",{staticClass:"column -center"})]},proxy:!0}])},[n("counters-settings",{attrs:{paneId:t.paneId}})],1)},qf=[],Kf=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"settings-counters"},[n("div",{staticClass:"column"},[n("div",{staticClass:"form-group -tight"},[n("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"checkbox-control checkbox-control-input -auto flex-right",attrs:{title:"Sum amount of trades instead of volume"}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.countersCount},on:{change:function(e){return t.$store.commit(t.paneId+"/TOGGLE_COUNT",e.target.checked)}}}),n("div",{attrs:{on:"count",off:"volume"}})])]),n("div",{staticClass:"form-group -fill"},[n("input",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"form-control",attrs:{title:"Comma separated list of steps (ex: 1m, 5m, 10m, 15m)",type:"string",placeholder:"Enter a set of timeframes (ie 1m, 15m)"},domProps:{value:t.countersStepsStringified},on:{change:function(e){return t.replaceCounters(e.target.value)}}})])]),n("div",{staticClass:"form-group mt8"},[n("label",{staticClass:"checkbox-control -rip checkbox-control-input",on:{change:function(e){return t.$store.commit(t.paneId+"/TOGGLE_LIQUIDATIONS_ONLY",e.target.checked)}}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.liquidationsOnly}}),n("div"),n("span",[t._v("Only show liquidations")])])])])},zf=[];function Wf(t){return Wf="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wf(t)}function Yf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qf(t,e,n){return e&&Jf(t.prototype,e),n&&Jf(t,n),t}function Zf(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tm(t,e)}function tm(t,e){return tm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},tm(t,e)}function em(t){var e=im();return function(){var n,r=om(t);if(e){var i=om(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return nm(this,n)}}function nm(t,e){if(e&&("object"===Wf(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return rm(t)}function rm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function im(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function om(t){return om=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},om(t)}var am=function(t){Zf(n,t);var e=em(n);function n(){return Yf(this,n),e.apply(this,arguments)}return Qf(n,[{key:"countersCount",get:function(){return this.$store.state[this.paneId].count}},{key:"countersSteps",get:function(){return this.$store.state[this.paneId].steps}},{key:"liquidationsOnly",get:function(){return this.$store.state[this.paneId].liquidationsOnly}},{key:"countersStepsStringified",get:function(){var t=Date.now();return this.countersSteps.map((function(e){return Rt(t-e)})).join(", ")}},{key:"replaceCounters",value:function(t){var e=t.split(",").map((function(t){return t=t.trim(),/[\d.]+s/.test(t)?1e3*parseFloat(t):/[\d.]+h/.test(t)?1e3*parseFloat(t)*60*60:1e3*parseFloat(t)*60})).filter((function(t,e,n){return n.indexOf(t)==e}));e.filter((function(t){return isNaN(t)})).length?this.$store.dispatch("app/showNotice",{type:"error",title:"Counters (".concat(t,") contains invalid steps.")}):this.$store.commit(this.paneId+"/REPLACE_COUNTERS",e)}}]),n}(s["c"]);am=Object(a["a"])([Object(s["a"])({name:"CountersSettings",props:{paneId:{type:String,required:!0}}})],am);var sm=am,cm=sm,lm=Object(R["a"])(cm,Kf,zf,!1,null,null,null),um=lm.exports,dm={components:{CountersSettings:um},mixins:[Et,Ip],data:function(){return{renaming:!1}},methods:{}},hm=dm,pm=Object(R["a"])(hm,Vf,qf,!1,null,null,null),fm=pm.exports,mm=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{staticClass:"pane-dialog -medium -mobile-fs",on:{clickOutside:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{staticClass:"title -editable",domProps:{textContent:t._s(t.name)},on:{dblclick:t.renamePane}}),n("div",{staticClass:"column -center"})]},proxy:!0}])},[n("chart-settings",{attrs:{paneId:t.paneId}}),n("footer",[n("presets",{staticClass:"-left -top",attrs:{type:"chart",adapter:t.getPreset},on:{apply:function(e){return t.resetPane(e)}}})],1)],1)},vm=[],ym=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"settings-chart"},[n("div",{staticClass:"form-group mb16"},[n("label",[t._v(" Refresh chart every "),n("strong",{domProps:{textContent:t._s(t.refreshRateHms)}})]),n("slider",{staticClass:"mt8",attrs:{min:0,max:1e4,step:100,editable:!1,"show-completion":!0,value:t.refreshRate},on:{input:function(e){return t.$store.commit(t.paneId+"/SET_REFRESH_RATE",e)},reset:function(e){return t.$store.commit(t.paneId+"/SET_REFRESH_RATE",500)}}})],1),t.refreshRate<500?n("p",{staticClass:"form-feedback"},[n("i",{staticClass:"icon-warning"}),t._v(" Low refresh rate can be "),n("u",[t._v("very")]),t._v(" CPU intensive")]):t._e(),n("div",{staticClass:"form-group mb8"},[n("label",{staticClass:"checkbox-control"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.showLegend},on:{change:function(e){return t.$store.commit(t.paneId+"/TOGGLE_LEGEND")}}}),n("div"),n("span",[t._v("Show legend")])])]),n("div",{staticClass:"form-group mb8"},[n("div",{staticClass:"form-group column"},[n("label",{staticClass:"checkbox-control",on:{change:function(e){return t.$store.commit(t.paneId+"/SET_GRIDLINES",{type:"vertical",value:e.target.checked})}}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox",id:t.paneId+"showVerticalGridlines"},domProps:{checked:t.showVerticalGridlines}}),n("div",{staticClass:"mr8"})]),n("label",{staticClass:"-fill -center",attrs:{for:t.paneId+"showVerticalGridlines"}},[t._v("Show vertical grid lines")]),t.showVerticalGridlines?n("verte",{staticClass:"mr8",attrs:{picker:"square",menuPosition:"left",model:"rgb",value:t.verticalGridlinesColor},on:{input:function(e){e!==t.verticalGridlinesColor&&t.$store.commit(t.paneId+"/SET_GRIDLINES",{type:"vertical",value:e})}}}):t._e()],1)]),n("div",{staticClass:"form-group mb8"},[n("div",{staticClass:"form-group column"},[n("label",{staticClass:"checkbox-control",on:{change:function(e){return t.$store.commit(t.paneId+"/SET_GRIDLINES",{type:"horizontal",value:e.target.checked})}}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox",id:t.paneId+"showHorizontalGridlines"},domProps:{checked:t.showHorizontalGridlines}}),n("div",{staticClass:"mr8"})]),n("label",{staticClass:"-fill -center",attrs:{for:t.paneId+"showHorizontalGridlines"}},[t._v("Show horizontal grid lines")]),t.showHorizontalGridlines?n("verte",{staticClass:"mr8",attrs:{picker:"square",menuPosition:"left",model:"rgb",value:t.horizontalGridlinesColor},on:{input:function(e){e!==t.horizontalGridlinesColor&&t.$store.commit(t.paneId+"/SET_GRIDLINES",{type:"horizontal",value:e})}}}):t._e()],1)]),n("div",{staticClass:"form-group mb8"},[n("div",{staticClass:"form-group column"},[n("label",{staticClass:"checkbox-control",on:{change:function(e){return t.$store.commit(t.paneId+"/SET_WATERMARK",{value:e.target.checked})}}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.showWatermark}}),n("div",{staticClass:"mr8"})]),n("label",{staticClass:"-fill -center",attrs:{for:""}},[t._v("Watermark")]),t.showWatermark?n("verte",{staticClass:"mr8",attrs:{picker:"square",menuPosition:"left",model:"rgb",value:t.watermarkColor},on:{input:function(e){e!==t.watermarkColor&&t.$store.commit(t.paneId+"/SET_WATERMARK",{value:e})}}}):t._e()],1)]),n("hr"),n("div",{staticClass:"form-group mb8"},[n("div",{staticClass:"form-group column"},[n("label",{staticClass:"checkbox-control",on:{change:function(e){return t.$store.commit(t.paneId+"/TOGGLE_FILL_GAPS_WITH_EMPTY")}}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.fillGapsWithEmpty}}),n("div",{staticClass:"mr8"})]),n("label",{staticClass:"-fill -center",attrs:{for:""}},[t._v("Fill gaps with empty bars")])])]),n("div",{staticClass:"form-group mb8"},[n("div",{staticClass:"form-group column"},[n("label",{staticClass:"checkbox-control",on:{change:function(e){return t.$store.commit(t.paneId+"/TOGGLE_FORCE_NORMALIZE_PRICE")}}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.forceNormalizePrice}}),n("div",{staticClass:"mr8"})]),n("label",{staticClass:"-fill -center",attrs:{for:""}},[t._v("Always normalize mean "),n("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:"When enabled, the chart will always copy intial realtime price of a market to the start of the chart to garantee global average consistency (warning: leads to incorrect past price)."}})])])]),n("hr"),n("toggable-group",{attrs:{value:t.alerts,label:"Alerts"},on:{change:function(e){return t.toggleAlerts(e)}},scopedSlots:t._u([{key:"off",fn:function(){return["denied"===t.notificationsPermissionState?n("label",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"text-danger help-text mt0 mb0",attrs:{title:t.helps["notifications-disabled"]+" "+t.helps["notifications-grant"]}},[n("i",{staticClass:"icon-warning mr4"}),t._v(" Notifications are blocked. ")]):"granted"!==t.notificationsPermissionState?n("p",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"text-info help-text mt0 mb0",attrs:{title:t.helps["notifications-disabled"]+" "+t.helps["notifications-grant"]}},[n("i",{staticClass:"icon-info mr4"}),t._v(" Awaiting browser persmission. ")]):t._e()]},proxy:!0}])},[n("div",{staticClass:"column"},[n("div",{staticClass:"form-group"},[n("label",[t._v("Line style")]),n("dropdown",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"-left -center w-100",attrs:{selected:t.alertsLineStyle,options:{0:"Solid",1:"Dotted",2:"Dashed",3:"LargeDashed",4:"SparseDotted"},selectionClass:"-outline form-control -arrow flex-grow-1",placeholder:"lineStyle",title:"Line style (ex: dashed)"},on:{output:function(e){return t.$store.commit("settings/SET_ALERTS_LINESTYLE",e)}}})],1),n("div",{staticClass:"form-group"},[n("label",[t._v("Line width")]),n("editable",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"form-control -center w-100",attrs:{content:t.alertsLineWidth,title:"Line width (ex: 2)"},on:{output:function(e){return t.$store.commit("settings/SET_ALERTS_LINEWIDTH",e)}}})],1),n("div",{staticClass:"form-group"},[n("label",[t._v("Color")]),n("verte",{attrs:{picker:"square",menuPosition:"left",model:"rgb",value:t.alertsColor},on:{input:function(e){return t.$store.commit("settings/SET_ALERTS_COLOR",e)}}})],1)]),n("div",{staticClass:"form-group mb16 mt16"},[n("label",[n("i",{staticClass:"icon-click mr8"}),t._v(" Control")]),n("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"left",distance:24,boundary:"window"},expression:"{ placement: 'left', distance: 24, boundary: 'window' }"}],staticClass:"checkbox-control -click -small",attrs:{title:"1 click only (instead of shift + click)"},on:{change:function(e){return t.$store.commit("settings/TOGGLE_ALERTS_CLICK")}}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.alertsClick}}),n("div",{staticClass:"mr8"}),t.alertsClick?n("span",{staticClass:"mr4"},[n("code",[t._v("CLICK")])]):n("span",{staticClass:"mr4"},[n("code",[t._v("SHIFT")]),t._v(" + "),n("code",[t._v("CLICK")])]),t._v(" on the chart to "),n("span",{directives:[{name:"tippy",rawName:"v-tippy",value:{theme:"left"},expression:"{ theme: 'left' }"}],staticClass:"ml4 mr4",attrs:{title:"- sent within 0-15s<br />- active 24h for alts<br />- active 7d for btc/eth<br>- use at own risk"}},[t._v(" create an alert ")]),t._v(" at that price. ")])]),n("div",{staticClass:"form-group mb16"},[n("label",{attrs:{for:"audio-assistant-source"}},[n("i",{staticClass:"icon-music-note mr8"}),t._v(" Alert sound")]),n("button",{staticClass:"btn -file -blue -large -cases",on:{change:t.handleAlertSoundFile}},[n("i",{staticClass:"icon-upload mr8"}),t._v(" "+t._s(t.alertSound||"Browse")+" "),t.alertSound?n("i",{staticClass:"icon-cross mr8 btn__suffix",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.removeAlertSound.apply(null,arguments)}}}):t._e(),n("input",{attrs:{type:"file",accept:"audio/*"}})])])])],1)},bm=[],gm=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-group toggable-group"},[n("label",{staticClass:"checkbox-control"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.value},on:{change:function(e){return t.$emit("change",e)}}}),n("div",{staticClass:"mr8"}),n("span",[t._v(t._s(t.label))])]),n("transition-height",{attrs:{name:"toggable-group",single:""}},[t.value?n("div",{staticClass:"toggable-group__collapse"},[n("div",{staticClass:"pt8"},[t._t("default")],2)]):t._e()]),t.$slots.off?n("transition-height",{attrs:{name:"toggable-group",single:""}},[t.value?t._e():n("div",{staticClass:"toggable-group__collapse"},[n("div",{staticClass:"pt8"},[t._t("off")],2)])]):t._e()],1)},Sm=[];function _m(t){return _m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_m(t)}function Cm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wm(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tm(t,e)}function Tm(t,e){return Tm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Tm(t,e)}function km(t){var e=Om();return function(){var n,r=Am(t);if(e){var i=Am(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Em(this,n)}}function Em(t,e){if(e&&("object"===_m(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Im(t)}function Im(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Om(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Am(t){return Am=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Am(t)}var Pm=function(t){wm(n,t);var e=km(n);function n(){return Cm(this,n),e.apply(this,arguments)}return n}(s["c"]);Pm=Object(a["a"])([Object(s["a"])({name:"ToggableGroup",components:{TransitionHeight:si},props:{label:{type:String,required:!0},value:{required:!0}}})],Pm);var xm,Rm=Pm,Dm=Rm,Um=(n("b096"),Object(R["a"])(Dm,gm,Sm,!1,null,"8f500e94",null)),Nm=Um.exports;function Bm(t){return Bm="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bm(t)}function Lm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mm(t,e,n){return e&&jm(t.prototype,e),n&&jm(t,n),t}function $m(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fm(t,e)}function Fm(t,e){return Fm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Fm(t,e)}function Hm(t){var e=Vm();return function(){var n,r=qm(t);if(e){var i=qm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Gm(this,n)}}function Gm(t,e){if(e&&("object"===Bm(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Xm(t)}function Xm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vm(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function qm(t){return qm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},qm(t)}var Km=function(t){$m(n,t);var e=Hm(n);function n(){var t;return Lm(this,n),t=e.apply(this,arguments),t.helps={"notifications-disabled":"Push notification are disabled.","notifications-grant":"Enable notifications for this site in your browser."},t.notificationsPermissionState="granted",t}return Mm(n,[{key:"showLegend",get:function(){return this.$store.state[this.paneId].showLegend}},{key:"fillGapsWithEmpty",get:function(){return this.$store.state[this.paneId].fillGapsWithEmpty}},{key:"forceNormalizePrice",get:function(){return this.$store.state[this.paneId].forceNormalizePrice}},{key:"refreshRate",get:function(){return this.$store.state[this.paneId].refreshRate}},{key:"showVerticalGridlines",get:function(){return this.$store.state[this.paneId].showVerticalGridlines}},{key:"verticalGridlinesColor",get:function(){return this.$store.state[this.paneId].verticalGridlinesColor}},{key:"showHorizontalGridlines",get:function(){return this.$store.state[this.paneId].showHorizontalGridlines}},{key:"horizontalGridlinesColor",get:function(){return this.$store.state[this.paneId].horizontalGridlinesColor}},{key:"showWatermark",get:function(){return this.$store.state[this.paneId].showWatermark}},{key:"watermarkColor",get:function(){return this.$store.state[this.paneId].watermarkColor}},{key:"alertSound",get:function(){return this.$store.state.settings.alertSound}},{key:"alerts",get:function(){return this.$store.state.settings.alerts}},{key:"alertsColor",get:function(){return this.$store.state.settings.alertsColor}},{key:"alertsLineStyle",get:function(){return this.$store.state.settings.alertsLineStyle}},{key:"alertsLineWidth",get:function(){return this.$store.state.settings.alertsLineWidth}},{key:"alertsClick",get:function(){return this.$store.state.settings.alertsClick}},{key:"refreshRateHms",get:function(){return Dt(this.refreshRate)}},{key:"created",value:function(){this.checkNotificationsPermission()}},{key:"checkNotificationsPermission",value:function(){var t=this;navigator.permissions.query({name:"notifications"}).then((function(e){xm||(e.onchange=function(e){t.setNotificationsPermission(e.target.state)},xm=e),t.setNotificationsPermission(e.state)})).catch((function(t){}))}},{key:"setNotificationsPermission",value:function(t){this.notificationsPermissionState=t,"granted"!==this.notificationsPermissionState&&this.alerts&&this.$store.commit("settings/TOGGLE_ALERTS",!1)}},{key:"toggleAlerts",value:async function(t){var e=t.target.checked;e&&(this.notificationsPermissionState=await Notification.requestPermission()),"denied"===this.notificationsPermissionState&&e?(e=!1,this.$store.dispatch("app/showNotice",{id:"alert-notifications",type:"error",icon:"icon-warning -large pt0",timeout:1e5,html:!0,title:'<div class="ml8"><strong>This might not work as expected.</strong><br>'.concat(this.helps["notifications-grant"],"</div>")})):this.$store.dispatch("app/showNotice",{id:"alert-notifications",type:"info",title:e?"Alerts are enabled":"Alerts are disabled"}),t.target.checked=e,this.$store.commit("settings/TOGGLE_ALERTS",e)}},{key:"handleAlertSoundFile",value:async function(t){var e=t.target.files[0];if(e)try{await Yu.importSound(e),this.$store.commit("settings/SET_ALERT_SOUND",e.name),mo.playOnce(e.name)}catch(n){return void this.$store.dispatch("app/showNotice",{title:n.message,type:"error"})}}},{key:"removeAlertSound",value:function(){this.alertSound&&this.$store.commit("settings/SET_ALERT_SOUND",null)}}]),n}(s["c"]);Km=Object(a["a"])([Object(s["a"])({components:{Slider:U,ToggableGroup:Nm},name:"ChartSettings",props:{paneId:{type:String,required:!0}}})],Km);var zm=Km,Wm=zm,Ym=Object(R["a"])(Wm,ym,bm,!1,null,null,null),Jm=Ym.exports,Qm={components:{ChartSettings:Jm},mixins:[Et,Ip],methods:{}},Zm=Qm,tv=Object(R["a"])(Zm,mm,vm,!1,null,null,null),ev=tv.exports,nv=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{staticClass:"pane-dialog",on:{clickOutside:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{staticClass:"title -editable",domProps:{textContent:t._s(t.name)},on:{dblclick:t.renamePane}}),n("div",{staticClass:"column -center"})]},proxy:!0}])},[n("stats-settings",{attrs:{paneId:t.paneId}})],1)},rv=[],iv=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"settings-stats settings-section"},[n("div",{staticClass:"column mb16"},[n("div",{staticClass:"form-group -fill"},[n("label",[t._v("Window "),n("i",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:"Interval in which data is summed (ex: 1m)"}})]),n("input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Window (minutes)"},domProps:{value:t.statsWindowStringified},on:{change:function(e){return t.$store.commit(t.paneId+"/SET_WINDOW",e.target.value)}}})]),n("div",{staticClass:"form-group -tight"},[n("label",{attrs:{for:""}},[t._v("Graph")]),n("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"checkbox-control checkbox-control-input flex-right",attrs:{title:"Enable graph"}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.enableChart},on:{change:function(e){return t.$store.commit(t.paneId+"/TOGGLE_CHART",e.target.checked)}}}),n("div")])])]),n("div",{staticClass:"column"},[n("i",{staticClass:"icon-bucket -center mr4"}),n("span",{staticClass:"-fill"},[t._v("BUCKETS ("+t._s(t.buckets.length)+")")]),n("a",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"-nowrap -text",attrs:{href:"javascript:void(0);",title:"Add a stat"},on:{click:function(e){return t.$store.dispatch(t.paneId+"/createBucket")}}},[t._v(" Add "),n("i",{staticClass:"icon-plus ml4 -lower"})])]),t._l(t.buckets,(function(e){return n("div",{key:e.id,staticClass:"column mt8"},[n("div",{staticClass:"form-group -tight"},[n("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"bottom"},expression:"{ placement: 'bottom' }"}],staticClass:"checkbox-control checkbox-control-input flex-right",attrs:{title:"Enable bucket"}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:e.enabled},on:{change:function(n){return t.$store.dispatch(t.paneId+"/updateBucket",{id:e.id,prop:"enabled",value:n.target.checked})}}}),n("div")])]),n("div",{staticClass:"form-group -fill -center"},[t._v(" "+t._s(e.name)+" ")]),n("div",{staticClass:"form-group -tight"},[n("button",{staticClass:"btn -green",on:{click:function(n){return t.openStat(e.id)}}},[n("i",{staticClass:"icon-edit"})])])])}))],2)},ov=[];function av(t){return av="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},av(t)}function sv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lv(t,e,n){return e&&cv(t.prototype,e),n&&cv(t,n),t}function uv(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dv(t,e)}function dv(t,e){return dv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},dv(t,e)}function hv(t){var e=mv();return function(){var n,r=vv(t);if(e){var i=vv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pv(this,n)}}function pv(t,e){if(e&&("object"===av(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return fv(t)}function fv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mv(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function vv(t){return vv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},vv(t)}var yv=function(t){uv(n,t);var e=hv(n);function n(){return sv(this,n),e.apply(this,arguments)}return lv(n,[{key:"enableChart",get:function(){return this.$store.state[this.paneId].enableChart}},{key:"buckets",get:function(){var t=this;return Object.keys(this.$store.state[this.paneId].buckets).map((function(e){return t.$store.state[t.paneId].buckets[e]}))}},{key:"window",get:function(){return this.$store.state[this.paneId].window}},{key:"statsWindowStringified",get:function(){return Dt(this.window||0)}},{key:"openStat",value:function(t){Un.open(Jn,{bucketId:t,paneId:this.paneId})}}]),n}(s["c"]);yv=Object(a["a"])([Object(s["a"])({name:"StatsSettings",props:{paneId:{type:String,required:!0}}})],yv);var bv=yv,gv=bv,Sv=Object(R["a"])(gv,iv,ov,!1,null,null,null),_v=Sv.exports,Cv={components:{StatsSettings:_v},mixins:[Et,Ip],data:function(){return{renaming:!1}},methods:{}},wv=Cv,Tv=Object(R["a"])(wv,nv,rv,!1,null,null,null),kv=Tv.exports,Ev=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{staticClass:"pane-dialog",on:{clickOutside:t.close,mousedown:function(e){t.clickOutsideClose=!1},mouseup:function(e){t.clickOutsideClose=!0}},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{staticClass:"title -editable",domProps:{textContent:t._s(t.name)},on:{dblclick:t.renamePane}}),n("div",{staticClass:"column -center"})]},proxy:!0}])},[n("prices-settings",{attrs:{paneId:t.paneId}})],1)},Iv=[],Ov=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"form-group mb8"},[n("label",{directives:[{name:"tippy",rawName:"v-tippy",value:{placement:"left"},expression:"{ placement: 'left' }"}],staticClass:"checkbox-control",attrs:{title:"ex: BTC-USD"}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.showPairs},on:{change:function(e){return t.$store.commit(t.paneId+"/TOGGLE_PAIRS")}}}),n("div"),n("span",[t._v("Symbols")])])]),n("div",{staticClass:"form-group mb8"},[n("label",{staticClass:"checkbox-control"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.showVolume},on:{change:function(e){return t.$store.commit(t.paneId+"/TOGGLE_VOLUME")}}}),n("div"),n("span",[t._v("Volume")])])]),n("div",{staticClass:"form-group mb8"},[n("label",{staticClass:"checkbox-control"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.showVolumeDelta},on:{change:function(e){return t.$store.commit(t.paneId+"/TOGGLE_VOLUME_DELTA")}}}),n("div"),n("span",[t._v("Volume Δ")])])]),n("div",{staticClass:"form-group mb8"},[n("label",{staticClass:"checkbox-control"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.showPrice},on:{change:function(e){return t.$store.commit(t.paneId+"/TOGGLE_PRICE")}}}),n("div"),n("span",[t._v("Price")])])]),n("div",{staticClass:"form-group mb8"},[n("label",{staticClass:"checkbox-control"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.showChange},on:{change:function(e){return t.$store.commit(t.paneId+"/TOGGLE_CHANGE")}}}),n("div"),n("span",[t._v("Change %")])])]),n("div",{staticClass:"form-group mb8"},[n("label",{staticClass:"checkbox-control"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.animateSort},on:{change:function(e){return t.$store.commit(t.paneId+"/TOGGLE_SORT_ANIMATION")}}}),n("div"),n("span",[t._v("Animation")])])]),n("div",{staticClass:"form-group mb8"},[n("label",[t._v("Period "),n("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"icon-info",attrs:{title:"Reset stats after certain time"}})]),n("dropdown",{staticClass:"-left -center w-100",attrs:{selected:t.period,options:{0:"No period",1:"1m",15:"15m",30:"30m",60:"1h",240:"4h"},selectionClass:"-outline form-control -arrow w-100",placeholder:"Period"},on:{output:function(e){return t.$store.commit(t.paneId+"/SET_PERIOD",e)}}})],1),n("div",{staticClass:"form-group mb8"},[n("label",[t._v("Sort by")]),n("div",{staticClass:"column"},[n("prices-sort-dropdown",{attrs:{"pane-id":t.paneId,"selection-class":"-outline form-control -arrow w-100"}}),t.sortType?n("label",{staticClass:"checkbox-control -sort",attrs:{title:1===t.sortOrder?"ASC":"DESC"}},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:1===t.sortOrder},on:{change:function(e){return t.$store.commit(t.paneId+"/TOGGLE_SORT_ORDER")}}}),n("div",{directives:[{name:"tippy",rawName:"v-tippy"}],attrs:{title:"Switch order"}})]):t._e()],1)])])},Av=[],Pv=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dropdown",{attrs:{selected:t.sortType,options:["none","price","volume","delta","change"],"selection-class":t.selectionClass,"return-value":""},on:{output:function(e){return t.selectSortType(e)}}})},xv=[];function Rv(t){return Rv="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rv(t)}function Dv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nv(t,e,n){return e&&Uv(t.prototype,e),n&&Uv(t,n),t}function Bv(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lv(t,e)}function Lv(t,e){return Lv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Lv(t,e)}function jv(t){var e=Fv();return function(){var n,r=Hv(t);if(e){var i=Hv(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Mv(this,n)}}function Mv(t,e){if(e&&("object"===Rv(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $v(t)}function $v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fv(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Hv(t){return Hv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Hv(t)}var Gv=function(t){Bv(n,t);var e=jv(n);function n(){return Dv(this,n),e.apply(this,arguments)}return Nv(n,[{key:"sortType",get:function(){return this.$store.state[this.paneId].sortType}},{key:"sortOrder",get:function(){return this.$store.state[this.paneId].sortOrder}},{key:"selectSortType",value:function(t){t===this.sortType&&this.$store.commit(this.paneId+"/TOGGLE_SORT_ASC"),this.$store.commit(this.paneId+"/SET_SORT_TYPE",t)}}]),n}(s["c"]);Gv=Object(a["a"])([Object(s["a"])({name:"PricesSortDropdown",props:{paneId:{type:String,required:!0},selectionClass:{type:String,default:"-text -arrow"}}})],Gv);var Xv=Gv,Vv=Xv,qv=Object(R["a"])(Vv,Pv,xv,!1,null,null,null),Kv=qv.exports;function zv(t){return zv="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zv(t)}function Wv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Yv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jv(t,e,n){return e&&Yv(t.prototype,e),n&&Yv(t,n),t}function Qv(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zv(t,e)}function Zv(t,e){return Zv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Zv(t,e)}function ty(t){var e=ry();return function(){var n,r=iy(t);if(e){var i=iy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ey(this,n)}}function ey(t,e){if(e&&("object"===zv(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ny(t)}function ny(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ry(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function iy(t){return iy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},iy(t)}var oy=function(t){Qv(n,t);var e=ty(n);function n(){return Wv(this,n),e.apply(this,arguments)}return Jv(n,[{key:"showPairs",get:function(){return this.$store.state[this.paneId].showPairs}},{key:"showVolume",get:function(){return this.$store.state[this.paneId].showVolume}},{key:"showPrice",get:function(){return this.$store.state[this.paneId].showPrice}},{key:"showVolumeDelta",get:function(){return this.$store.state[this.paneId].showVolumeDelta}},{key:"period",get:function(){return this.$store.state[this.paneId].period}},{key:"showChange",get:function(){return this.$store.state[this.paneId].showChange}},{key:"animateSort",get:function(){return this.$store.state[this.paneId].animateSort}},{key:"sortType",get:function(){return this.$store.state[this.paneId].sortType}},{key:"sortOrder",get:function(){return this.$store.state[this.paneId].sortOrder}},{key:"selectSortType",value:function(t){t===this.sortType&&this.$store.commit(this.paneId+"/TOGGLE_SORT_ORDER"),this.$store.commit(this.paneId+"/SET_SORT_TYPE",t)}}]),n}(s["c"]);oy=Object(a["a"])([Object(s["a"])({components:{PricesSortDropdown:Kv},name:"PricesSettings",props:{paneId:{type:String,required:!0}}})],oy);var ay=oy,sy=ay,cy=Object(R["a"])(sy,Ov,Av,!1,null,null,null),ly=cy.exports,uy={components:{PricesSettings:ly},mixins:[Et,Ip],data:function(){return{renaming:!1}},methods:{}},dy=uy,hy=Object(R["a"])(dy,Ev,Iv,!1,null,null,null),py=hy.exports,fy=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{staticClass:"pane-dialog",on:{clickOutside:t.close,mousedown:function(e){t.clickOutsideClose=!1},mouseup:function(e){t.clickOutsideClose=!0}},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{staticClass:"title -editable",domProps:{textContent:t._s(t.name)},on:{dblclick:t.renamePane}}),n("div",{staticClass:"column -center"})]},proxy:!0}])},[n("website-settings",{attrs:{paneId:t.paneId}})],1)},my=[],vy=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"form-group mb8"},[n("label",[t._v(" Url "),t.originalUrl?n("span",[t._v("("),n("a",{attrs:{href:t.originalUrl,target:"_blank"},domProps:{textContent:t._s(t.originalUrlTrimmed)}}),t._v(")")]):t._e()]),n("input",{directives:[{name:"tippy",rawName:"v-tippy"}],ref:"input",staticClass:"form-control w-100",attrs:{type:"text",placeholder:"ex: https://cryptopanic.com/widgets/news/?bg_color=FFFFFF&font_family=sans&header_bg_color=30343B&header_text_color=FFFFFF&link_color=0091C2&news_feed=trending&text_color=333333&title=Latest%20News",title:"Original URL"},domProps:{value:t.url},on:{change:function(e){return t.$store.dispatch(t.paneId+"/setUrl",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",{staticClass:"checkbox-control"},[n("input",{staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:t.interactive},on:{change:function(e){return t.$store.commit(t.paneId+"/TOGGLE_INTERACTIVE")}}}),n("div"),n("span",[t._v("Interactive")])])])])},yy=[];function by(t){return by="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},by(t)}function gy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _y(t,e,n){return e&&Sy(t.prototype,e),n&&Sy(t,n),t}function Cy(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wy(t,e)}function wy(t,e){return wy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},wy(t,e)}function Ty(t){var e=Iy();return function(){var n,r=Oy(t);if(e){var i=Oy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ky(this,n)}}function ky(t,e){if(e&&("object"===by(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ey(t)}function Ey(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Iy(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Oy(t){return Oy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Oy(t)}var Ay=function(t){Cy(n,t);var e=Ty(n);function n(){return gy(this,n),e.apply(this,arguments)}return _y(n,[{key:"created",value:function(){this.originalUrl=this.$store.state[this.paneId].url}},{key:"originalUrlTrimmed",get:function(){return this.originalUrl.length<=33?this.originalUrl:this.originalUrl.slice(0,15)+"[...]"+this.originalUrl.substr(-15)}},{key:"url",get:function(){return this.$store.state[this.paneId].url}},{key:"interactive",get:function(){return this.$store.state[this.paneId].interactive}}]),n}(s["c"]);Ay=Object(a["a"])([Object(s["a"])({components:{Thresholds:df,Slider:U},name:"WebsiteSettings",props:{paneId:{type:String,required:!0}}})],Ay);var Py=Ay,xy=Py,Ry=Object(R["a"])(xy,vy,yy,!1,null,null,null),Dy=Ry.exports,Uy={components:{WebsiteSettings:Dy},mixins:[Et,Ip],data:function(){return{renaming:!1}},methods:{}},Ny=Uy,By=Object(R["a"])(Ny,fy,my,!1,null,null,null),Ly=By.exports;function jy(t){return jy="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jy(t)}function My(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=$y(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function $y(t,e){if(t){if("string"===typeof t)return Fy(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fy(t,e):void 0}}function Fy(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xy(t,e,n){return e&&Gy(t.prototype,e),n&&Gy(t,n),t}function Vy(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qy(t,e)}function qy(t,e){return qy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},qy(t,e)}function Ky(t){var e=Yy();return function(){var n,r=Jy(t);if(e){var i=Jy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zy(this,n)}}function zy(t,e){if(e&&("object"===jy(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Wy(t)}function Wy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yy(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Jy(t){return Jy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Jy(t)}var Qy=function(t){Vy(n,t);var e=Ky(n);function n(){var t;return Hy(this,n),t=e.apply(this,arguments),t.menu=[{label:"Zoom",id:"zoom"},{icon:"enlarge",label:"Maximize",click:t.maximizePane},{icon:"copy-paste",label:"Duplicate",click:t.duplicatePane},{icon:"trash",label:"Remove",click:t.removePane}],t}return Xy(n,[{key:"zoom",get:function(){return this.$store.state.panes.panes[this.paneId].zoom||1}},{key:"type",get:function(){return this.$store.state.panes.panes[this.paneId].type}},{key:"name",get:function(){var t=this.$store.state.panes.panes[this.paneId].name,e=this.$store.state.panes.marketsListeners[this.$store.state.panes.panes[this.paneId].markets[0]];return t||(e?e.local:this.type)}},{key:"created",value:function(){this.controls&&this.controls.length&&(this.menu=this.menu.slice(0,1).concat(this.controls,this.menu.slice(1)))}},{key:"openSettings",value:async function(){switch(this.type){case"counters":Un.open(fm,{paneId:this.paneId});break;case"stats":Un.open(kv,{paneId:this.paneId});break;case"chart":Un.open(ev,{paneId:this.paneId});break;case"trades":Un.open(Xf,{paneId:this.paneId});break;case"prices":Un.open(py,{paneId:this.paneId});break;case"website":Un.open(Ly,{paneId:this.paneId});break}}},{key:"openSearch",value:function(){this.$store.dispatch("app/showSearch",this.paneId)}},{key:"changeZoom",value:function(t,e){var n=this.zoom+(t.shiftKey?.0625:.125)*e;this.$store.dispatch("panes/setZoom",{id:this.paneId,zoom:n})}},{key:"removePane",value:async function(){await Un.confirm('Delete pane "'.concat(this.paneId,'" ?'))&&this.$store.dispatch("panes/removePane",this.paneId)}},{key:"duplicatePane",value:function(){this.$store.dispatch("panes/duplicatePane",this.paneId)}},{key:"highlightPane",value:function(t){this.$el.parentElement.parentElement.classList[t?"add":"remove"]("-highlight")}},{key:"maximizePane",value:function(t){if("dblclick"!==t.type||t.currentTarget===t.target||"toolbar__spacer"===t.target.className){var e,n=this.$el.parentElement.parentElement,r=n.classList.toggle("-maximized"),i=Jt(n),o=My(i);try{for(o.s();!(e=o.n()).done;){var a=e.value;a.getAttribute("type")&&(a.classList.remove("-maximized"),a.style.display=r?"none":"block")}}catch(c){o.e(c)}finally{o.f()}var s=Event;window.dispatchEvent(new s("resize"))}}},{key:"renamePane",value:async function(){var t=await Un.prompt({action:"Rename",input:this.name});t!==this.name&&this.$store.commit("panes/SET_PANE_NAME",{id:this.paneId,name:t})}}]),n}(r["default"]);Qy=Object(a["a"])([Object(kd["b"])({name:"PaneHeader",props:{paneId:{type:String},loading:{type:Boolean,default:!1},controls:{required:!1}}})],Qy);var Zy=Qy,tb=Zy,eb=Object(R["a"])(tb,op,ap,!1,null,null,null),nb=eb.exports,rb=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"indicator",class:{"-error":!!t.error,"-disabled":!t.visible}},[n("button",{staticClass:"indicator__name pane-overlay",attrs:{type:"button"},on:{click:t.edit}},[t._v(t._s(t.name))]),n("div",{staticClass:"indicator__controls"},[t.error?t._e():[n("button",{staticClass:"btn -accent",attrs:{title:t.visible?"Hide":"Show"},on:{click:t.toggleVisibility}},[n("i",{class:{"icon-visible":!t.visible,"icon-hidden":t.visible}})]),n("button",{staticClass:"btn -accent",attrs:{title:"Resize"},on:{click:t.resize}},[n("i",{staticClass:"icon-resize-height"})]),n("button",{staticClass:"btn -accent",attrs:{title:"Edit"},on:{click:t.edit}},[n("i",{staticClass:"icon-edit"})])],n("button",{staticClass:"btn -accent",attrs:{title:"Disable"},on:{click:t.remove}},[n("i",{staticClass:"icon-cross"})])],2),n("div",{staticClass:"indicator__legend pane-overlay",attrs:{id:t.paneId+t.indicator.id}}),t.error?n("div",[n("i",{staticClass:"icon-warning ml4 mr8"}),t._v(" "+t._s(t.error)+" ")]):t._e()])},ib=[],ob={props:["paneId","indicatorId"],computed:{indicator:function(){return this.$store.state[this.paneId].indicators[this.indicatorId]},showLegend:function(){return this.$store.state[this.paneId].showLegend},name:function(){return this.indicator.displayName?this.indicator.displayName:this.indicator.name?this.indicator.name:this.indicatorId},visible:function(){return!this.indicator.options||"undefined"===typeof this.indicator.options.visible||this.indicator.options.visible},error:function(){return this.$store.state[this.paneId].indicatorsErrors[this.indicatorId]}},methods:{edit:function(){Un.open(Vu,{paneId:this.paneId,indicatorId:this.indicatorId},"indicator")},toggleVisibility:function(){var t=this;this.$nextTick((function(){t.$store.dispatch(t.paneId+"/toggleSerieVisibility",t.indicatorId)}))},remove:function(){this.$store.dispatch(this.paneId+"/removeIndicator",{id:this.indicatorId})},resize:function(){this.$store.commit(this.paneId+"/TOGGLE_LAYOUTING",this.indicatorId)}}},ab=ob,sb=(n("f1f6"),Object(R["a"])(ab,rb,ib,!1,null,null,null)),cb=sb.exports,lb=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chart-layout",style:{right:t.axis[0]+"px",bottom:t.axis[1]+"px"},on:{dblclick:function(e){return t.$store.commit(t.paneId+"/TOGGLE_LAYOUTING")}}},[n("div",{staticClass:"chart-layout__controls"},[n("button",{staticClass:"btn -red -small",attrs:{title:"Close menu while reverting chart layout to it's original state"},on:{click:t.cancel}},[t._v(" Cancel "),n("i",{staticClass:"icon-eraser ml4"})]),n("button",{staticClass:"btn -green -small ml8",attrs:{title:"Click if you finished rearranging the chart layout"},on:{click:function(e){return t.$store.commit(t.paneId+"/TOGGLE_LAYOUTING")}}},[t._v(" Ok "),n("i",{staticClass:"icon-check ml4"})])]),t._l(t.activePriceScales,(function(e,r){return n("chart-price-scale",{key:r,staticClass:"chart-layout__item",attrs:{paneId:t.paneId,priceScaleId:r,priceScale:e},on:{update:function(e){return t.updatePriceScaleScaleMargins(r,e)}}})}))],2)},ub=[],db=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chart-pricescale",class:{"-active":!!t.currentSide},style:{top:t.roundedTop+"%",bottom:t.roundedBottom+"%"}},[n("div",{staticClass:"chart-pricescale__content"},[n("div",{staticClass:"chart-pricescale__title pane-overlay",on:{mousedown:t.handleMove,touchstart:t.handleMove}},[n("i",{staticClass:"icon-move mr8"}),t._v(" "+t._s(t.priceScale.indicators.join(", "))+" "),"right"===t.priceScaleId?n("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"ml4",attrs:{title:"Main scale"}},[t._v("👑")]):t._e(),n("dropdown",{staticClass:"chart-pricescale__mode",attrs:{options:t.modes,selected:t.priceScale.mode,placeholder:"linear",selectionClass:"-text -small ml8 text-bold -arrow"},on:{output:function(e){return t.updateMode(e)}}})],1),n("div",{staticClass:"chart-pricescale__size pane-overlay",domProps:{textContent:t._s(100-t.roundedTop-t.roundedBottom+"%")}})]),n("div",{staticClass:"chart-pricescale__boundary -top",class:{"-active":"top"===t.currentSide},on:{mousedown:function(e){return t.handleResize(e,"top")},touchstart:function(e){return t.handleResize(e,"top")}}}),n("div",{staticClass:"chart-pricescale__boundary -bottom",class:{"-active":"bottom"===t.currentSide},on:{mousedown:function(e){return t.handleResize(e,"bottom")},touchstart:function(e){return t.handleResize(e,"bottom")}}})])},hb=[];function pb(t){return pb="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pb(t)}function fb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vb(t,e,n){return e&&mb(t.prototype,e),n&&mb(t,n),t}function yb(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bb(t,e)}function bb(t,e){return bb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},bb(t,e)}function gb(t){var e=Cb();return function(){var n,r=wb(t);if(e){var i=wb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Sb(this,n)}}function Sb(t,e){if(e&&("object"===pb(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _b(t)}function _b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cb(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function wb(t){return wb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},wb(t)}var Tb=function(t){yb(n,t);var e=gb(n);function n(){var t;return fb(this,n),t=e.apply(this,arguments),t.top=null,t.bottom=null,t.roundedTop=null,t.roundedBottom=null,t.currentMoveId=null,t.currentSide=null,t.currentOrigin=null,t.currentContainerHeight=null,t.modes={0:"Linear",1:"Logarithimic",2:"Percent",3:"Indexed to 100"},t}return vb(n,[{key:"created",value:function(){this.getSize()}},{key:"beforeDestroy",value:function(){this.release()}},{key:"getSize",value:function(){this.roundedTop=this.top=100*this.priceScale.scaleMargins.top,this.roundedBottom=this.bottom=100*this.priceScale.scaleMargins.bottom}},{key:"handleResize",value:function(t,e){this.currentMoveId?this.release():(this.start(e,w(t).y),document.addEventListener("mousemove",this.resize),document.addEventListener("mouseup",this.release),document.addEventListener("touchmove",this.resize),document.addEventListener("touchend",this.release))}},{key:"resize",value:function(t){var e=this.getPercentMove(t);e&&(this[this.currentSide]+=e*("top"===this.currentSide?1:-1),this.updateScaleMargins(t))}},{key:"handleMove",value:function(t){this.currentMoveId?this.release():(this.start("both",w(t).y),document.addEventListener("mousemove",this.move),document.addEventListener("mouseup",this.release),document.addEventListener("touchmove",this.move),document.addEventListener("touchend",this.release))}},{key:"move",value:function(t){var e=this.getPercentMove(t);e&&(this.top+=e,this.bottom-=e,this.updateScaleMargins(t))}},{key:"release",value:function(){this.currentSide&&("both"!==this.currentSide?(document.removeEventListener("mousemove",this.resize),document.removeEventListener("touchmove",this.resize)):(document.removeEventListener("mousemove",this.move),document.removeEventListener("touchmove",this.move)),document.removeEventListener("mouseup",this.release),document.removeEventListener("touchend",this.release),this.currentMoveId=null,this.currentSide=null,this.top=this.roundedTop,this.bottom=this.roundedBottom)}},{key:"updateScaleMargins",value:function(t){var e=Math.round(this.top),n=Math.round(this.bottom);this.roundedTop=Math.max(0,Math.min(100-n,e)),this.roundedBottom=Math.max(0,Math.min(n,100-e));var r={top:this.roundedTop/100,bottom:this.roundedBottom/100};this.priceScale.scaleMargins.top===r.top&&this.priceScale.scaleMargins.bottom===r.bottom||this.$emit("update",{id:this.currentMoveId,side:this.currentSide,value:r,syncable:"touchmove"!==t.type&&!t.shiftKey})}},{key:"updateMode",value:function(t){this.priceScale.mode=+t,this.$store.commit(this.paneId+"/SET_PRICE_SCALE",{id:this.priceScaleId,priceScale:this.priceScale})}},{key:"getContainerHeight",value:function(){var t=parseFloat(this.$el.parentElement.clientHeight);return t}},{key:"getPercentMove",value:function(t){var e=w(t),n=(e.y-this.currentOrigin)/this.currentContainerHeight*100;return n?(this.currentOrigin=e.y,n):null}},{key:"start",value:function(t,e){this.currentMoveId=Nt(8),this.currentSide=t,this.currentOrigin=e,this.currentContainerHeight=this.getContainerHeight()}}]),n}(s["c"]);Tb=Object(a["a"])([Object(s["a"])({name:"ChartPriceScale",props:{paneId:{required:!0},priceScaleId:{required:!0},priceScale:{required:!0}},watch:{"priceScale.scaleMargins.top":function(){this.currentMoveId||this.getSize()},"priceScale.scaleMargins.bottom":function(){this.currentMoveId||this.getSize()}}})],Tb);var kb=Tb,Eb=kb,Ib=(n("cce1"),Object(R["a"])(Eb,db,hb,!1,null,null,null)),Ob=Ib.exports;function Ab(t){return Ab="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ab(t)}function Pb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rb(t,e,n){return e&&xb(t.prototype,e),n&&xb(t,n),t}function Db(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ub(t,e)}function Ub(t,e){return Ub=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ub(t,e)}function Nb(t){var e=jb();return function(){var n,r=Mb(t);if(e){var i=Mb(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Bb(this,n)}}function Bb(t,e){if(e&&("object"===Ab(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Lb(t)}function Lb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jb(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Mb(t){return Mb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Mb(t)}var $b=function(t){Db(n,t);var e=Nb(n);function n(){return Pb(this,n),e.apply(this,arguments)}return Rb(n,[{key:"created",value:function(){this.getActivePriceScales()}},{key:"mounted",value:function(){document.body.classList.add("-unselectable")}},{key:"beforeDestroy",value:function(){document.body.classList.remove("-unselectable")}},{key:"getActivePriceScales",value:function(){var t=this,e=this.$store.state[this.paneId].indicators;this.activePriceScales=Object.keys(e).reduce((function(n,r){if("string"===typeof t.layouting&&r!==t.layouting)return n;var i=e[r].options.priceScaleId;return n[i]||(n[i]=t.$store.state[t.paneId].priceScales[i],n[i].indicators=[]),n[i].indicators.push(e[r].name),n}),{}),this._originalActivePriceScales=JSON.parse(JSON.stringify(this.activePriceScales))}},{key:"updatePriceScaleScaleMargins",value:function(t,e){e.syncable&&this.unsyncableMoveId!==e.id&&(this.syncMoveWithOthers(t,e.side,e.value)||(this.unsyncableMoveId=e.id)),this.activePriceScales[t].scaleMargins=e.value,this.$store.commit(this.paneId+"/SET_PRICE_SCALE",{id:t,priceScale:this.activePriceScales[t]})}},{key:"syncMoveWithOthers",value:function(t,e,n){var r=this.activePriceScales[t].scaleMargins,i=!1;for(var o in this.activePriceScales)if(t!==o){var a=this.activePriceScales[o].scaleMargins;a.top===r.top&&a.bottom===r.bottom&&(s["c"].set(this.activePriceScales[o],"scaleMargins",n),this.$store.commit(this.paneId+"/SET_PRICE_SCALE",{id:o,priceScale:this.activePriceScales[o]}),i=!0)}return i}},{key:"cancel",value:function(){for(var t in this._originalActivePriceScales)this.$store.commit(this.paneId+"/SET_PRICE_SCALE",{id:t,priceScale:this._originalActivePriceScales[t]});this.$store.commit(this.paneId+"/TOGGLE_LAYOUTING")}}]),n}(s["c"]);$b=Object(a["a"])([Object(s["a"])({components:{ChartPriceScale:Ob},name:"ChartLayout",props:{paneId:{required:!0},axis:{required:!0},layouting:{required:!0}}})],$b);var Fb=$b,Hb=Fb,Gb=(n("2231"),Object(R["a"])(Hb,lb,ub,!1,null,null,null)),Xb=Gb.exports,Vb=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{staticClass:"-auto",on:{clickOutside:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",{staticClass:"title"},[t._v("Add indicator")]),n("div",{staticClass:"column -center"})]},proxy:!0}])},[n("div",{staticClass:"d-flex mobile-dir-col-desktop-dir-row"},[t.indicators.length?[n("div",{staticClass:"form-group"},[n("label",[t._v("Choose from existing indicator")]),n("div",{staticClass:"d-flex mb8"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"form-control",attrs:{type:"text",placeholder:"search"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),n("div",{staticClass:"-center text-muted ml16",domProps:{textContent:t._s(t.indicators.length)}})]),t.filteredIndicators.length?n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",[t._v("Name")]),n("th",{staticClass:"min-768"},[t._v("Description")]),n("th")])]),n("tbody",t._l(t.filteredIndicators,(function(e){return n("tr",{key:e.id,staticClass:"-action",on:{click:function(n){return t.selectIndicator(e)}}},[n("td",{staticClass:"table-input"},[t._v(t._s((e.displayName||e.name).replace(/\{[\w_]+\}/g,"")))]),n("td",{staticClass:"min-768 table-input"},[n("span",{staticClass:"text-muted"},[t._v(t._s(e.description))])]),n("td",{staticClass:"table-action -hover",on:{click:function(n){return n.stopPropagation(),t.removeIndicator(e)}}},[n("button",{staticClass:"btn -text -small"},[n("i",{staticClass:"icon-trash text-danger"})])])])})),0)]):t._e()]),n("hr",{staticClass:"-single -horizontal"}),n("hr",{staticClass:"-single -vertical"})]:t._e(),n("div",{staticClass:"-unshrinkable"},[n("div",{staticClass:"form-group mb16"},[n("label",[t._v("Import indicator")]),n("button",{staticClass:"btn -blue -large -cases w-100 -file"},[n("i",{staticClass:"icon-upload mr8"}),t._v(" Browse "),n("input",{attrs:{type:"file"},on:{change:t.handleFile}})]),n("div",{staticClass:"divider -horizontal",staticStyle:{display:"flex"}},[t._v("Or")]),n("label",[t._v("Create blank indicator")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{placeholder:"Name it"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),n("div",{staticClass:"form-group mb16"},[n("label",[t._v("Scale with")]),n("dropdown",{staticClass:"-left -center",attrs:{selected:t.priceScaleId,options:t.availableScales,placeholder:"Default scale",selectionClass:"-outline form-control -arrow"},on:{output:function(e){t.priceScaleId=e}}})],1),n("div",{staticClass:"text-right"},[n("button",{staticClass:"btn -large -green ml16",on:{click:function(e){return t.createIndicator()}}},[t._v("Create "),n("i",{staticClass:"icon-plus ml8"})])])])],2)])},qb=[],Kb={mixins:[Et],props:{paneId:{type:String,required:!0}},components:{Dialog:kt},data:function(){return{name:"",priceScaleId:"right",query:"",indicators:[]}},computed:{indicatorId:function(){return Bt(Lt(this.name),this.indicators.map((function(t){return t.id})))},queryFilter:function(){return new RegExp(this.query.replace(/\W/,".*"),"i")},filteredIndicators:function(){var t=this;return this.indicators.filter((function(e){return t.queryFilter.test(e.name)||t.queryFilter.test(e.displayName)}))},availableScales:function(){return this.indicators.map((function(t){return t.options&&t.options.priceScaleId})).reduce((function(t,e){return!e||t[e]||(t[e]=e),t}),{"":"Own scale",right:"Main scale (right)"})}},created:async function(){await this.getIndicators()},beforeDestroy:function(){this.editor&&this.editor.destroy()},methods:{getIndicators:async function(){this.indicators=(await pn.getIndicators()).sort((function(t,e){return(e.uses||0)-(t.uses||0)}))},handleFile:async function(t){try{var e=await Yu.getJSON(t.target.files[0]);if(!e.data)throw new Error("indicator is empty");if("indicator"!==e.type)throw new Error("not an indicator");this.createIndicator({name:e.name.split(":").slice(1).join(":"),script:e.data.script||"",options:e.data.options||{}})}catch(n){this.$store.dispatch("app/showNotice",{title:n.message,type:"error"})}},createIndicator:async function(t){if(t||(t={}),t.name?this.name=t.name:this.name||(this.name="Untitled"),t.id=this.indicatorId,t.name=this.name,!t.priceScaleId){var e=Lt(t.name);t.priceScaleId=this.priceScaleId||e}this.$store.dispatch(this.paneId+"/addIndicator",t),Un.open(Vu,{paneId:this.paneId,indicatorId:this.indicatorId},"indicator"),this.close(null)},selectIndicator:function(t){pn.incrementIndicatorUsage(t.id),this.$store.dispatch(this.paneId+"/addIndicator",t),this.close(null)},removeIndicator:async function(t){await Un.confirm('Delete indicator "'.concat(t.name,'" ?'))&&(pn.deleteIndicator(t.id),this.indicators.splice(this.indicators.indexOf(t),1))},ago:function(t){return Rt(t)}}},zb=Kb,Wb=Object(R["a"])(zb,Vb,qb,!1,null,null,null),Yb=Wb.exports;function Jb(t){return Jb="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jb(t)}function Qb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function eg(t,e,n){return e&&tg(t.prototype,e),n&&tg(t,n),t}function ng(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rg(t,e)}function rg(t,e){return rg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},rg(t,e)}function ig(t){var e=sg();return function(){var n,r=cg(t);if(e){var i=cg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return og(this,n)}}function og(t,e){if(e&&("object"===Jb(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ag(t)}function ag(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sg(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function cg(t){return cg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},cg(t)}var lg=function(t){ng(n,t);var e=ig(n);function n(){var t;return Zb(this,n),t=e.apply(this,arguments),t.axis=[null,null],t.timeframes=[{id:"custom"},{label:"1s",value:"1"},{label:"3s",value:"3"},{label:"5s",value:"5"},{label:"10s",value:"10"},{label:"15s",value:"15"},{label:"30s",value:"30"},{label:"1m",value:"60"},{label:"3m",value:"180"},{label:"5m",value:"300"},{label:"15m",value:"900"},{label:"21m",value:"1260"},{label:"30m",value:"1800"},{label:"1h",value:"3600"},{label:"2h",value:"7200"},{label:"4h",value:"14400"},{label:"6h",value:"21600"},{label:"8h",value:"28800"},{label:"12h",value:"43200"},{label:"1d",value:"86400"},{label:"21 ticks",value:"21t"},{label:"50 ticks",value:"50t"},{label:"89 ticks",value:"89t"},{label:"100 ticks",value:"100t"},{label:"200 ticks",value:"200t"},{label:"610 ticks",value:"610t"},{label:"1000 ticks",value:"1000t"},{label:"1597 ticks",value:"1597t"}],t.showMarketsOverlay=!1,t.showIndicatorsOverlay=!1,t.paneControls=[{icon:"resize-height",label:"Arrange",click:t.toggleLayout},{icon:"refresh",label:"Restart",click:t.resetChart},{icon:"add-photo",label:"Snapshot",click:t.takeScreenshot}],t}return eg(n,[{key:"indicators",get:function(){return this.$store.state[this.paneId].indicators}},{key:"layouting",get:function(){return this.updateChartAxis(),this.$store.state[this.paneId].layouting}},{key:"showLegend",get:function(){return this.$store.state[this.paneId].showLegend}},{key:"favoriteTimeframes",get:function(){return this.$store.state.settings.favoriteTimeframes}},{key:"timeframe",get:function(){return this.$store.state[this.paneId].timeframe}},{key:"timeframeForHuman",get:function(){return Wt(this.timeframe)}},{key:"markets",get:function(){return this.$store.state.panes.panes[this.paneId].markets}},{key:"hiddenMarkets",get:function(){return this.$store.state[this.paneId].hiddenMarkets}},{key:"visibleMarkets",get:function(){var t=this;return this.markets.filter((function(e){return!t.hiddenMarkets[e]})).length}},{key:"alerts",get:function(){return this.$store.state[this.paneId].alerts}},{key:"orderedTimeframes",get:function(){var t=["seconds","minutes","hours","ticks"],e=-1,n=60,r=60*n,i=24*r;return this.timeframes.sort((function(t,e){var n=t.value&&"t"===t.value[t.value.length-1],r=e.value&&"t"===e.value[e.value.length-1],i=n===r?0:n?1e5:-1e5;return i+=parseFloat(t.value)-parseFloat(e.value),i})).reduce((function(o,a){return a.id?(o.push(a),o):(s=+a.value<n?0:+a.value<r?1:+a.value<=i?2:3,s>e&&(o.push({title:t[s]}),e=s),o.push(a),o);var s}),[])}},{key:"created",value:function(){var t=this;this._chartController=new Ch(this.paneId),this._legendElements={},this._onStoreMutation=this.$store.subscribe((function(e){switch(e.type){case"settings/SET_CHART_COLOR":e.payload&&t._chartController.chartInstance.applyOptions($l(e.payload));break;case"settings/SET_CHART_THEME":t._chartController.chartInstance.applyOptions($l());break;case"settings/TOGGLE_NORMAMIZE_WATERMARKS":t._chartController.refreshMarkets();break;case"settings/SET_TIMEZONE_OFFSET":t._chartController.setTimezoneOffset(t.$store.state.settings.timezoneOffset),t._chartController.clearChart(),t._chartController.renderAll();break;case"panes/SET_PANE_MARKETS":e.payload.id===t.paneId&&(t.$store.state[t.paneId].hiddenMarkets={},t._chartController.refreshMarkets(),t.clear(),t.fetch());break;case"panes/SET_PANE_ZOOM":e.payload.id===t.paneId&&t._chartController.updateFontSize(),t.updateChartAxis();break;case t.paneId+"/SET_TIMEFRAME":t.setTimeframe(e.payload);break;case"settings/TOGGLE_ALERTS":case"app/EXCHANGE_UPDATED":case t.paneId+"/TOGGLE_MARKET":t._chartController.refreshMarkets(),t._chartController.renderAll();break;case t.paneId+"/SET_REFRESH_RATE":t._chartController.clearQueue(),t._chartController.setupQueue();break;case t.paneId+"/TOGGLE_LEGEND":t.showLegend?t.bindLegend():t.unbindLegend();break;case t.paneId+"/SET_GRIDLINES":t.updateGridlines(e.payload.type);break;case t.paneId+"/SET_WATERMARK":case t.paneId+"/TOGGLE_NORMAMIZE_WATERMARKS":t._chartController.updateWatermark();break;case t.paneId+"/SET_INDICATOR_OPTION":t._chartController.setIndicatorOption(e.payload.id,e.payload.key,e.payload.value,e.payload.silent);break;case t.paneId+"/SET_PRICE_SCALE":e.payload.priceScale&&t._chartController.refreshPriceScale(e.payload.id);break;case t.paneId+"/SET_INDICATOR_SCRIPT":t._chartController.rebuildIndicator(e.payload.id);break;case t.paneId+"/ADD_INDICATOR":t._chartController.addIndicator(e.payload.id)&&(t._chartController.redrawIndicator(e.payload.id),t.bindLegend(e.payload.id));break;case t.paneId+"/REMOVE_INDICATOR":t.unbindLegend(e.payload),t._chartController.removeIndicator(e.payload);break;case t.paneId+"/TOGGLE_FILL_GAPS_WITH_EMPTY":t._chartController.toggleFillGapsWithEmpty();break;case t.paneId+"/TOGGLE_FORCE_NORMALIZE_PRICE":t._chartController.propagateInitialPrices=t.$store.state[t.paneId].forceNormalizePrice,t.clear(),t.fetch();break;case"settings/TOGGLE_AUTO_HIDE_HEADERS":t.refreshChartDimensions();break}}))}},{key:"mounted",value:function(){this.showIndicatorsOverlay=this.$parent.$el.clientHeight>420,this.createChart()}},{key:"createChart",value:async function(){await this.$nextTick(),this._chartController.createChart(this.$refs.chartContainer),await this.$nextTick(),this.bindChartEvents(),this.setupRecycle(),this.fetch(),this._chartController.setupQueue()}},{key:"destroyChart",value:function(){this.unbindChartEvents(),this._chartController.destroy(),clearTimeout(this._recycleTimeout)}},{key:"beforeDestroy",value:function(){this.destroyChart()}},{key:"fetch",value:function(t){var e=this;t||(this._reachedEnd=!1);var n=this._chartController.chartCache.cacheRange&&this._chartController.chartCache.cacheRange.from,r=Vh.getHistoricalMarktets(this.$store.state.panes.panes[this.paneId].markets);if(r.length&&-1!==this.$store.state.app.apiSupportedTimeframes.indexOf(this.timeframe.toString())){var i=this._chartController.getVisibleRange(),o=+this.$store.state[this.paneId].timeframe;if(!isNaN(o)){var a,s;if(t)a=t;else s=n?this._chartController.chartCache.cacheRange.from:i&&i.from?i.from+this.$store.state.settings.timezoneOffset/1e3:Date.now()/1e3,a={from:s-20*o,to:s};a.from=Zt(Math.round(a.from),o),a.to=Zt(Math.round(a.to),o)+o,this._chartController.chartCache.cacheRange.from&&(a.to=Math.min(Zt(this._chartController.chartCache.cacheRange.from,o),a.to));var c=Math.floor((a.to-a.from)/o),l=112,u=Vt(c*r.length*l);return this.$store.dispatch("app/showNotice",{id:"fetching-"+this.paneId,timeout:15e3,title:"Fetching ".concat(c*r.length," bars (~").concat(u,")"),type:"info"}),this._loading=!0,Vh.fetch(1e3*a.from,1e3*a.to,o,r).then((function(t){return e.onHistorical(t)})).catch((function(t){e._reachedEnd=!0})).then((function(){e.$store.dispatch("app/hideNotice","fetching-"+e.paneId),setTimeout((function(){e._loading=!1,e.fetchMore(e._chartController.chartInstance.timeScale().getVisibleLogicalRange())}),200)}))}this._reachedEnd=!0}}},{key:"onCrosshair",value:function(t){var e;if(t&&t.time&&t.point.x>0&&t.point.x<this.$refs.chartContainer.clientWidth&&(e=t.point.x),this._lastCrosshairCoordinates!==e){this._lastCrosshairCoordinates=e;for(var n=0;n<this._chartController.loadedIndicators.length;n++){var r=this._chartController.loadedIndicators[n];if(r.apis.length){var i=this.paneId+r.id;if(this._legendElements[i])if(e){for(var o="",a=0;a<r.apis.length;a++){if(a>10)break;var s=r.apis[a],c=t.seriesPrices.get(s);if(o.length&&(o+=" | "),c){var l=r.options.priceFormat&&"volume"===r.options.priceFormat.type?Ae:Re;"number"===typeof c?o+=l(c,s.precision):c.close&&(o+="O: ".concat(l(c.open,s.precision)," H: ").concat(l(c.high,s.precision)," L: ").concat(l(c.low,s.precision)," C: ").concat(l(c.close,s.precision)))}else o+="na"}this._legendElements[i].textContent=o}else this._legendElements[i].textContent=""}}}}},{key:"onHistorical",value:function(t){var e={from:t.from,to:t.to,bars:t.data};this._chartController.chartCache.saveChunk(e),this.$store.state[this.paneId].forceNormalizePrice||(this._chartController.propagateInitialPrices=!1),this._chartController.renderAll(!0)}},{key:"onTrades",value:function(t){this._chartController.queueTrades(t)}},{key:"onAlert",value:function(t){var e=t.price,n=t.market;this._chartController.triggerAlert(n,e)}},{key:"refreshChartDimensions",value:function(){var t=this;this._chartController&&this._chartController.chartInstance&&this.$nextTick((function(){var e=0;t.$store.state.settings.autoHideHeaders||(e=2*(t.$store.state.panes.panes[t.paneId].zoom||1)*16),t._chartController.chartInstance.resize(t.$el.clientWidth,t.$el.clientHeight-e)}))}},{key:"onPan",value:function(t){var e=this;!t||this._chartController.panPrevented||this._loading||/t$/.test(this.timeframe)||(this._onPanTimeout&&(clearTimeout(this._onPanTimeout),this._onPanTimeout=null),this._onPanTimeout=setTimeout((function(){e._onPanTimeout=null,null!==e._chartController.chartCache.cacheRange.from&&(t=e._chartController.chartInstance.timeScale().getVisibleLogicalRange(),e.savePosition(t),e.fetchMore(t))}),500))}},{key:"bindChartEvents",value:function(){Ca.on("trades",this.onTrades),Ca.on("alert",this.onAlert),this.showLegend&&this.showIndicatorsOverlay&&this.bindLegend(),this._chartController.chartInstance.timeScale().subscribeVisibleLogicalRangeChange(this.onPan);var t=this._chartController.chartElement.querySelector("canvas:nth-child(2)");t.addEventListener(Oi()?"touchstart":"mousedown",this.onLevelDragStart)}},{key:"unbindChartEvents",value:function(){Ca.off("trades",this.onTrades),Ca.off("alert",this.onAlert),this.unbindLegend(),this._chartController.chartInstance.timeScale().unsubscribeVisibleLogicalRangeChange(this.onPan);var t=this._chartController.chartElement.querySelector("canvas:nth-child(2)");t.removeEventListener(Oi()?"touchstart":"mousedown",this.onLevelDragStart)}},{key:"onLevelDragStart",value:function(t){if(!this._levelDragEndHandler&&this.$store.state.settings.alerts&&!t.button&&!Un.hasDialogOpened){var e=this._chartController.getPricelineAtPoint(t);if(e.api){var n=this._chartController.chartElement.querySelector("canvas:nth-child(2)");e.priceline&&this._chartController.disableCrosshair(),this._levelDragMoveHandler=this.onLevelDragMove.bind(this,e,Date.now()),n.addEventListener(/touch/.test(t.type)?"touchmove":"mousemove",this._levelDragMoveHandler),this._levelDragEndHandler=this.onLevelDragEnd.bind(this,e,Date.now()),n.addEventListener(/touch/.test(t.type)?"touchend":"mouseup",this._levelDragEndHandler)}}}},{key:"onLevelDragMove",value:function(t,e,n){var r=t.api,i=t.priceline,o=t.originalOffset,a=t.offset,s=Ai(n),c=s.x,l=s.y,u=Math.abs(o.y-l)>5||Date.now()-e>100;if(a.x=c,a.y=l,i){if(n.stopPropagation(),!u)return;var d=+Re(r.coordinateToPrice(l),r.options().priceFormat.precision);i.applyOptions({price:d})}}},{key:"onLevelDragEnd",value:async function(t,e,n){var r=this,i=t.api,o=t.priceline,a=t.price,s=t.market,c=t.canCreate,l=t.originalOffset,u=t.offset,d=this._chartController.chartElement.querySelector("canvas:nth-child(2)"),h=Math.abs(l.y-u.y)>5||Date.now()-e>200;if(c=!o&&c&&!h,(o||c)&&this._chartController.chartInstance.clearCrosshairPosition(),d.removeEventListener(/touch/.test(n.type)?"touchend":"mouseup",this._levelDragEndHandler),this._levelDragEndHandler=null,this._levelDragMoveHandler&&(d.removeEventListener(/touch/.test(n.type)?"touchmove":"mousemove",this._levelDragMoveHandler),this._levelDragMoveHandler=null),!this._onPanTimeout)if(o){this._chartController.enableCrosshair();var p=this._chartController.alerts[s].find((function(t){return t.price===a})),f=o.options().price;if(a!==f&&h){var m=await en.moveAlert(s,a,f);p.triggered=!1,p.price=f,p.active=m,await pn.saveAlerts({market:s,alerts:this._chartController.alerts[s].filter((function(t){return t.market===p.market}))}),o.applyOptions({title:""})}else{i.removePriceLine(o);try{await en.unsubscribe(s,a)}catch(w){p&&p.active&&this.$store.dispatch("app/showNotice",{id:"alert-registration-failure",title:"".concat(w.message,"\nYou need to make sure your browser is set to allow push notifications."),type:"error"})}var v=this._chartController.alerts[s].indexOf(p);-1!==v&&this._chartController.alerts[s].splice(v,1),await pn.saveAlerts({market:s,alerts:this._chartController.alerts[s].filter((function(t){return t.price!==a}))})}}else if(c){var y,b=et(this.$store.state.settings.alertsColor),g=b[3]||1;b[3]=.5*g,n.ctrlKey||n.metaKey||(y=this._chartController.chartInstance.timeScale().coordinateToTime(u.x));var S,_=this._chartController.renderAlert({price:a,market:s,timestamp:y},i,nt(b)),C={price:a,market:s,timestamp:y,active:!1};this._chartController.alerts[s].push(C),await en.subscribe(s,a).then((function(t){if(-1!==r._chartController.alerts[s].indexOf(C)){C.active=t;var e=t?g:.75*g;b[3]=e,S=nt(b)}})).catch((function(t){r.$store.dispatch("app/showNotice",{id:"alert-registration-failure",title:"".concat(t.message,"\nYou need to make sure your browser is set to allow push notifications."),type:"error"}),S=r.$store.state.settings.alertsColor})).finally((function(){pn.saveAlerts({market:s,alerts:r._chartController.alerts[s]}),_.applyOptions({color:S})}))}}},{key:"getBarSpacing",value:function(t){if(!t)return Il.timeScale.barSpacing;var e=this.$refs.chartContainer.querySelector("canvas").width;return e/(t.to-t.from)/window.devicePixelRatio}},{key:"savePosition",value:function(t){this.$store.commit(this.paneId+"/SET_BAR_SPACING",this.getBarSpacing(t))}},{key:"setupRecycle",value:function(){this._recycleTimeout=setTimeout(this.trimChart.bind(this),18e4),this.setTimeToRecycle()}},{key:"trimChart",value:function(){if(Date.now()>this._timeToRecycle){var t,e=this._chartController.getVisibleRange();e&&(t=e.from-(e.to-e.from)),this._chartController.chartCache.trim(t)&&this.renderChart(),this.setTimeToRecycle()}var n=this.$store.state[this.paneId].refreshRate<1e3;n&&this.fixFastRefreshRate(),this._recycleTimeout=setTimeout(this.trimChart,6e4*(n?3:15))}},{key:"fixFastRefreshRate",value:function(){var t=this,e=this._chartController.chartInstance.options().layout.fontSize;this._chartController.preventPan(),this._chartController.chartInstance.applyOptions({layout:{fontSize:e+1}}),setTimeout((function(){t._chartController.chartInstance.applyOptions({layout:{fontSize:e}})}),50)}},{key:"renderChart",value:function(){this._chartController.renderAll()}},{key:"resetChart",value:function(){var t=this;this.destroyChart(),this.$nextTick((function(){t.createChart()}))}},{key:"addIndicator",value:function(){Un.open(Yb,{paneId:this.paneId})}},{key:"toggleMarketOverlay",value:function(t){this.markets.length||(this.$store.dispatch("app/showSearch",this.paneId),t.stopPropagation())}},{key:"fetchMore",value:async function(t){if(!(this._loading||this._reachedEnd||!t||t.from>0)&&this.visibleMarkets){var e=0;if(this._chartController.activeRenderer)for(var n in this._chartController.activeRenderer.indicators)this._chartController.activeRenderer.indicators[n].minLength&&(e=Math.max(e,this._chartController.activeRenderer.indicators[n].minLength));var r=Math.round(Math.min(Math.abs(t.from)+e,500));if(r){var i={from:this._chartController.chartCache.cacheRange.from-r*this.$store.state[this.paneId].timeframe,to:this._chartController.chartCache.cacheRange.from-1};await this.fetch(i)}}}},{key:"onResize",value:function(){this.refreshChartDimensions()}},{key:"clear",value:function(){this._chartController.clear(),this._reachedEnd=!1}},{key:"changeTimeframe",value:function(t){if(window.event.shiftKey)for(var e in this.$store.state.panes.panes){var n=this.$store.state.panes.panes[e].type;"chart"===n&&this.$store.state[e].timeframe!==t&&this.$store.commit(e+"/SET_TIMEFRAME",t)}else this.$store.commit(this.paneId+"/SET_TIMEFRAME",t)}},{key:"setTimeframe",value:function(t){var e=parseInt(t),n="t"===t[t.length-1]?"tick":"time";this.timeframes.find((function(e){return e.value===t}))||this.timeframes.push({label:Wt(t),value:t}),n===this._chartController.type&&"time"===n&&this._chartController.timeframe<e&&-1===this.$store.state.app.apiSupportedTimeframes.indexOf(t)&&Number.isInteger(e/this._chartController.timeframe)?(this._chartController.resample(t),this.fetchMore(this._chartController.chartInstance.timeScale().getVisibleLogicalRange())):(this._chartController.clear(),this.fetch()),this._reachedEnd=!1}},{key:"bindLegend",value:async function(t){if(this.showLegend)if(t){await this.$nextTick();var e=this.paneId+t;if(!this._legendElements[e]){var n=document.getElementById(e);n&&(this._legendElements[e]=n)}}else{for(var r in this.indicators)this.bindLegend(r);this._chartController.chartInstance.subscribeCrosshairMove(this.onCrosshair)}}},{key:"unbindLegend",value:function(t){if(t){var e=this.paneId+t;for(var n in this._legendElements)if(e===n)return void delete this._legendElements[n]}else{for(var r in this.indicators)this.unbindLegend(r);this._chartController.chartInstance.unsubscribeCrosshairMove(this.onCrosshair)}}},{key:"updateGridlines",value:function(t){var e,n,r=this.$store.state[this.paneId];"vertical"===t?(e=r.showVerticalGridlines,n=r.verticalGridlinesColor):(e=r.showHorizontalGridlines,n=r.horizontalGridlinesColor),this._chartController.chartInstance.applyOptions({grid:Qb({},"vertical"===t?"vertLines":"horzLines",{color:n,visible:e})})}},{key:"updateWatermark",value:function(){var t=this.$store.state[this.paneId];this._chartController.chartInstance.applyOptions({watermark:{color:t.watermarkColor,visible:t.showWatermark}})}},{key:"updateChartAxis",value:function(){this.$refs.chartContainer&&(this.axis=[this.$refs.chartContainer.querySelector("td:last-child canvas:nth-child(2)").clientWidth,this.$refs.chartContainer.querySelector("tr:last-child").clientHeight])}},{key:"takeScreenshot",value:function(){var t=this._chartController.chartInstance.takeScreenshot(),e=document.createElement("canvas"),n=e.getContext("2d"),r=this.$store.state.panes.panes[this.paneId].zoom||1,i=window.devicePixelRatio||1,o=16*r*i,a=12*r*i;e.width=t.width,n.font="".concat(a,"px Share Tech Mono"),n.textAlign="left",n.textBaseline="top";var s=[],c=(new Date).toUTCString();s.push(c+" | "+this.timeframeForHuman),s.push(this._chartController.watermark+(this.visibleMarkets>1&&this.$store.state.settings.normalizeWatermarks?" ("+this.visibleMarkets+" markets)":""));var l=Math.round(a);e.height=t.height;var u=this.$store.state.settings.backgroundColor,d=getComputedStyle(document.documentElement).getPropertyValue("--theme-color-100");n.fillStyle=u,n.fillRect(0,0,e.width,e.height),n.fillStyle="light"===this.$store.state.settings.theme?"rgba(255,255,255,.2)":"rgba(0,0,0,.2)",n.fillRect(0,0,e.width,e.height),n.drawImage(t,0,0),n.fillStyle=d,n.font="".concat(a,"px Share Tech Mono"),n.textAlign="left",n.textBaseline="top";for(var h=0,p=0;p<s.length;p++)n.fillText(s[p],o,o+h),h+=l*(p+1);var f=Q(et(u)),m=f<170?"#ffffff":"#000000";this.showIndicatorsOverlay&&(h+=2*o,Object.values(this.indicators).forEach((function(t){var e=t.options;if(!1!==e.visible){var r=e.color||e.upColor||m;try{r=et(r),"undefined"!==typeof r[3]&&(r[3]=1),r=nt(r)}catch(a){}var i=t.displayName||t.name;n.fillStyle=u,n.fillText(i,o+1,h+1),n.fillText(i,o-1,h-1),n.fillStyle=r,n.fillText(i,o,h),h+=1.2*l}})));var v=e.toDataURL("image/png"),y=v.indexOf("base64,")+7,b=v.substr(y);Ft(b,"image/png")}},{key:"toggleMarket",value:function(t,e){this.$store.dispatch(this.paneId+"/toggleMarkets",{id:e,inverse:t.shiftKey})}},{key:"toggleMarkets",value:function(t){this.$store.dispatch(this.paneId+"/toggleMarkets",{type:t})}},{key:"toggleIndicatorOverlay",value:function(){var t=this;this.showIndicatorsOverlay&&this.unbindLegend(),this.showIndicatorsOverlay=!this.showIndicatorsOverlay,this.showIndicatorsOverlay&&this.$nextTick((function(){t.bindLegend()}))}},{key:"toggleFavoriteTimeframe",value:function(t){this.$store.commit("settings/TOGGLE_FAVORITE_TIMEFRAME",t)}},{key:"toggleLayout",value:function(){this.$store.commit(this.paneId+"/TOGGLE_LAYOUTING")}},{key:"setTimeToRecycle",value:function(){var t=Date.now();if("time"===this._chartController.type){var e=this.$refs.chartContainer.querySelector("canvas").width,n=this.getBarSpacing(this._chartController.chartInstance.timeScale().getVisibleLogicalRange());this._timeToRecycle=t+Math.min(864e5,1e3*parseInt(this.timeframe)*(e/n)/2)}this._timeToRecycle=t+9e5}}]),n}(Object(s["b"])(ip));lg=Object(a["a"])([Object(s["a"])({name:"Chart",components:{IndicatorControl:cb,ChartLayout:Xb,PaneHeader:nb,TimeframeInput:Vi}})],lg);var ug=lg,dg=ug,hg=(n("1296"),Object(R["a"])(dg,Od,Ad,!1,null,"51e020a8",null)),pg=hg.exports,fg=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pane-trades"},[n("pane-header",{ref:"paneHeader",attrs:{paneId:t.paneId}},[n("tippy",{attrs:{to:t.paneId,interactive:!0,delay:[0,400],distance:16,placement:"bottom",theme:"transparent","append-to":"parent",trigger:"click"}},[n("div",{staticClass:"mt4 mb4 text-nowrap -no-grab"},[n("slider",{staticClass:"mt8",staticStyle:{width:"100px"},attrs:{min:0,max:2,step:.01,label:"","show-completion":!1,gradient:t.gradient,value:t.thresholdsMultipler},on:{input:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLDS_MULTIPLER",{value:e,market:t.market})},reset:function(e){return t.$store.commit(t.paneId+"/SET_THRESHOLDS_MULTIPLER",{value:1,market:t.market})}},scopedSlots:t._u([{key:"tooltip",fn:function(){return[t._v(" "+t._s(+(100*t.thresholdsMultipler).toFixed(2))+"% ")]},proxy:!0}])})],1)]),n("button",{attrs:{name:t.paneId}},[n("i",{staticClass:"icon-gauge"})])],1),n("div",{ref:"tradesContainer",staticClass:"trades-list",class:["hide-scrollbar",this.showLogos&&"-logos",!this.monochromeLogos&&"-logos-colors"]}),t.showPlaceholder?n("trades-placeholder",{attrs:{paneId:t.paneId}}):t._e()],1)},mg=[];function vg(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=yg(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function yg(t,e){if(t){if("string"===typeof t)return bg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bg(t,e):void 0}}function bg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _g(t,e,n){return e&&Sg(t.prototype,e),n&&Sg(t,n),t}var Cg=function(){function t(){gg(this,t),this.cache={},this.promisesOfGifs={},setTimeout(this.cleanExpiredGifs.bind(this),6e4+6e4*Math.random())}return _g(t,[{key:"cleanExpiredGifs",value:async function(){var t,e=await pn.getGifsKeywords(),n=Date.now(),r=vg(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(!this.cache[i]){var o=Lt(i),a=await pn.getGifs(o);(!a||n-a.timestamp>=6048e5)&&this.deleteGifs(i)}}}catch(s){r.e(s)}finally{r.f()}}},{key:"forgetGifs",value:function(t){this.cache[t]&&(ta.dispatch("app/showNotice",{title:"Forgeting "+this.cache[t].length+' gifs about "'+t+'"',type:"info"}),delete this.cache[t])}},{key:"deleteGifs",value:async function(t){var e=Lt(t);await pn.deleteGifs(e),ta.dispatch("app/showNotice",{title:'Removed gifs about "'+t+'"',type:"info"})}},{key:"getGifs",value:async function(t,e){var n=this;if(this.cache[t])return this.cache[t];if(this.promisesOfGifs[t])return this.promisesOfGifs[t];var r=Lt(t);return this.promisesOfGifs[t]=pn.getGifs(r).then((function(r){return delete n.promisesOfGifs[t],r&&Date.now()-r.timestamp<6048e5?(n.cache[t]=r.data,r.data):n.fetchGifByKeyword(t,e)})),this.promisesOfGifs[t]}},{key:"fetchGifByKeyword",value:async function(t,e){var n=this;if(t){var r=Lt(t);return fetch("https://api.giphy.com/v1/gifs/search?q="+t+"&rating=r&limit=100&api_key=b5Y5CZcpj9spa0xEfskQxGGnhChYt3hi").then((function(t){return t.json()})).then((async function(i){if(i.data&&i.data.length){n.cache[t]=[];var o,a=vg(i.data);try{for(a.s();!(o=a.n()).done;){var s=o.value;n.cache[t].push(s.images.downsized.url)}}catch(c){a.e(c)}finally{a.f()}return e&&ta.dispatch("app/showNotice",{title:"Fetched "+n.cache[t].length+" "+t+" gifs",type:"success"}),await pn.saveGifs({slug:r,keyword:t,timestamp:Date.now(),data:n.cache[t]}),n.cache[t]}})).finally((function(){delete n.promisesOfGifs[t]}))}}}]),t}(),wg=new Cg,Tg=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"trades-placeholder hide-scrollbar"},[n("p",{staticClass:"trades-placeholder__dimmed"},[t._v(t._s(t.filterRecap))]),t.exchangesReady?[t.showMore?n("pre",{domProps:{textContent:t._s(t.paneMarketStringified)}}):n("div",{staticClass:"pl16 pr16"},t._l(t.pairs,(function(e,r){return n("button",{key:r,staticClass:"btn -accent mx4 -small",attrs:{disabled:""}},[t._v(t._s(e))])})),0),n("button",{staticClass:"mt8 btn -text trades-placeholder__dimmed -small",on:{click:t.toggleShowMore}},[t._v(" "+t._s(t.showMore?"Show less":"Show more")+" ")])]:n("p",[t._v("...")])],2)},kg=[];function Eg(t){return Eg="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eg(t)}function Ig(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Og(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ag(t,e,n){return e&&Og(t.prototype,e),n&&Og(t,n),t}function Pg(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xg(t,e)}function xg(t,e){return xg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},xg(t,e)}function Rg(t){var e=Ng();return function(){var n,r=Bg(t);if(e){var i=Bg(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Dg(this,n)}}function Dg(t,e){if(e&&("object"===Eg(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ug(t)}function Ug(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ng(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Bg(t){return Bg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Bg(t)}var Lg=function(t){Pg(n,t);var e=Rg(n);function n(){var t;return Ig(this,n),t=e.apply(this,arguments),t.showMore=!1,t}return Ag(n,[{key:"exchangesReady",get:function(){return this.$store.state.app.isExchangesReady}},{key:"paneMarkets",get:function(){return this.$store.state.panes.panes[this.paneId].markets}},{key:"paneMarketStringified",get:function(){return this.paneMarkets.join("\n")}},{key:"pairs",get:function(){var t=this,e=this.$store.state.settings.searchTypes.mergeUsdt;return this.paneMarkets.reduce((function(n,r){var i=t.$store.state.panes.marketsListeners[r],o=i?i.local:r;return e&&(o=ke(o)),-1===n.indexOf(o)&&n.push(o),n}),[])}},{key:"tradesThresholds",get:function(){return this.$store.state[this.paneId].thresholds}},{key:"liquidationsThresholds",get:function(){return this.$store.state[this.paneId].liquidations}},{key:"tradeType",get:function(){return this.$store.state[this.paneId].tradeType}},{key:"filterRecap",get:function(){var t=this.tradesThresholds[0].amount,e=this.liquidationsThresholds[0].amount;return"both"===this.tradeType?"Waiting for trades or liquidations > ".concat(Ae(t)," / ").concat(Ae(e)):"trades"===this.tradeType?"Waiting for trades > ".concat(Ae(t)):"Waiting for liquidations > ".concat(Ae(e))}},{key:"toggleShowMore",value:function(){this.showMore=!this.showMore;var t=document.activeElement;t&&t.blur()}}]),n}(s["c"]);Lg=Object(a["a"])([Object(s["a"])({name:"TradesPlaceholder",props:{paneId:{type:String,required:!0}}})],Lg);var jg=Lg,Mg=jg,$g=(n("44fb"),Object(R["a"])(Mg,Tg,kg,!1,null,null,null)),Fg=$g.exports;function Hg(t,e){return Vg(t)||Xg(t,e)||Yg(t,e)||Gg()}function Gg(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Xg(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function Vg(t){if(Array.isArray(t))return t}function qg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Kg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qg(Object(n),!0).forEach((function(e){zg(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function zg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wg(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Yg(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Yg(t,e){if(t){if("string"===typeof t)return Jg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jg(t,e):void 0}}function Jg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Qg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tS(t,e,n){return e&&Zg(t.prototype,e),n&&Zg(t,n),t}var eS=function(){function t(e,n,r){Qg(this,t),this.paneId=e,this.containerElement=n,this.count=0,this.maxCount=r,this.cachePreferences(),this.cachePaneMarkets(),this.loadGifs(),this.prepareColors(),this.cacheAudio()}return tS(t,[{key:"processTrades",value:function(t){for(var e="",n=0;n<t.length;n++){var r=t[n].exchange+":"+t[n].pair;if(this.paneMarkets[r]){var i=t[n];"undefined"!==typeof this.marketsMultipliers[r]&&(i.amount/=this.marketsMultipliers[r]),!i.liquidation&&this.showTrades?i.amount>=this.minimumTradeAmount&&i.amount<this.maximumTradeAmount?e+=this.showTrade(i,r,this.tradesColors,this.tradesAudios,this.significantTradeAmount):i.amount>this.audioThreshold&&i.amount<this.maximumTradeAmount&&this.tradesAudios[0][i.side](mo,i.amount/this.significantTradeAmount):i.liquidation&&this.showLiquidations&&(i.amount>=this.minimumLiquidationAmount&&i.amount<this.maximumLiquidationAmount?e+=this.showTrade(i,r,this.liquidationsColors,this.liquidationsAudios,this.significantLiquidationAmount):i.amount>this.audioThreshold&&i.amount<this.maximumLiquidationAmount&&this.liquidationsAudios[0][i.side](mo,i.amount/this.significantLiquidationAmount))}}return!!e.length&&(this.containerElement.insertAdjacentHTML("afterbegin",e),this.trim(),!0)}},{key:"processTradesSilent",value:function(t){var e=this.audioThreshold,n=this.showGifs;this.audioThreshold=1/0,this.showGifs=!1,this.processTrades(t),this.audioThreshold=e,this.showGifs=n}},{key:"getTradeInlineStyles",value:function(t,e,n){var r=(Math.max(t.amount,e.from)-e.from)/e.range,i=Math.min(1,t.amount/n),o=e[t.side],a="";if(this.showGifs&&e[t.side].gif){var s=e[t.side].gif;wg.cache[s]&&(a="background-image:url('".concat(wg.cache[s][Math.floor(Math.random()*(wg.cache[s].length-1))],"')"))}var c,l=o[(r<.5?"from":"to")+"Luminance"],u=W(o.from,o.to,r);return c=l>(a?144:170)?"rgba(0, 0, 0, "+Math.min(1,.33+i)+")":"rgba(255, 255, 255, "+Math.min(1,.33+i)+")","background-color:rgb(".concat(u[0],", ").concat(u[1],", ").concat(u[2],");color:").concat(c,";").concat(a)}},{key:"showTrade",value:function(t,e,n,r,i){var o=0,a=n[o];for(o=0;o<n.length;o++)if(t.amount<n[o].to){a=n[o];break}return o<n.length&&t.amount>this.audioThreshold&&r[o][t.side](mo,t.amount/i),this.count++,this.renderRow(t,e,a,i)}},{key:"renderRow",value:function(t,e,n,r){var i="",o="";if(t.timestamp!==this.lastTimestamp&&(i=" -timestamp",this.lastTimestamp=t.timestamp,!this.showTimeAgo)){var a=new Date(+t.timestamp);o=a.getHours()+":"+a.getMinutes(),i+=" -fixed"}var s="";this.slippageMode&&t.slippage&&(s="<small>".concat(t.slippage>0?"+":"").concat(t.slippage).concat("bps"===this.slippageMode?" bps":"","</small>"));var c="";this.showLogos||(c=t.exchange.replace("_"," "));var l="",u=(t.liquidation?"l":"")+t.side;u!==this.lastSide&&(l=" icon-side",this.lastSide=u);var d="";return this.showTradesPairs&&(d='<div class="trade__pair">'.concat(t.pair.replace("_"," "),"</div>")),'<li class="trade -'.concat(t.exchange," -").concat(t.side," -level-").concat(n.level).concat(t.liquidation?" -liquidation":"",'" title="').concat(t.exchange,":").concat(t.pair,'" style="').concat(this.getTradeInlineStyles(t,n,r),'">\n    <div class="trade__side').concat(l,'"></div>\n    <div class="trade__exchange">').concat(c,"</div>\n    ").concat(d,"\n    ").concat(this.showPrice?'<div class="trade__price">'.concat(xe(t.price,e)).concat(s,"</div>"):"",'\n    <div class="trade__amount">\n      <span class="trade__amount__quote">\n        <span class="icon-quote"></span>\n        <span>').concat(Ae(t.size*t.price),'</span>\n      </span>\n      <span class="trade__amount__base">\n        <span class="icon-base"></span>\n        <span>').concat(Ae(t.size),'</span>\n      </span>\n    </div>\n    <div class="trade__time ').concat(i,'" data-timestamp="').concat(t.timestamp.toString(),'">').concat(o,"</div>\n    </li>")}},{key:"getTradesThesholds",value:function(){return ta.state[this.paneId].thresholds}},{key:"getLiquidationsThresholds",value:function(){return ta.state[this.paneId].liquidations}},{key:"loadGifs",value:async function(){this.loadThresholdsGifs(this.getTradesThesholds()),this.loadThresholdsGifs(this.getLiquidationsThresholds())}},{key:"loadThresholdsGifs",value:async function(t){var e,n=Wg(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.buyGif&&wg.getGifs(r.buyGif),r.sellGif&&wg.getGifs(r.sellGif)}}catch(i){n.e(i)}finally{n.f()}}},{key:"prepareColors",value:function(){var t=this.getTradesThesholds(),e=this.getLiquidationsThresholds(),n=rt();this.tradesColors=this.prepareColorsThresholds(t,n),this.liquidationsColors=this.prepareColorsThresholds(e,n),this.minimumTradeAmount=t[0].amount,this.significantTradeAmount=t[1].amount,t[t.length-1].max?this.maximumTradeAmount=t[t.length-1].amount:this.maximumTradeAmount=1/0,this.minimumLiquidationAmount=e[0].amount,this.significantLiquidationAmount=e[1].amount,e[e.length-1].max?this.maximumLiquidationAmount=e[e.length-1].amount:this.maximumLiquidationAmount=1/0}},{key:"prepareColorsThresholds",value:function(t,e){for(var n=[],r=t.length,i=0;i<r;i++){if(i===r-1){n.push(Kg(Kg({},n[n.length-1]),{},{max:1/0}));break}var o=et(t[i].buyColor,e),a=et(t[i+1].buyColor,e),s=et(t[i].sellColor,e),c=et(t[i+1].sellColor,e);n.push({from:t[i].amount,to:t[i+1].amount,range:t[i+1].amount-t[i].amount,level:Math.floor(i/(r-1)*4),max:i===r-1&&t[i+1].max,buy:{from:o,to:a,fromLuminance:Q(o),toLuminance:Q(a),gif:t[i].buyGif},sell:{from:s,to:c,fromLuminance:Q(s),toLuminance:Q(c),gif:t[i].sellGif}})}return n}},{key:"cacheAudio",value:async function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=ta.state[this.paneId].audioThreshold;if(ta.state.settings.useAudio&&!ta.state[this.paneId].muted&&0!==ta.state[this.paneId].audioVolume){if(e?"string"===typeof e&&/\d\s*%$/.test(e)?this.audioThreshold=this.minimumTradeAmount*(parseFloat(e)/100):this.audioThreshold=+e:this.audioThreshold=.1*this.minimumTradeAmount,!this.tradesAudios||t){var n=ta.state[this.paneId].audioPitch;this.tradesAudios=await this.cacheAudioThresholds(this.getTradesThesholds(),n),this.liquidationsAudios=await this.cacheAudioThresholds(this.getLiquidationsThresholds(),n)}}else this.audioThreshold=1/0}},{key:"cacheAudioThresholds",value:async function(t,e){for(var n=[],r=0;r<t.length;r++)n.push({buy:await mo.buildAudioFunction(t[r].buyAudio,"buy",e),sell:await mo.buildAudioFunction(t[r].sellAudio,"sell",e)});return n}},{key:"cachePreferences",value:function(){var t=ta.state[this.paneId].tradeType;this.slippageMode=ta.state.settings.calculateSlippage,this.showTrades="both"===t||"trades"===t,this.showLiquidations="both"===t||"liquidations"===t,this.showGifs=!ta.state.settings.disableAnimations,this.showLogos=ta.state[this.paneId].showLogos,this.showTradesPairs=ta.state[this.paneId].showTradesPairs,this.showPrice=ta.state[this.paneId].showPrice,this.showTimeAgo=ta.state[this.paneId].showTimeAgo,this.showTimeAgo&&!this.timeUpdateInterval?this.setupTimeUpdateInterval():!this.showTimeAgo&&this.timeUpdateInterval&&(clearInterval(this.timeUpdateInterval),this.timeUpdateInterval=null)}},{key:"cachePaneMarkets",value:function(){var t=this;this.marketsMultipliers={},this.paneMarkets=ta.state.panes.panes[this.paneId].markets.reduce((function(e,n){var r=n.split(":"),i=Hg(r,1),o=i[0];if(!ta.state.app.activeExchanges[o])return e[n]=!1,e;var a=ta.state[t.paneId].multipliers[n];return"undefined"!==typeof a&&(t.marketsMultipliers[n]=a),e[n]=!0,e}),{})}},{key:"setupTimeUpdateInterval",value:function(){var t,e=this,n=function(t){return t<6e4?Math.floor(t/1e3)+"s":t<36e5?Math.floor(t/6e4)+"m":Math.floor(t/36e5)+"h"};this.timeUpdateInterval=setInterval((function(){var r=e.containerElement.getElementsByClassName("-timestamp"),i=r.length;if(i){t=Date.now();for(var o,a=t/1e3%60<1,s=0;s<i;s++){if("undefined"===typeof r[s])break;var c=t-r[s].getAttribute("data-timestamp"),l=n(c);if(l===o&&l)r[s-1].textContent="",r[s-1].className="trade__time";else{if(l!=r[s].textContent&&(r[s].textContent=l,!a&&"s"!==l[l.length-1]))break;o=l}}}}),1e3)}},{key:"setMaxCount",value:function(t){this.maxCount=t}},{key:"trim",value:function(){while(this.count>this.maxCount)this.containerElement.removeChild(this.containerElement.lastChild),this.count--}},{key:"clear",value:function(){this.containerElement.innerHTML="",this.count=0}},{key:"destroy",value:function(){clearInterval(this.timeUpdateInterval)}}]),t}();function nS(t){return nS="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nS(t)}function rS(t,e){return aS(t)||oS(t,e)||cS(t,e)||iS()}function iS(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function oS(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function aS(t){if(Array.isArray(t))return t}function sS(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=cS(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function cS(t,e){if(t){if("string"===typeof t)return lS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lS(t,e):void 0}}function lS(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hS(t,e,n){return e&&dS(t.prototype,e),n&&dS(t,n),t}function pS(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fS(t,e)}function fS(t,e){return fS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},fS(t,e)}function mS(t){var e=bS();return function(){var n,r=gS(t);if(e){var i=gS(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return vS(this,n)}}function vS(t,e){if(e&&("object"===nS(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return yS(t)}function yS(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bS(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function gS(t){return gS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},gS(t)}var SS=function(t){pS(n,t);var e=mS(n);function n(){var t;return uS(this,n),t=e.apply(this,arguments),t.showPlaceholder=!0,t}return hS(n,[{key:"market",get:function(){return this.pane.markets[0]}},{key:"showLogos",get:function(){return this.$store.state[this.paneId].showLogos}},{key:"monochromeLogos",get:function(){return this.$store.state[this.paneId].monochromeLogos}},{key:"thresholdsMultipler",get:function(){return this.$store.state[this.paneId].thresholdsMultipler}},{key:"gradient",get:function(){return[this.$store.state[this.paneId].thresholds[0].buyColor,this.$store.state[this.paneId].thresholds[this.$store.state[this.paneId].thresholds.length-1].buyColor]}},{key:"created",value:function(){var t=this;Ca.on("trades",this.onTrades),this._onStoreMutation=this.$store.subscribe((function(e){switch(e.type){case"app/EXCHANGE_UPDATED":case"settings/TOGGLE_SLIPPAGE":case t.paneId+"/TOGGLE_TRADE_TYPE":case t.paneId+"/TOGGLE_TRADES_PAIRS":case t.paneId+"/TOGGLE_LOGOS":case t.paneId+"/TOGGLE_TIME_AGO":case t.paneId+"/TOGGLE_PRICE":t.feed.cachePreferences(),t.refreshList();break;case t.paneId+"/SET_MAX_ROWS":t.feed.setMaxCount(e.payload);break;case"panes/SET_PANE_MARKETS":case t.paneId+"/SET_THRESHOLD_MULTIPLIER":"panes/SET_PANE_MARKETS"===e.type&&e.payload.id!==t.paneId||(t.feed.cachePaneMarkets(),t.refreshList());break;case t.paneId+"/SET_THRESHOLD_GIF":wg.getGifs(e.payload.value,!0),t.refreshList();break;case t.paneId+"/SET_THRESHOLD_AUDIO":case t.paneId+"/SET_AUDIO_VOLUME":case t.paneId+"/SET_AUDIO_PITCH":case"settings/SET_AUDIO_VOLUME":case"settings/TOGGLE_AUDIO":t.feed.cacheAudio();break;case t.paneId+"/SET_AUDIO_THRESHOLD":case t.paneId+"/TOGGLE_MUTED":t.feed.cacheAudio(!1);break;case"settings/SET_CHART_BACKGROUND_COLOR":case t.paneId+"/SET_THRESHOLD_COLOR":case t.paneId+"/SET_THRESHOLD_AMOUNT":case t.paneId+"/SET_THRESHOLDS_MULTIPLER":case t.paneId+"/TOGGLE_THRESHOLD_MAX":case t.paneId+"/DELETE_THRESHOLD":case t.paneId+"/ADD_THRESHOLD":t.feed.prepareColors(),t.refreshList(),(e.type===t.paneId+"/DELETE_THRESHOLD"||(t.paneId,1))&&t.feed.cacheAudio();break}}))}},{key:"mounted",value:function(){this.feed=new eS(this.paneId,this.$refs.tradesContainer,this.$store.state[this.paneId].maxRows)}},{key:"beforeDestroy",value:function(){Ca.off("trades",this.onTrades),this.feed&&this.feed.destroy()}},{key:"onTrades",value:function(t){this.feed.processTrades(t)===this.showPlaceholder&&(this.showPlaceholder=!1)}},{key:"refreshList",value:function(){var t,e=this.$el.getElementsByClassName("trade"),n=[],r=sS(e);try{for(r.s();!(t=r.n()).done;){var i,o=t.value,a=Ie(o.getAttribute("title")),s=rS(a,2),c=s[0],l=s[1],u=o.querySelector(".trade__time").getAttribute("data-timestamp"),d=parseFloat(null===(i=o.querySelector(".trade__price"))||void 0===i?void 0:i.innerText)||0,h=parseFloat(o.querySelector(".trade__amount__base").innerText)||0,p=o.classList.contains("-buy")?"buy":"sell",f=h*(this.$store.state.settings.preferQuoteCurrencySize?d:1),m={timestamp:u,exchange:c,pair:l,price:d,amount:f,size:h,side:p};o.classList.contains("-liquidation")&&(m.liquidation=!0),n.push(m)}}catch(v){r.e(v)}finally{r.f()}this.feed.clear(),this.feed.processTradesSilent(n)}}]),n}(Object(s["b"])(ip));SS=Object(a["a"])([Object(s["a"])({components:{PaneHeader:nb,TradesPlaceholder:Fg,Slider:U},name:"Trades"})],SS);var _S=SS,CS=_S,wS=(n("8b12"),Object(R["a"])(CS,fg,mg,!1,null,null,null)),TS=wS.exports,kS=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pane-stats"},[n("pane-header",{attrs:{paneId:t.paneId}}),n("ul",{staticClass:"stats-buckets"},t._l(t.data,(function(e,r){return n("li",{key:r,staticClass:"stat-bucket",on:{click:function(e){return t.editStat(r)}}},[n("div",{staticClass:"stat-bucket__name"},[t._v(t._s(e.name))]),n("div",{staticClass:"stat-bucket__value"},[t._v(t._s(e.value))])])})),0),t.enableChart?n("div",{ref:"chart",staticClass:"stats-chart"}):t._e()],1)},ES=[];function IS(t,e){return RS(t)||xS(t,e)||AS(t,e)||OS()}function OS(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function AS(t,e){if(t){if("string"===typeof t)return PS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?PS(t,e):void 0}}function PS(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xS(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function RS(t){if(Array.isArray(t))return t}function DS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function US(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?DS(Object(n),!0).forEach((function(e){NS(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function NS(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function LS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jS(t,e,n){return e&&LS(t.prototype,e),n&&LS(t,n),t}var MS=function(){function t(e,n,r){BS(this,t),this.stacks=[],this.filled=!1,this.remaining=0,this.timeouts=[],this.id=n.id,this.name=n.name,this.adapter=this.getAdapter(e),this.window=(isNaN(n.window)?ta.state[r].window:+n.window)||6e4,this.precision=n.precision,this.color=this.parseColor(n.color),this.granularity=Math.max(ta.state[r].granularity,this.window/5e3),this.type=n.type||"line";var i=Dt(this.window).replace(/^1(\w)$/,"$1");this.name+="/"+i,this.clear()}return jS(t,[{key:"getAdapter",value:function(t){var e=t.replace(/([^.]|^)(vbuy|vsell|cbuy|csell|lbuy|lsell)/g,"$1stats.$2");return new Function("stats","'use strict'; return ".concat(e,";"))}},{key:"clear",value:function(){this.stacks=[],this.live=0,this.filled=!1,this.remaining=0;for(var t=0;t<this.timeouts.length;t++)clearTimeout(this.timeouts[t]);this.timeouts=[]}},{key:"unbind",value:function(){this.clear()}},{key:"onStats",value:function(t){var e=this.adapter(t);if(!this.stacks.length||t.timestamp>this.timestamp+this.granularity)this.appendStack(t.timestamp);else if(this.filled&&this.remaining){var n=(t.timestamp-this.timestamp)/this.granularity,r=Math.ceil(this.stacks[0]*(1-n)),i=this.remaining-r;this.remaining=r,this.live-=i}this.addData(e)}},{key:"appendStack",value:function(t){t||(t=Date.now()),this.stacks.length&&!this.stacks[this.stacks.length-1]||(this.stacks.push(0),this.timeouts.push(setTimeout(this.shiftStack.bind(this),this.window))),this.timestamp=t,this.filled||this.stacks.length!==this.window/this.granularity||(this.filled=!0)}},{key:"shiftStack",value:function(){this.timeouts.shift();var t=this.stacks.shift();t&&(this.remaining&&(this.live-=this.remaining),this.remaining=this.stacks[0])}},{key:"addData",value:function(t){this.stacks[this.stacks.length-1]+=t,this.live+=t}},{key:"getValue",value:function(){return this.live}},{key:"createSerie",value:function(t){if(!this.serie){var e="add"+(this.type.charAt(0).toUpperCase()+this.type.slice(1))+"Series",n=Object.assign({},Ml[this.type],US({priceScaleId:this.name,title:this.name,priceLineVisible:!1,lineWidth:1,scaleMargins:{top:.05,bottom:.05}},this.getColorOptions()));this.serie=t[e](n)}}},{key:"updateSerie",value:function(){var t=this.getValue();if(this.serie&&this.timestamp&&("histogram"!==this.type||t)){var e={time:this.timestamp/1e3,value:t};"function"===typeof this.color&&(e.color=this.color(t)),this.serie.update(e)}}},{key:"getColorOptions",value:function(){if("function"===typeof this.color)return{};if("area"===this.type){var t,e,n;if(0===this.color.indexOf("#")){var r=J(this.color),i=IS(r,3);t=i[0],e=i[1],n=i[2]}else{var o=et(this.color),a=IS(o,3);t=a[0],e=a[1],n=a[2]}var s="rgba(".concat(t,",").concat(e,",").concat(n,", .4)"),c="rgba(".concat(t,",").concat(e,",").concat(n,", 0)");return{topColor:s,bottomColor:c,lineColor:this.color}}return{color:this.color}}},{key:"parseColor",value:function(t){return/rgba?\(|#/.test(t)?t:function(){return new Function("value",'"use strict"; return '+t)}()}},{key:"updateColor",value:function(t){this.serie&&(this.color=this.parseColor(t),"string"===typeof t&&this.serie.applyOptions(this.getColorOptions()))}},{key:"removeIndicator",value:function(t){this.serie&&(t.removeSeries(this.serie),delete this.serie)}}]),t}();function $S(t){return $S="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$S(t)}function FS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function HS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function GS(t,e,n){return e&&HS(t.prototype,e),n&&HS(t,n),t}function XS(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&VS(t,e)}function VS(t,e){return VS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},VS(t,e)}function qS(t){var e=WS();return function(){var n,r=YS(t);if(e){var i=YS(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return KS(this,n)}}function KS(t,e){if(e&&("object"===$S(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zS(t)}function zS(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WS(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function YS(t){return YS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},YS(t)}var JS=function(t){XS(n,t);var e=qS(n);function n(){var t;return FS(this,n),t=e.apply(this,arguments),t.data={},t._buckets={},t._feed=null,t}return GS(n,[{key:"enableChart",get:function(){return this.$store.state[this.paneId].enableChart}},{key:"buckets",get:function(){return this.$store.state[this.paneId].buckets}},{key:"created",value:function(){var t=this;this._onStoreMutation=this.$store.subscribe((function(e){switch(e.type){case"settings/SET_CHART_COLOR":t._chart&&e.payload&&t._chart.applyOptions($l(e.payload));break;case"settings/SET_CHART_THEME":t._chart&&t._chart.applyOptions($l());break;case"panes/SET_PANE_MARKETS":case t.paneId+"/SET_WINDOW":if(e.payload.id&&e.payload.id!==t.paneId)break;t.prepareBuckets();break;case t.paneId+"/SET_BUCKET_COLOR":t.recolorBucket(e.payload.id,e.payload.value);break;case t.paneId+"/SET_BUCKET_TYPE":t._chart&&t.reloadBucketSerie(e.payload.id,e.payload.value);break;case t.paneId+"/TOGGLE_CHART":e.payload?t.createChart():t.removeChart();break;case t.paneId+"/TOGGLE_BUCKET":e.payload.value?t.createBucket(t.buckets[e.payload.id]):t.removeBucket(e.payload.id);break;case t.paneId+"/REMOVE_BUCKET":t.removeBucket(e.payload);break;case t.paneId+"/SET_BUCKET_WINDOW":case t.paneId+"/SET_BUCKET_INPUT":case t.paneId+"/SET_BUCKET_PRECISION":t.refreshBucket(e.payload.id);break;case t.paneId+"/RENAME_BUCKET":t.refreshBucketName(e.payload);break}})),this.prepareBuckets()}},{key:"mounted",value:function(){this.enableChart&&this.createChart()}},{key:"beforeDestroy",value:function(){this._feed&&Ca.off(this._feed,this.onVolume),this.clearBuckets(),this.removeChart(),this._chart=null}},{key:"createChart",value:async function(){await this.$nextTick();var t=Fl(Ll);for(var e in this._chart=gl["b"](this.$refs.chart,t),this._buckets)this._buckets[e].createSerie(this._chart);this.refreshChartDimensions(0)}},{key:"removeChart",value:function(){if(this._chart){for(var t in this._buckets)this._buckets[t].removeIndicator(this._chart);this._chart.remove(),this._chart=null}}},{key:"refreshChartDimensions",value:async function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;this.enableChart&&(clearTimeout(this._refreshChartDimensionsTimeout),this._refreshChartDimensionsTimeout=setTimeout((function(){t._chart&&t._chart.resize(t.$el.clientWidth,t.$el.clientHeight)}),e))}},{key:"prepareBuckets",value:function(){for(var t in this._feed&&Ca.off(this._feed,this.onVolume),this.clearBuckets(),this.buckets)this.createBucket(this.buckets[t]);this._feed="bucket-"+$t(this.pane.markets),this._feed.length&&Ca.on(this._feed,this.onVolume)}},{key:"onVolume",value:function(t){for(var e in this._buckets){if(this._buckets[e].onStats(t),this._buckets[e].stacks.length){var n=this._buckets[e].getValue();this.$set(this.data[e],"value",Ae(n,this._buckets[e].precision))}this._chart&&this._buckets[e].updateSerie()}}},{key:"clearBuckets",value:function(){for(var t in this._buckets)this.removeBucket(t);this._buckets={}}},{key:"removeBucket",value:function(t){this._buckets[t]&&(this._buckets[t].unbind(),this._chart&&this._buckets[t].removeIndicator(this._chart),this.$delete(this.data,t),delete this._buckets[t])}},{key:"refreshBucket",value:function(t){var e=this.buckets[t];e&&(this.removeBucket(t),this.createBucket(e))}},{key:"recolorBucket",value:function(t,e){this._buckets[t]&&(this._buckets[t].updateColor(e),this.$set(this.data[t],"color",e))}},{key:"reloadBucketSerie",value:function(t,e){this._buckets[t]&&(e&&(this._buckets[t].type=e),this._buckets[t].removeIndicator(this._chart),this._buckets[t].createSerie(this._chart))}},{key:"createBucket",value:function(t){if(t.enabled&&"undefined"===typeof this.data[t.id]){var e=new MS(t.input,t,this.paneId);this._chart&&e.createSerie(this._chart),this._buckets[t.id]=e,this.$set(this.data,e.id,{value:0,name:e.name,color:e.color})}}},{key:"refreshBucketName",value:function(t){var e=t.id,n=t.name,r=this._buckets[e];r.name=n,this.$set(this.data[e],"name",n)}},{key:"editStat",value:function(t){Un.open(Jn,{paneId:this.paneId,bucketId:t})}},{key:"onResize",value:function(){this.refreshChartDimensions()}}]),n}(Object(s["b"])(ip));JS=Object(a["a"])([Object(s["a"])({components:{PaneHeader:nb},name:"Stats"})],JS);var QS=JS,ZS=QS,t_=(n("3f50"),Object(R["a"])(ZS,kS,ES,!1,null,null,null)),e_=t_.exports,n_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pane-counters"},[n("pane-header",{attrs:{paneId:t.paneId}}),n("div",{staticClass:"counters hide-scrollbar"},t._l(t.activeSteps,(function(e,r){return n("div",{key:r,staticClass:"counter",attrs:{duration:e.duration}},[n("div",{staticClass:"counter__side -buy",style:{width:e.buy/(e.buy+e.sell)*100+"%"}},[t.countersCount?n("span",[t._v(t._s(e.buy))]):n("span",[t._v(t._s(t.formatAmount(e.buy)))])]),n("div",{staticClass:"counter__side -sell",style:{width:e.sell/(e.buy+e.sell)*100+"%"}},[t.countersCount?n("span",[t._v(t._s(e.sell))]):n("span",[t._v(t._s(t.formatAmount(e.sell)))])])])})),0)],1)},r_=[];function i_(t){return i_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i_(t)}function o_(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=a_(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function a_(t,e){if(t){if("string"===typeof t)return s_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s_(t,e):void 0}}function s_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u_(t,e,n){return e&&l_(t.prototype,e),n&&l_(t,n),t}function d_(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h_(t,e)}function h_(t,e){return h_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},h_(t,e)}function p_(t){var e=v_();return function(){var n,r=y_(t);if(e){var i=y_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f_(this,n)}}function f_(t,e){if(e&&("object"===i_(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m_(t)}function m_(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function y_(t){return y_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y_(t)}var b_=function(t){d_(n,t);var e=p_(n);function n(){var t;return c_(this,n),t=e.apply(this,arguments),t.steps=[],t._feed=null,t}return u_(n,[{key:"liquidationsOnly",get:function(){return this.$store.state[this.paneId].liquidationsOnly}},{key:"countersSteps",get:function(){return this.$store.state[this.paneId].steps}},{key:"countersCount",get:function(){return this.$store.state[this.paneId].count}},{key:"countersGranularity",get:function(){return this.$store.state[this.paneId].granularity}},{key:"activeSteps",get:function(){return this.steps.filter((function(t){return t.hasData}))}},{key:"created",value:function(){var t=this;this._onStoreMutation=this.$store.subscribe((function(e){switch(e.type){case"panes/SET_PANE_MARKETS":e.payload.id===t.paneId&&t.createCounters();break;case t.paneId+"/REPLACE_COUNTERS":case t.paneId+"/TOGGLE_LIQUIDATIONS_ONLY":case t.paneId+"/TOGGLE_COUNT":t.createCounters();break}})),this.createCounters(),this._populateCountersInterval=setInterval(this.populateCounters.bind(this),this.countersGranularity)}},{key:"beforeDestroy",value:function(){this._feed&&Ca.off(this._feed,this.onVolume),clearInterval(this._populateCountersInterval)}},{key:"onVolume",value:function(t){var e={buy:t.vbuy,sell:t.vsell};if(this.liquidationsOnly?(e.buy=t.lbuy,e.sell=t.lsell):this.countersCount&&(e.buy=t.cbuy,e.sell=t.csell),e.buy||e.sell){this._activeChunk.timestamp||(this._activeChunk.timestamp=t.timestamp),this._activeChunk.buy+=e.buy,this._activeChunk.sell+=e.sell;for(var n=0;n<this.steps.length;n++)this.steps[n].buy+=e.buy,this.steps[n].sell+=e.sell}}},{key:"clearCounters",value:function(){this._feed&&Ca.off(this._feed,this.onVolume),this._counters?(this._counters.splice(0,this._counters.length),this._activeChunk.timestamp=null,this._activeChunk.buy=this._activeChunk.sell=0,this.steps.splice(0,this.steps.length)):(this._counters=[],this._activeChunk={timestamp:null,buy:0,sell:0},this.steps=[])}},{key:"createCounters",value:function(){this.clearCounters();var t,e=o_(this.countersSteps);try{for(e.s();!(t=e.n()).done;){var n=t.value;this._counters.push({duration:n,chunks:[]})}}catch(s){e.e(s)}finally{e.f()}var r,i=o_(this._counters);try{for(i.s();!(r=i.n()).done;){var o=r.value,a=0===this._counters.indexOf(o);this.steps.push({duration:Dt(o.duration),buy:0,sell:0,hasData:a})}}catch(s){i.e(s)}finally{i.f()}this._feed="bucket-"+$t(this.pane.markets),this._feed.length&&Ca.on(this._feed,this.onVolume)}},{key:"populateCounters",value:function(){var t=Date.now();this._activeChunk.timestamp&&(this._counters[0].chunks.push({timestamp:this._activeChunk.timestamp,buy:this._activeChunk.buy,sell:this._activeChunk.sell}),this._activeChunk.timestamp=null,this._activeChunk.buy=0,this._activeChunk.sell=0);for(var e,n,r=[],i=0;i<this._counters.length;i++){r.length&&(Array.prototype.push.apply(this._counters[i].chunks,r.splice(0,r.length)),this.steps[i].hasData||(this.steps[i].hasData=!0)),e=0,n=0;for(var o=0,a=0;a<this._counters[i].chunks.length;a++)if(e+=this._counters[i].chunks[a].buy,n+=this._counters[i].chunks[a].sell,this._counters[i].chunks[a].timestamp>=t-this._counters[i].duration){o=a;break}o&&(r=this._counters[i].chunks.splice(0,o+1),this.steps[i].buy-=e,this.steps[i].sell-=n)}}},{key:"formatAmount",value:function(t){return Ae(t)}}]),n}(Object(s["b"])(ip));b_=Object(a["a"])([Object(s["a"])({components:{PaneHeader:nb},name:"Counters"})],b_);var g_=b_,S_=g_,__=(n("7e2d"),Object(R["a"])(S_,n_,r_,!1,null,null,null)),C_=__.exports,w_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pane-prices",on:{mouseenter:function(e){t.pauseSort=!0},mouseleave:function(e){t.pauseSort=!1}}},[n("pane-header",{attrs:{paneId:t.paneId}},[n("prices-sort-dropdown",{attrs:{"pane-id":t.paneId}})],1),n("div",{staticClass:"markets-bar__wrapper hide-scrollbar"},[n(t.animateSort?"transition-group":"div",{tag:"component",staticClass:"markets-bar hide-scrollbar pane",class:["horizontal"===t.mode&&"-horizontal"],attrs:{name:t.transitionGroupName,tag:"div"}},t._l(t.markets,(function(e){return n("div",{key:e.id,staticClass:"market",class:e.status,attrs:{title:e.id}},[n("div",{staticClass:"market__exchange",class:e.exchange}),t.showPairs?n("div",{staticClass:"market__pair"},[t._v(t._s(e.local))]):t._e(),t.showPrice?n("div",{staticClass:"market__price"},[t._v(t._s(e.price))]):t._e(),t.showChange?n("div",{staticClass:"market__change"},[t._v(t._s((e.change>=0?"+":"")+e.change.toFixed(2))+"%")]):t._e(),t.showVolume?n("div",{staticClass:"market__volume"},[t._v(t._s(t.formatAmount(e.volume,2)))]):t._e(),t.showVolumeDelta?n("div",{staticClass:"market__volume"},[t._v(t._s(t.formatAmount(e.volumeDelta,2)))]):t._e()])})),0)],1)],1)},T_=[];function k_(t){return k_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k_(t)}function E_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function I_(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E_(Object(n),!0).forEach((function(e){O_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A_(t,e){return R_(t)||x_(t,e)||U_(t,e)||P_()}function P_(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x_(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function R_(t){if(Array.isArray(t))return t}function D_(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=U_(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function U_(t,e){if(t){if("string"===typeof t)return N_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N_(t,e):void 0}}function N_(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function B_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j_(t,e,n){return e&&L_(t.prototype,e),n&&L_(t,n),t}function M_(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$_(t,e)}function $_(t,e){return $_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},$_(t,e)}function F_(t){var e=X_();return function(){var n,r=V_(t);if(e){var i=V_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return H_(this,n)}}function H_(t,e){if(e&&("object"===k_(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return G_(t)}function G_(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X_(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function V_(t){return V_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},V_(t)}var q_=function(t){M_(n,t);var e=F_(n);function n(){var t;return B_(this,n),t=e.apply(this,arguments),t.mode="vertical",t.pauseSort=!1,t.markets=[],t}return j_(n,[{key:"marketChange",value:function(t,e){var n,r=D_(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;-1===t.indexOf(i)&&this.removeMarketFromList(i)}}catch(h){r.e(h)}finally{r.f()}var o,a=D_(t);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(-1===e.indexOf(s)){var c=Ie(s),l=A_(c,2),u=l[0],d=l[1];this.addMarketToList({id:s,exchange:u,pair:d})}}}catch(h){a.e(h)}finally{a.f()}}},{key:"periodChange",value:function(t){t>0?this.periodReset():this.clearPeriodReset()}},{key:"exchanges",get:function(){return this.$store.state.exchanges}},{key:"disableAnimations",get:function(){return this.$store.state.settings.disableAnimations}},{key:"showPairs",get:function(){return this.$store.state[this.paneId].showPairs}},{key:"showChange",get:function(){return this.$store.state[this.paneId].showChange}},{key:"showPrice",get:function(){return this.$store.state[this.paneId].showPrice}},{key:"showVolume",get:function(){return this.$store.state[this.paneId].showVolume}},{key:"showVolumeDelta",get:function(){return this.$store.state[this.paneId].showVolumeDelta}},{key:"animateSort",get:function(){return this.$store.state[this.paneId].animateSort}},{key:"sortType",get:function(){return this.$store.state[this.paneId].sortType}},{key:"sortOrder",get:function(){return this.$store.state[this.paneId].sortOrder}},{key:"period",get:function(){return this.$store.state[this.paneId].period}},{key:"transitionGroupName",get:function(){return this.animateSort?"flip-list":null}},{key:"created",value:function(){var t=this;this._initialValues={},this._onStoreMutation=this.$store.watch((function(e){return[e[t.paneId].sortType,e[t.paneId].sortOrder]}),this.cacheSortFunction),this.cacheSortFunction(),this.refreshMarkets()}},{key:"mounted",value:function(){Ca.on("prices",this.updateMarkets)}},{key:"beforeDestroy",value:function(){Ca.off("prices",this.updateMarkets),this._resetTimeout&&clearTimeout(this._resetTimeout)}},{key:"refreshMarkets",value:function(){this.markets=[];var t,e=D_(this.pane.markets);try{for(e.s();!(t=e.n()).done;){var n=t.value,r=Ie(n),i=A_(r,2),o=i[0],a=i[1];this.addMarketToList({id:n,pair:a,exchange:o})}}catch(s){e.e(s)}finally{e.f()}}},{key:"updateMarkets",value:function(t){var e,n=this.showChange,r=D_(this.markets);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=t[i.id];if(o&&o.volume!==i.volume){if(i.volume=o.volume-this._initialValues[i.id].volume,i.volumeDelta=o.volumeDelta-this._initialValues[i.id].volumeDelta,n&&o.price){var a=o.price-o.initialPrice-this._initialValues[i.id].change;i.change=a/o.price*100,i.status=a>0?"-up":"-down"}else null===o.price?i.status="-pending":i.price>o.price?i.status="-down":i.price<o.price?i.status="-up":i.status="-neutral";i.price=xe(o.price,i.id)}}}catch(s){r.e(s)}finally{r.f()}this.pauseSort||null===this._sortFunction||(this.markets=this.markets.sort(this._sortFunction))}},{key:"removeMarketFromList",value:function(t){this._initialValues[t]&&delete this._initialValues[t];var e=this.markets.indexOf(this.markets.find((function(e){return e.id===t})));-1!==e&&this.markets.splice(e,1)}},{key:"addMarketToList",value:function(t){this._initialValues[t.id]={change:0,volume:0,volumeDelta:0};var e=Oe(t.exchange,t.pair);this.markets.push(I_(I_({},t),{},{local:e.local,status:"-pending",price:null,change:0,volume:0,volumeDelta:0}))}},{key:"cacheSortFunction",value:function(){var t="horizontal"===this.mode?this.sortOrder>0?-1:1:this.sortOrder,e=this.sortType;e&&"none"!==e?("price"===e?this._sortFunction=1===t?function(t,e){return t.price-e.price}:function(t,e){return e.price-t.price}:"change"===e?this._sortFunction=1===t?function(t,e){return t.change-e.change}:function(t,e){return e.change-t.change}:"volume"===e?this._sortFunction=1===t?function(t,e){return t.volume-e.volume}:function(t,e){return e.volume-t.volume}:"delta"===e&&(this._sortFunction=1===t?function(t,e){return t.volumeDelta-e.volumeDelta}:function(t,e){return e.volumeDelta-t.volumeDelta}),this.markets=this.markets.sort(this._sortFunction)):this._sortFunction=null}},{key:"formatAmount",value:function(t){return Ae(t,2)}},{key:"onResize",value:function(t,e){this.mode=t>1.75*e?"horizontal":"vertical"}},{key:"getTimeToNextReset",value:function(){var t=Date.now(),e=1e3*this.period*60,n=Math.ceil(t/e)*e;return n-t}},{key:"scheduleNextPeriodReset",value:function(){this._resetTimeout&&clearTimeout(this._resetTimeout),this._resetTimeout=setTimeout(this.periodReset.bind(this),this.getTimeToNextReset())}},{key:"periodReset",value:function(){var t=this;Ca.once("prices",(function(e){var n,r=D_(t.markets);try{for(r.s();!(n=r.n()).done;){var i=n.value;e[i.id]&&(t._initialValues[i.id].change=e[i.id].price-e[i.id].initialPrice,t._initialValues[i.id].volume=e[i.id].volume,t._initialValues[i.id].volumeDelta=e[i.id].volumeDelta)}}catch(o){r.e(o)}finally{r.f()}t.updateMarkets(e),t.period&&t.scheduleNextPeriodReset()}))}},{key:"clearPeriodReset",value:function(){for(var t in this._initialValues)this._initialValues[t].change=this._initialValues[t].volume=this._initialValues[t].volumeDelta=0;this._resetTimeout&&(clearTimeout(this._resetTimeout),this._resetTimeout=null)}}]),n}(Object(s["b"])(ip));Object(a["a"])([Object(s["d"])("pane.markets")],q_.prototype,"marketChange",null),Object(a["a"])([Object(s["d"])("period",{immediate:!0})],q_.prototype,"periodChange",null),q_=Object(a["a"])([Object(s["a"])({components:{PaneHeader:nb,PricesSortDropdown:Kv},name:"Prices"})],q_);var K_=q_,z_=K_,W_=(n("183a"),Object(R["a"])(z_,w_,T_,!1,null,"e6992cf6",null)),Y_=W_.exports,J_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pane-website"},[n("pane-header",{attrs:{paneId:t.paneId}}),t.locked?n("div",{staticClass:"iframe__lock"},[n("div",{staticClass:"ml8 mr8"},[n("p",[t._v("Load "),n("span",{directives:[{name:"tippy",rawName:"v-tippy"}],staticClass:"condensed",attrs:{title:"url"},domProps:{textContent:t._s(t.trimmedUrl)}}),t._v(" ?")]),n("div",{staticClass:"text-center"},[n("button",{staticClass:"btn",on:{click:function(e){return t.$store.commit(t.paneId+"/UNLOCK_URL")}}},[t._v("Yes, authorize")])])])]):n("div",{staticClass:"iframe__wrapper"},[n("iframe",{ref:"iframe",style:t.style,attrs:{src:t.url,frameborder:"0",width:"100%",height:"100%"}})])],1)},Q_=[];function Z_(t){return Z_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z_(t)}function tC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nC(t,e,n){return e&&eC(t.prototype,e),n&&eC(t,n),t}function rC(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&iC(t,e)}function iC(t,e){return iC=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},iC(t,e)}function oC(t){var e=cC();return function(){var n,r=lC(t);if(e){var i=lC(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return aC(this,n)}}function aC(t,e){if(e&&("object"===Z_(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return sC(t)}function sC(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cC(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function lC(t){return lC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},lC(t)}var uC=function(t){rC(n,t);var e=oC(n);function n(){var t;return tC(this,n),t=e.apply(this,arguments),t.customId="",t}return nC(n,[{key:"locked",get:function(){return this.$store.state[this.paneId].locked}},{key:"url",get:function(){return this.$store.state[this.paneId].url}},{key:"interactive",get:function(){return this.$store.state[this.paneId].interactive}},{key:"zoom",get:function(){return this.$store.state.panes.panes[this.paneId].zoom}},{key:"style",get:function(){var t=1/this.zoom*100;return{transform:"scale(".concat(this.zoom,")"),width:t+"%",height:t+"%",pointerEvents:this.interactive?"all":"none"}}},{key:"trimmedUrl",get:function(){return this.url.length<=33?this.url:this.url.slice(0,15)+"[...]"+this.url.substr(-15)}}]),n}(Object(s["b"])(ip));uC=Object(a["a"])([Object(s["a"])({components:{PaneHeader:nb},name:"Website"})],uC);var dC=uC,hC=dC,pC=(n("3fcd"),Object(R["a"])(hC,J_,Q_,!1,null,"c0d224a0",null)),fC=pC.exports;function mC(t){return mC="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mC(t)}function vC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yC(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bC(t,e,n){return e&&yC(t.prototype,e),n&&yC(t,n),t}function gC(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&SC(t,e)}function SC(t,e){return SC=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},SC(t,e)}function _C(t){var e=TC();return function(){var n,r=kC(t);if(e){var i=kC(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return CC(this,n)}}function CC(t,e){if(e&&("object"===mC(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return wC(t)}function wC(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TC(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function kC(t){return kC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},kC(t)}var EC=function(t){gC(n,t);var e=_C(n);function n(){var t;return vC(this,n),t=e.apply(this,arguments),t.draggable=!0,t.resizable=!0,t.rowHeight=80,t.cols=null,t.breakpoint=null,t.layoutReady=!1,t}return bC(n,[{key:"panes",get:function(){return this.$store.state.panes.panes}},{key:"unlocked",get:function(){return!this.$store.state.panes.locked}},{key:"layout",get:function(){return this.$store.state.panes.layout}},{key:"created",value:function(){this.cols=oe,this.updateRowHeight()}},{key:"mounted",value:function(){window.addEventListener("resize",this.updateRowHeight)}},{key:"beforeDestroy",value:function(){window.addEventListener("resize",this.updateRowHeight)}},{key:"resizeMaximizedPane",value:function(){var t,e=this;t=this._maximizedPaneId?document.getElementById(this._maximizedPaneId).parentElement:document.getElementsByClassName("-maximized")[0],this.$nextTick((function(){if(t){var n,r,i=t.children[0].id;e._maximizedPaneId?(n=parseFloat(t.style.width),r=parseFloat(t.style.height),e._maximizedPaneId=null):(n=t.clientWidth,r=t.clientHeight,e._maximizedPaneId=i),e.resizePane(i,r,n)}}))}},{key:"resizePane",value:function(t,e,n){if(this.$refs.panes){var r=this.$refs.panes.find((function(e){return e.paneId===t}));r&&"function"===typeof r.onResize&&r.$nextTick((function(){r.onResize(n,e)}))}}},{key:"onItemResized",value:function(t,e,n,r,i){this.resizePane(t,+r,+i),this.$store.commit("panes/UPDATE_LAYOUT",this.layout)}},{key:"updateItem",value:function(t){var e=this.layout.find((function(e){return e.i===t}));this.$store.commit("panes/UPDATE_ITEM",e)}},{key:"onLayoutUpdated",value:function(t){this.$store.commit("panes/UPDATE_LAYOUT",t)}},{key:"onContainerResized",value:function(t,e,n,r,i){this.resizePane(t,+r,+i)}},{key:"updateRowHeight",value:function(t){!t||t.isTrusted?(this._resizeTimeout&&clearTimeout(this._resizeTimeout),t?this._resizeTimeout=window.setTimeout(this.updateRowHeight.bind(this),200):(this._resizeTimeout=null,this.rowHeight=window.innerHeight/this.cols)):this.resizeMaximizedPane()}}]),n}(r["default"]);EC=Object(a["a"])([Object(kd["b"])({components:{GridLayout:Id.a.GridLayout,GridItem:Id.a.GridItem,Chart:pg,Trades:TS,Stats:e_,Counters:C_,Prices:Y_,Website:fC}})],EC);var IC=EC,OC=IC,AC=Object(R["a"])(OC,wd,Td,!1,null,null,null),PC=AC.exports,xC=n("8219"),RC=n.n(xC),DC=n("4ee8"),UC=n.n(DC);function NC(t){return NC="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NC(t)}function BC(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=LC(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function LC(t,e){if(t){if("string"===typeof t)return jC(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jC(t,e):void 0}}function jC(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function MC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function FC(t,e,n){return e&&$C(t.prototype,e),n&&$C(t,n),t}function HC(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&GC(t,e)}function GC(t,e){return GC=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},GC(t,e)}function XC(t){var e=KC();return function(){var n,r=zC(t);if(e){var i=zC(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return VC(this,n)}}function VC(t,e){if(e&&("object"===NC(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return qC(t)}function qC(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KC(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function zC(t){return zC=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},zC(t)}var WC=function(t){HC(n,t);var e=XC(n);function n(){var t;return MC(this,n),t=e.apply(this,arguments),t.price=null,t.showStuck=!1,t}return FC(n,[{key:"showSearch",get:function(){return this.$store.state.app.showSearch}},{key:"isBooted",get:function(){var t=this,e=this.$store.state.app&&this.$store.state.app.isBooted;return clearTimeout(this._stuckTimeout),e||(this.showStuck=!1,this._stuckTimeout=setTimeout((function(){t.showStuck=!0}),15e3)),e}},{key:"isLoading",get:function(){return this.$store.state.app.isLoading}},{key:"theme",get:function(){return this.$store.state.settings.theme}},{key:"autoHideHeaders",get:function(){return this.$store.state.settings.autoHideHeaders}},{key:"preferedSizingCurrency",get:function(){return this.$store.state.settings.preferQuoteCurrencySize?"quote":"base"}},{key:"baseCurrency",get:function(){return this.$store.state.app.baseCurrency}},{key:"baseCurrencySymbol",get:function(){return this.$store.state.app.baseCurrencySymbol}},{key:"quoteCurrency",get:function(){return this.$store.state.app.quoteCurrency}},{key:"quoteCurrencySymbol",get:function(){return this.$store.state.app.quoteCurrencySymbol}},{key:"disableAnimations",get:function(){return this.$store.state.settings.disableAnimations}},{key:"mounted",value:function(){var t=this;this.bindDropFile(),Ca.on("notice",(function(e){t.$store.dispatch("app/showNotice",e)})),Ca.on("prices",this.updatePrice),document.addEventListener("keydown",this.onDocumentKeyPress),window.addEventListener("blur",this.onBlur)}},{key:"beforeDestroy",value:function(){this.unbindDropFile(),this.stopUpdatingPrice()}},{key:"updatePrice",value:function(t){var e,n=0,r=0,i=BC(this._mainMarkets);try{for(i.s();!(e=i.n()).done;){var o=e.value;t[o]&&null!==t[o].price&&(n+=t[o].price,r++)}}catch(a){i.e(a)}finally{i.f()}r?(n/=r,null!==this.price&&(n>+this.price?this.updateFavicon("up"):n<+this.price&&this.updateFavicon("down")),this.price=xe(n,this._mainMarkets[0]),window.document.title=this._mainPair+" "+this.price):(this.price=null,this.updateFavicon("neutral"),window.document.title=this._mainPair?this._mainPair:"AGGR")}},{key:"stopUpdatingPrice",value:function(){Ca.off("prices",this.updatePrice),this.price=null}},{key:"updateFavicon",value:function(t){this._faviconElement||(this._faviconElement=document.createElement("link"),this._faviconElement.id="favicon",this._faviconElement.rel="shortcut icon",document.head.appendChild(this._faviconElement)),this._faviconElement.href="up"===t?RC.a:UC.a}},{key:"onDocumentKeyPress",value:function(t){if(this.isBooted){var e=document.activeElement;27!==t.keyCode?this.$store.state.app.showSearch||t.metaKey||t.ctrlKey||t.altKey||"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||e.isContentEditable||(t=t||window.event,/^[a-z]$/i.test(t.key)?this.$store.dispatch("app/showSearch"):/^[0-9]$/i.test(t.key)&&this.$store.dispatch("app/showTimeframe")):this.$store.dispatch("app/hideSearch")}}},{key:"onBlur",value:function(){this.$store.commit("app/SET_FOCUSED_PANE",null)}},{key:"resetAndReload",value:async function(){var t=await Un.confirm({title:"Reset app",message:"Are you sure ?",ok:"Reset settings",cancel:pn.workspace?"Download workspace "+pn.workspace.id:"Cancel"});!0===t?(await pn.reset(),window.location.reload()):!1===t&&pn.workspace&&pn.downloadWorkspace()}},{key:"bindDropFile",value:function(){document.body.addEventListener("drop",this.handleDrop),document.body.addEventListener("dragover",this.handleDrop)}},{key:"unbindDropFile",value:function(){document.body.removeEventListener("drop",this.handleDrop),document.body.removeEventListener("dragover",this.handleDrop)}},{key:"handleDrop",value:async function(t){if(t.preventDefault(),"drop"!==t.type)return!1;if(t.dataTransfer.files&&t.dataTransfer.files.length){var e,n=BC(t.dataTransfer.files);try{for(n.s();!(e=n.n()).done;){var r=e.value;try{await Yu.importAnything(r)}catch(i){this.$store.dispatch("app/showNotice",{title:i.message,type:"error",timeout:6e4})}}}catch(o){n.e(o)}finally{n.f()}}}},{key:"refreshMainMarkets",value:function(t){var e=this,n={};for(var r in t){var i=t[r].local;n[i]||(n[i]=0),n[i]+=t[r].listeners}this._mainPair=Object.keys(n).sort((function(t,e){return n[e]-n[t]}))[0],this._mainMarkets=Object.keys(t).filter((function(n){return t[n].local===e._mainPair})).map((function(e){return t[e].exchange+":"+t[e].pair}))}}]),n}(s["c"]);WC=Object(a["a"])([Object(s["a"])({name:"App",components:{Menu:Cd,Notices:$a,Panes:PC},watch:{"$store.state.panes.marketsListeners":function(t,e){t!==e&&this.refreshMainMarkets(t)}}})],WC);var YC=WC,JC=YC,QC=Object(R["a"])(JC,i,o,!1,null,null,null),ZC=QC.exports,tw=n("6018"),ew=(n("29d8"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn verte-control",on:{click:t.openPicker}},[n("div",{staticClass:"verte-control__color",style:{backgroundColor:t.value}}),n("i",{staticClass:"icon-dropper"})])}),nw=[],rw={name:"Verte",props:{value:{type:String,default:"#000"},label:{type:String}},data:function(){return{currentColor:null,dialogInstance:null}},beforeDestroy:function(){this.dialogInstance&&this.dialogInstance.close()},methods:{openPicker:function(){var t=this;this.dialogInstance=Un.openPicker(this.value,(function(e){t.$emit("input",e)}),this.label,(function(){return t.$emit("close")}))}}},iw=rw,ow=Object(R["a"])(iw,ew,nw,!1,null,null,null),aw=ow.exports,sw=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{contenteditable:!1!==t.editable,disabled:!1===t.editable},on:{keydown:t.onKeyDown,input:function(e){t.changed=!0},focus:t.onFocus,blur:t.onBlur,click:t.onClick,wheel:t.onWheel}})},cw=[];function lw(t){return lw="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lw(t)}function uw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hw(t,e,n){return e&&dw(t.prototype,e),n&&dw(t,n),t}function pw(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fw(t,e)}function fw(t,e){return fw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},fw(t,e)}function mw(t){var e=bw();return function(){var n,r=gw(t);if(e){var i=gw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return vw(this,n)}}function vw(t,e){if(e&&("object"===lw(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return yw(t)}function yw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bw(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function gw(t){return gw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},gw(t)}var Sw=function(t){pw(n,t);var e=mw(n);function n(){var t;return uw(this,n),t=e.apply(this,arguments),t.changed=!1,t}return hw(n,[{key:"mounted",value:function(){var t=this.$el;t.innerText=this.content}},{key:"onContentChange",value:function(){this.$el.innerText!==this.content&&(this.$el.innerText=this.content)}},{key:"getCaretPosition",value:function(){var t,e,n=0;return window.getSelection&&(t=window.getSelection(),t.rangeCount&&(e=t.getRangeAt(0),e.commonAncestorContainer.parentNode==this.$el&&(n=e.endOffset))),n}},{key:"selectAll",value:function(){var t=this;window.setTimeout((function(){var e,n;window.getSelection&&document.createRange?(n=document.createRange(),n.selectNodeContents(t.$el),e=window.getSelection(),e.removeAllRanges(),e.addRange(n)):document.body.createTextRange&&(n=document.body.createTextRange(),n.moveToElementText(t.$el),n.select())}),1)}},{key:"onBlur",value:function(t){13!==t.which||isNaN(t.target.innerText)?(this.changed&&(t.target.innerHTML=t.target.innerText,this.$emit("output",t.target.innerText)),window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()):t.preventDefault()}},{key:"onKeyDown",value:function(t){if(this.disabled||13===t.which)return t.preventDefault(),this.$el.blur(),void(t.target.innerText=this.content);38!==t.which&&40!==t.which||this.increment((40===t.which?1:-1)*(t.shiftKey?10:1))}},{key:"onFocus",value:function(){this.changed=!1}},{key:"onClick",value:function(){var t=Date.now();this.clickAt&&t-this.clickAt<150&&this.selectAll(),this.clickAt=t}},{key:"increment",value:function(t){var e,n,r,i=this,o=this.$el.innerText.trim().split(","),a=0;if(o.length>0){this._incrementSelectionTimeout&&clearTimeout(this._incrementSelectionTimeout),r=this.position?this.position:this.getCaretPosition();for(var s=0;s<o.length;s++){var c=o[s];if(r>=a&&r<=a+c.length){e=c.replace(/[^0-9-.]/g,""),n=s;break}a+=c.length+1}}else e=o[0];if(!isNaN(e)){var l="undefined"===typeof this.max?1/0:this.max,u="undefined"===typeof this.min?-1/0:this.min,d=Pe(e),h=1/Math.pow(10,d),p=h*t*-1;e=Math.max(u,Math.min(l,+e+p)).toFixed(d),o.length>1&&(this.position=r,o[n]=e,e=o.join(","),this._incrementSelectionTimeout=setTimeout((function(){var t;i._incrementSelectionTimeout=null,document.selection?(t=document.selection.createRange(),t.moveStart("character",r),t.select()):(t=window.getSelection(),t.collapse(i.$el.lastChild,r)),i.position=null}),100)),this.$el.innerText=e,this._emitTimeout&&clearTimeout(this._emitTimeout),this._emitTimeout=setTimeout((function(){i._emitTimeout=null,i.$emit("output",e)}),50)}}},{key:"onWheel",value:function(t){var e=document.activeElement;e===t.target&&e.isContentEditable&&(t.preventDefault(),this.increment(Math.sign(t.deltaY)*(t.shiftKey?10:1)))}}]),n}(s["c"]);Object(a["a"])([Object(s["d"])("content")],Sw.prototype,"onContentChange",null),Sw=Object(a["a"])([Object(s["a"])({name:"Editable",props:["content","step","min","max","editable","disabled"]})],Sw);var _w=Sw,Cw=_w,ww=Object(R["a"])(Cw,sw,cw,!1,null,null,null),Tw=ww.exports,kw=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dropdown",{staticClass:"mrauto",attrs:{options:t.presets,placeholder:t.label,selectionClass:"ml0 -green -arrow"},on:{output:t.onSelect,open:t.bindPaste,close:t.unbindPaste},scopedSlots:t._u([{key:"option-custom",fn:function(){return[n("div",{staticClass:"column",on:{mousedown:function(t){t.preventDefault()}}},[n("div",{staticClass:"btn -green",on:{click:function(e){return t.savePreset()}}},[n("i",{staticClass:"icon-plus"})]),n("div",{staticClass:"btn -blue -file"},[n("i",{staticClass:"icon-upload"}),n("input",{attrs:{type:"file"},on:{change:t.handleFile}})]),n("div",{staticClass:"btn -red",on:{click:t.applyDefault}},[n("i",{staticClass:"icon-eraser"}),n("span",{staticClass:"ml8"},[t._v("Reset")])])])]},proxy:!0},{key:"option",fn:function(e){var r=e.value;return[r.icon?n("i",{class:"-lower icon-"+r.icon}):t._e(),n("span",{staticClass:"mr4"},[t._v(t._s(r.label))]),n("button",{staticClass:"dropdown-option__action btn -accent -small mlauto",attrs:{type:"button"},on:{mousedown:function(t){t.preventDefault()},click:function(e){return t.openPreset(r.id,r.label)}}},[n("i",{staticClass:"icon-edit"})]),n("button",{staticClass:"dropdown-option__action btn -accent -small",attrs:{type:"button"},on:{mousedown:function(t){t.preventDefault()},click:function(e){return t.deletePreset(r)}}},[n("i",{staticClass:"icon-trash"})])]}}])})},Ew=[],Iw=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Dialog",{on:{clickOutside:t.close},scopedSlots:t._u([{key:"header",fn:function(){return[n("div",[n("div",{staticClass:"title"},[n("div",{domProps:{textContent:t._s(t.meta.name)},on:{dblclick:t.renamePreset}})]),n("div",{staticClass:"subtitle",domProps:{textContent:t._s(t.meta.type)}})])]},proxy:!0}])},[n("div",{staticClass:"d-flex flex-middle"},[n("i",{staticClass:"icon-info mr16"}),n("div",{staticClass:"mr16"},[n("small",{staticClass:"text-muted"},[t._v("Created at")]),n("div",[t._v(t._s(t.createdAt)+" ago")])]),n("div",[n("small",{staticClass:"text-muted"},[t._v("Updated at")]),n("div",[t._v(t._s(t.updatedAt)+" ago")])])]),n("p",[t._v(" What's included : "),n("button",{staticClass:"btn -text",attrs:{type:"button"},domProps:{textContent:t._s(t.showDetails?"hide":"show")},on:{click:function(e){t.showDetails=!t.showDetails}}})]),t.showDetails?n("ul",t._l(t.dataProperties,(function(e){return n("li",{key:e},[n("code",{domProps:{textContent:t._s(e)}})])})),0):t._e(),n("footer",[n("dropdown",{staticClass:"-left -text-left mr16",attrs:{options:t.menu,selectionClass:"-text -large mrauto",placeholder:"Options"},scopedSlots:t._u([{key:"selection",fn:function(){return[n("i",{staticClass:"icon-cog mr4"}),n("span",[t._v("Manage")])]},proxy:!0},{key:"option",fn:function(e){var r=e.value;return[n("i",{class:["trash"===r.icon&&"text-danger","icon-"+r.icon]}),n("span",{class:"trash"===r.icon?"text-danger":""},[t._v(t._s(r.label))])]}}])}),n("button",{staticClass:"btn -text -large mlauto",attrs:{type:"button"},on:{click:t.copyPreset}},[n("i",{staticClass:"icon-copy-paste mr4"}),t._v(" Copy")]),n("button",{staticClass:"btn -blue -large ml16",attrs:{type:"button"},on:{click:t.replacePreset}},[n("i",{staticClass:"icon-check mr4"}),t._v(" Set")])],1)])},Ow=[];function Aw(t){return Aw="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Aw(t)}function Pw(t,e){return Nw(t)||Uw(t,e)||Rw(t,e)||xw()}function xw(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Rw(t,e){if(t){if("string"===typeof t)return Dw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dw(t,e):void 0}}function Dw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Uw(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done);a=!0)if(o.push(r.value),e&&o.length===e)break}catch(c){s=!0,i=c}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw i}}return o}}function Nw(t){if(Array.isArray(t))return t}var Bw={mixins:[Et],props:{preset:{required:!0}},data:function(){return{menu:[{icon:"swap",label:"Override",click:this.replacePreset},{icon:"external-link-square-alt",label:"Export",click:this.downloadPreset},{icon:"trash",label:"Delete",click:this.deletePreset}],dataProperties:[],createdAt:"N/A",updatedAt:"N/A",showDetails:!1}},computed:{meta:function(){var t=this.preset.name.match(/^([a-z-]+):?([a-z-]+)?:(.*)/),e=Pw(t,4),n=e[1],r=e[2],i=e[3];return{type:n,cat:r,name:i}}},created:function(){this.retrieveDataProperties(this.preset.data),this.preset.updatedAt&&(this.updatedAt=Rt(this.preset.updatedAt)),this.preset.createdAt&&(this.createdAt=Rt(this.preset.createdAt))},methods:{deletePreset:async function(){await pn.removePreset(this.preset.name),this.close()},downloadPreset:function(){jt(this.preset,Lt(this.preset.name))},retrieveDataProperties:function(t){for(var e in t)t[e]&&"object"===Aw(t[e])?this.retrieveDataProperties(t[e]):isNaN(e)&&-1===this.dataProperties.indexOf(e)&&this.dataProperties.push(e)},replacePreset:function(){this.close("replace")},copyPreset:async function(){await zt(JSON.stringify(this.preset)),this.$store.dispatch("app/showNotice",{id:"preset-clipboard",title:"Copied preset ".concat(this.preset.name," to clipboard")})},renamePreset:async function(){var t=await Un.prompt({action:"Rename",input:this.name});t&&t!==this.meta.name&&(await pn.removePreset(this.preset.name),this.preset.name=this.meta.type+":"+(this.meta.cat?this.meta.cat+":":"")+t,await pn.savePreset(this.preset))}}},Lw=Bw,jw=Object(R["a"])(Lw,Iw,Ow,!1,null,null,null),Mw=jw.exports;function $w(t){return $w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$w(t)}function Fw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gw(t,e,n){return e&&Hw(t.prototype,e),n&&Hw(t,n),t}function Xw(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vw(t,e)}function Vw(t,e){return Vw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Vw(t,e)}function qw(t){var e=Ww();return function(){var n,r=Yw(t);if(e){var i=Yw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Kw(this,n)}}function Kw(t,e){if(e&&("object"===$w(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zw(t)}function zw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ww(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Yw(t){return Yw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Yw(t)}var Jw=function(t){Xw(n,t);var e=qw(n);function n(){var t;return Fw(this,n),t=e.apply(this,arguments),t.presets=[{id:"custom"}],t}return Gw(n,[{key:"created",value:function(){this.getPresets()}},{key:"beforeDestroy",value:function(){this.unbindPaste()}},{key:"getPresets",value:async function(){this.presets.splice(1,this.presets.length);for(var t=await pn.getPresetsKeysByType(this.type),e=0;e<t.length;e++)this.presets.push({id:t[e],label:t[e].split(":").pop()})}},{key:"onSelect",value:async function(t){if("function"!==typeof this.presets[t].click){var e=await pn.getPreset(this.presets[t].id);this.applyPreset(e)}}},{key:"openPreset",value:async function(t,e){var n=await pn.getPreset(t),r=await Un.openAsPromise(Mw,{preset:n});"replace"===r?this.savePreset(e):"set"===r&&this.applyPreset(n),this.getPresets()}},{key:"savePreset",value:async function(t){var e=!!t;if(t&&"string"===typeof t){if(!await Un.confirm("Override preset ".concat(t," with current settings ?")))return}else t=await Un.prompt("Enter a name");if(t){var n=await this.adapter();if(n){n._id&&delete n._id,t=this.type+":"+t;var r=Date.now(),i=await pn.getPreset(t);await pn.savePreset({name:t,type:this.type,data:n,createdAt:i?i.createdAt:r,updatedAt:i?r:null},this.type),await this.getPresets()}else this.$store.dispatch("app/showNotice",{type:"error",title:e?"Canceled preset override":"Canceled preset creation"})}}},{key:"applyDefault",value:async function(){await Un.confirm("Reset "+this.type+" to default settings ?")&&this.$emit("apply")}},{key:"applyPreset",value:async function(t){this.$emit("apply",t.data)}},{key:"handleFile",value:async function(t){var e=t.target.files[0];if(e)try{await Yu.importPreset(e,this.type)&&await this.getPresets()}catch(n){this.$store.dispatch("app/showNotice",{title:n.message,type:"error"})}}},{key:"deletePreset",value:async function(t){await Un.confirm("Remove preset "+t.label+" ?")&&(await pn.removePreset(t.id),await this.getPresets())}},{key:"bindPaste",value:function(){this._pasteHandler||(this._pasteHandler=this.onPaste.bind(this),document.addEventListener("paste",this._pasteHandler))}},{key:"unbindPaste",value:function(){this._pasteHandler&&(document.removeEventListener("paste",this._pasteHandler),this._pasteHandler=null)}},{key:"onPaste",value:async function(t){if(!document.activeElement||"INPUT"!==document.activeElement.tagName&&"TEXTAREA"!==document.activeElement.tagName)try{var e=JSON.parse(t.clipboardData.getData("text/plain"));if(!e.name||!e.type||!e.data)throw new Error("missing name or type or data property");var n=+new Date;await pn.savePreset({name:e.name,type:e.type,data:e.data,createdAt:n,updatedAt:null},this.type),await this.getPresets()}catch(r){this.$store.dispatch("app/showNotice",{type:"error",title:"Unable to parse preset (paste error)\n".concat(r.message)})}}}]),n}(s["c"]);Jw=Object(a["a"])([Object(s["a"])({components:{Dropdown:Tc},props:{type:{required:!0},adapter:{required:!0},label:{default:"Presets"}}})],Jw);var Qw=Jw,Zw=Qw,tT=Object(R["a"])(Zw,kw,Ew,!1,null,null,null),eT=tT.exports,nT={bind:function(t){setTimeout((function(){t.focus(),"INPUT"===t.tagName&&t.setSelectionRange(0,t.value.length)}))}},rT=n("9f95"),iT=n.n(rT);"serviceWorker"in navigator&&iT.a.register(),r["default"].use(tw["b"],{maxWidth:"200px",duration:0,arrow:!0,animation:"none",delay:[200,0],animateFill:!1,theme:"dark"}),r["default"].component("tippy",tw["a"]),r["default"].component("verte",aw),r["default"].component("dropdown",Tc),r["default"].component("editable",Tw),r["default"].component("presets",eT),r["default"].directive("autofocus",nT),new r["default"]({el:"#app",store:ta,render:function(t){return t(ZC)},props:["initialized"]})},d071:function(t,e,n){},d734:function(t,e,n){},dbe0:function(t,e,n){},dd52:function(t,e,n){"use strict";n("a97b")},e0d0:function(t,e,n){"use strict";n("d071")},e0ff:function(t,e,n){},e294:function(t,e,n){},ef5b:function(t,e,n){},f1f6:function(t,e,n){"use strict";n("ef5b")},f552:function(t,e,n){},ff70:function(t,e,n){}});